[{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useGameStore' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'checkForCrisis' is assigned a value but never used.","line":49,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'highContrast' is assigned a value but never used.","line":53,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useGameStore } from './stores/gameStore';\r\nimport { ResourceCounter } from './components/game/ResourceCounter';\r\nimport { SmartResourceDisplay } from './components/ui/SmartResourceDisplay';\r\nimport { TimeDisplay } from './components/game/TimeDisplay';\r\nimport { FacilityPanel } from './components/game/FacilityPanel';\r\nimport { GroupedFacilityPanel } from './components/game/GroupedFacilityPanel';\r\nimport { SpeciesPanel } from './components/game/SpeciesPanel';\r\nimport { GroupedSpeciesPanel } from './components/game/GroupedSpeciesPanel';\r\nimport { GameGrid } from './components/game/GameGrid';\r\nimport { GameControls } from './components/game/GameControls';\r\nimport { SmartToolbar, useMainToolbar } from './components/ui/SmartToolbar';\r\nimport { NotificationSystem } from './components/ui/NotificationSystem';\r\nimport { KeyboardShortcuts } from './components/ui/KeyboardShortcuts';\r\nimport { SettingsModal } from './components/ui/SettingsModal';\r\nimport { ResearchTreeView } from './components/game/ResearchTreeView';\r\nimport { AchievementSystem } from './components/game/AchievementSystem';\r\nimport { ResourceTrends } from './components/game/ResourceTrends';\r\nimport { FacilityUpgrade } from './components/game/FacilityUpgrade';\r\nimport { useCrisisManager } from './components/game/CrisisEventModal';\r\nimport { SkipNavigation, ScreenReaderAnnouncement, useHighContrastMode, useReducedMotion } from './components/ui/AccessibilityFeatures';\r\nimport { AnimatedBackground } from './components/ui/AdvancedAnimations';\r\nimport { useGameLoop } from './hooks/useGameLoop';\r\nimport { useFloatingText } from './components/ui/FloatingText';\r\nimport { FloatingTextProvider } from './contexts/FloatingTextContext';\r\nimport { useParticles } from './components/ui/ParticleSystem';\r\nimport { ParticleProvider } from './contexts/ParticleContext';\r\nimport { WeatherSystem } from './components/game/WeatherSystem';\r\nimport { useTutorial } from './components/game/TutorialMode';\r\nimport { CampaignMode } from './components/game/CampaignMode';\r\nimport { BiomeSystem, BiomeDisplay } from './components/game/BiomeSystem';\r\nimport { HistoricalScenarios } from './components/game/HistoricalScenarios';\r\nimport { CampaignObjectiveTracker } from './components/game/CampaignObjectiveTracker';\r\nimport { useCampaignEvents } from './components/game/CampaignEventModal';\r\nimport { CampaignStatistics } from './components/game/CampaignStatistics';\r\nimport { GeneticModification } from './components/game/GeneticModification';\r\nimport { TouchControls, SwipeGesture } from './components/ui/MobileOptimization';\r\n\r\nfunction App() {\r\n  const [selectedFacilityForUpgrade, setSelectedFacilityForUpgrade] = useState(null);\r\n  const [useSmartUI, setUseSmartUI] = useState(true); // Toggle for new UI\r\n\r\n  // Tutorial system\r\n  const { startTutorial, TutorialComponent } = useTutorial();\r\n\r\n  // Use the smart toolbar hook\r\n  const { groups: toolbarGroups, modals } = useMainToolbar(startTutorial);\r\n  \r\n  const { activeCrisis, checkForCrisis, CrisisModal } = useCrisisManager();\r\n  \r\n  // Game loop and accessibility hooks\r\n  useGameLoop();\r\n  const [highContrast] = useHighContrastMode();\r\n  const reducedMotion = useReducedMotion();\r\n\r\n  // Floating text for visual feedback\r\n  const { FloatingTextComponent, addResourceChange, addFloatingText } = useFloatingText();\r\n\r\n  // Particle effects\r\n  const {\r\n    ParticleSystemComponent,\r\n    triggerContainmentBreach,\r\n    triggerExplosion,\r\n    triggerSparks,\r\n    triggerSmoke\r\n  } = useParticles();\r\n\r\n  // Campaign events system\r\n  const { CampaignEventModal } = useCampaignEvents();\r\n\r\n  // Check if campaign is active\r\n  const isCampaignActive = !!localStorage.getItem('current-campaign-scenario');\r\n\r\n  // Mobile detection\r\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\r\n\r\n  // Mobile interaction handlers\r\n  const handleMobileMove = (direction: 'up' | 'down' | 'left' | 'right') => {\r\n    // Could be used for grid navigation or camera movement\r\n    console.log(`Mobile move: ${direction}`);\r\n  };\r\n\r\n  const handleMobileAction = () => {\r\n    // Primary action - could trigger building placement\r\n    console.log('Mobile primary action');\r\n  };\r\n\r\n  const handleMobileSecondaryAction = () => {\r\n    // Secondary action - could open context menu\r\n    console.log('Mobile secondary action');\r\n  };\r\n\r\n  return (\r\n    <ParticleProvider value={{ triggerContainmentBreach, triggerExplosion, triggerSparks, triggerSmoke }}>\r\n      <FloatingTextProvider value={{ addResourceChange, addFloatingText }}>\r\n        <BiomeSystem>\r\n          <WeatherSystem>\r\n            <SwipeGesture\r\n              onSwipeLeft={() => isMobile && setShowSettings(false)}\r\n              onSwipeRight={() => isMobile && setShowSettings(true)}\r\n              className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-green-400\"\r\n            >\r\n      {/* Accessibility Features */}\r\n      <SkipNavigation />\r\n      \r\n      {/* Animated Background */}\r\n      {!reducedMotion && <AnimatedBackground />}\r\n      \r\n      {/* Screen Reader Announcements */}\r\n      {activeCrisis && (\r\n        <ScreenReaderAnnouncement \r\n          message={`Crisis event: ${activeCrisis.event.name}`} \r\n          priority=\"assertive\" \r\n        />\r\n      )}\r\n      \r\n      {/* Unified Header Bar */}\r\n      <header className=\"bg-slate-900/98 border-b border-green-400/30 sticky top-0 z-30 backdrop-blur-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n\r\n          {/* Desktop Layout */}\r\n          <div className=\"hidden lg:flex items-center gap-12\">\r\n\r\n            {/* Primary: Game Identity - Prominent left section */}\r\n            <div className=\"flex items-center gap-4 bg-slate-800/30 rounded-lg px-4 py-2.5 border border-slate-700/50 shadow-sm\">\r\n              <h1 className=\"text-xl font-bold text-green-400 glow tracking-wide\">\r\n                XENOMORPH PARK\r\n              </h1>\r\n              <div className=\"px-3 py-1.5 bg-green-400/20 text-green-400 rounded-md text-sm font-medium border border-green-400/40 shadow-sm\">\r\n                üèóÔ∏è Building Mode\r\n              </div>\r\n            </div>\r\n\r\n            {/* Secondary Information - Central grouped section */}\r\n            <div className=\"flex items-center gap-8 flex-1 justify-center\">\r\n\r\n              {/* Game Status */}\r\n              <div className=\"bg-slate-800/20 rounded-lg px-4 py-2 border border-slate-700/30\">\r\n                <TimeDisplay />\r\n              </div>\r\n\r\n              {/* Resources */}\r\n              <div className=\"bg-slate-800/20 rounded-lg px-4 py-2 border border-slate-700/30\">\r\n                {useSmartUI ? (\r\n                  <SmartResourceDisplay />\r\n                ) : (\r\n                  <ResourceCounter />\r\n                )}\r\n              </div>\r\n\r\n              {/* Environment */}\r\n              <div className=\"bg-slate-800/20 rounded-lg px-3 py-2 border border-slate-700/30\">\r\n                <BiomeDisplay />\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* Tertiary: Actions - De-emphasized right section */}\r\n            <div className=\"flex items-center gap-2 bg-slate-800/15 rounded-lg px-3 py-2 border border-slate-700/20\">\r\n              <GameControls />\r\n\r\n              <div className=\"w-px h-4 bg-slate-600/40 mx-2\"></div>\r\n\r\n              <button\r\n                onClick={() => setUseSmartUI(!useSmartUI)}\r\n                className=\"p-2 text-slate-400 hover:text-green-400 transition-all duration-200 text-xs rounded hover:bg-slate-700/50 hover:scale-105\"\r\n                title=\"Toggle UI Mode\"\r\n              >\r\n                {useSmartUI ? 'üìã' : 'üîß'}\r\n              </button>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/* Mobile/Tablet Layout */}\r\n          <div className=\"lg:hidden space-y-3\">\r\n\r\n            {/* Top Row: Identity + Controls */}\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2 bg-slate-800/30 rounded-lg px-3 py-2 border border-slate-700/50\">\r\n                <h1 className=\"text-lg font-bold text-green-400 glow\">\r\n                  XENOMORPH PARK\r\n                </h1>\r\n                <div className=\"px-2 py-1 bg-green-400/20 text-green-400 rounded text-xs font-medium border border-green-400/40\">\r\n                  üèóÔ∏è\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-1 bg-slate-800/15 rounded-lg px-2 py-2 border border-slate-700/20\">\r\n                <GameControls />\r\n\r\n                <div className=\"w-px h-3 bg-slate-600/40 mx-1\"></div>\r\n\r\n                <button\r\n                  onClick={() => setUseSmartUI(!useSmartUI)}\r\n                  className=\"p-1.5 text-slate-400 hover:text-green-400 transition-colors text-xs rounded hover:bg-slate-700/50\"\r\n                  title=\"Toggle UI Mode\"\r\n                >\r\n                  {useSmartUI ? 'üìã' : 'üîß'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Bottom Row: Information */}\r\n            <div className=\"flex items-center gap-3 text-sm\">\r\n              <div className=\"bg-slate-800/20 rounded-lg px-3 py-1.5 border border-slate-700/30 flex-shrink-0\">\r\n                <TimeDisplay />\r\n              </div>\r\n\r\n              <div className=\"bg-slate-800/20 rounded-lg px-3 py-1.5 border border-slate-700/30 flex-1 min-w-0\">\r\n                {useSmartUI ? (\r\n                  <SmartResourceDisplay />\r\n                ) : (\r\n                  <ResourceCounter />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"bg-slate-800/20 rounded-lg px-2 py-1.5 border border-slate-700/30 flex-shrink-0\">\r\n                <BiomeDisplay />\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </header>\r\n\r\n      <div id=\"main-content\" className=\"max-w-7xl mx-auto px-4 py-6 relative z-10\">\r\n\r\n        {/* Smart Toolbar (if enabled) */}\r\n        {useSmartUI && (\r\n          <div className=\"mb-6\">\r\n            <SmartToolbar groups={toolbarGroups} />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-6\">\r\n          {/* Resource Trends */}\r\n          <ResourceTrends />\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n            {/* Left Panel - Facilities & Species */}\r\n            <div className=\"lg:col-span-1 space-y-4\">\r\n              {useSmartUI ? (\r\n                <>\r\n                  <GroupedFacilityPanel />\r\n                  <GroupedSpeciesPanel />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FacilityPanel />\r\n                  <SpeciesPanel />\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Right Panel - Game Grid */}\r\n            <div className=\"lg:col-span-2\">\r\n              <GameGrid />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <footer className=\"mt-12 text-center text-slate-500 text-sm\">\r\n          <p>Xenomorph Park ¬© 2025 - WebHatchery Project</p>\r\n          <p className=\"mt-1 text-xs\">\r\n            Press <kbd className=\"px-1 py-0.5 bg-slate-700 rounded text-slate-300\">H</kbd> for keyboard shortcuts\r\n          </p>\r\n        </footer>\r\n      </div>\r\n\r\n      {/* Global Components */}\r\n      <KeyboardShortcuts />\r\n      <NotificationSystem position=\"top-right\" />\r\n      <SettingsModal\r\n        isOpen={modals.showSettings}\r\n        onClose={() => modals.setShowSettings(false)}\r\n      />\r\n      <ResearchTreeView\r\n        isOpen={modals.showResearchTree}\r\n        onClose={() => modals.setShowResearchTree(false)}\r\n      />\r\n      <AchievementSystem\r\n        isOpen={modals.showAchievements}\r\n        onClose={() => modals.setShowAchievements(false)}\r\n      />\r\n      <CampaignMode\r\n        isOpen={modals.showCampaign}\r\n        onClose={() => modals.setShowCampaign(false)}\r\n      />\r\n      <HistoricalScenarios\r\n        isOpen={modals.showHistorical}\r\n        onClose={() => modals.setShowHistorical(false)}\r\n      />\r\n      <CampaignStatistics\r\n        isOpen={modals.showCampaignStats}\r\n        onClose={() => modals.setShowCampaignStats(false)}\r\n      />\r\n      <GeneticModification\r\n        isOpen={modals.showGeneticLab}\r\n        onClose={() => modals.setShowGeneticLab(false)}\r\n      />\r\n      <FacilityUpgrade\r\n        isOpen={!!selectedFacilityForUpgrade}\r\n        facility={selectedFacilityForUpgrade}\r\n        onClose={() => setSelectedFacilityForUpgrade(null)}\r\n      />\r\n      <CrisisModal\r\n        isOpen={!!activeCrisis}\r\n        onClose={() => {}}\r\n      />\r\n\r\n        {/* Floating Text for Visual Feedback */}\r\n        <FloatingTextComponent />\r\n\r\n          {/* Particle Effects */}\r\n          <ParticleSystemComponent />\r\n\r\n          {/* Tutorial System */}\r\n          <TutorialComponent />\r\n\r\n          {/* Campaign Objective Tracker */}\r\n          <CampaignObjectiveTracker isActive={isCampaignActive} />\r\n\r\n          {/* Campaign Events */}\r\n          <CampaignEventModal />\r\n\r\n          {/* Mobile Touch Controls */}\r\n          {isMobile && (\r\n            <TouchControls\r\n              onMove={handleMobileMove}\r\n              onAction={handleMobileAction}\r\n              onSecondaryAction={handleMobileSecondaryAction}\r\n            />\r\n          )}\r\n            </SwipeGesture>\r\n          </WeatherSystem>\r\n        </BiomeSystem>\r\n      </FloatingTextProvider>\r\n    </ParticleProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\AchievementSystem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":333,"column":15,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":333,"endColumn":84,"suggestions":[{"messageId":"addBrackets","fix":{"range":[9891,10054],"text":"{ const otherAchievements = prev.filter(a => a.id !== 'completionist');\r\n              shouldUnlock = otherAchievements.every(a => a.unlocked);\r\n              break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkAchievements'. Either include it or remove the dependency array.","line":392,"column":6,"nodeType":"ArrayExpression","endLine":392,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [checkAchievements]","fix":{"range":[11702,11704],"text":"[checkAchievements]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkAchievements'. Either include it or remove the dependency array.","line":410,"column":6,"nodeType":"ArrayExpression","endLine":410,"endColumn":57,"suggestions":[{"desc":"Update the dependencies array to be: [facilities.length, research.completed.length, day, checkAchievements]","fix":{"range":[12310,12361],"text":"[facilities.length, research.completed.length, day, checkAchievements]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalPossiblePoints' is assigned a value but never used.","line":441,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":441,"endColumn":28},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":581,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":581,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { AnimatedProgressBar, PulseEffect } from '../ui/VisualFeedback';\r\n\r\ninterface Achievement {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  category: 'building' | 'research' | 'survival' | 'management' | 'special';\r\n  difficulty: 'easy' | 'medium' | 'hard' | 'legendary';\r\n  points: number;\r\n  hidden: boolean;\r\n  requirements: {\r\n    type: 'facility_count' | 'research_complete' | 'xenomorph_count' | 'credits' | 'visitors' | 'days_survived' | 'custom';\r\n    target: number | string;\r\n    condition?: string;\r\n  };\r\n  unlocked: boolean;\r\n  unlockedAt?: number;\r\n  progress?: number;\r\n}\r\n\r\ninterface AchievementToastProps {\r\n  achievement: Achievement;\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface AchievementSystemProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst ACHIEVEMENTS: Achievement[] = [\r\n  // Building Achievements\r\n  {\r\n    id: 'first_facility',\r\n    name: 'Foundation',\r\n    description: 'Build your first facility',\r\n    icon: 'üèóÔ∏è',\r\n    category: 'building',\r\n    difficulty: 'easy',\r\n    points: 10,\r\n    hidden: false,\r\n    requirements: { type: 'facility_count', target: 1 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'facility_master',\r\n    name: 'Facility Master',\r\n    description: 'Build 10 facilities',\r\n    icon: 'üè≠',\r\n    category: 'building',\r\n    difficulty: 'medium',\r\n    points: 50,\r\n    hidden: false,\r\n    requirements: { type: 'facility_count', target: 10 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'metropolis',\r\n    name: 'Metropolis',\r\n    description: 'Build 25 facilities',\r\n    icon: 'üèôÔ∏è',\r\n    category: 'building',\r\n    difficulty: 'hard',\r\n    points: 150,\r\n    hidden: false,\r\n    requirements: { type: 'facility_count', target: 25 },\r\n    unlocked: false\r\n  },\r\n\r\n  // Research Achievements\r\n  {\r\n    id: 'first_research',\r\n    name: 'Mad Scientist',\r\n    description: 'Complete your first xenomorph research',\r\n    icon: 'üî¨',\r\n    category: 'research',\r\n    difficulty: 'easy',\r\n    points: 25,\r\n    hidden: false,\r\n    requirements: { type: 'research_complete', target: 1 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'xenobiologist',\r\n    name: 'Xenobiologist',\r\n    description: 'Complete research on 3 different species',\r\n    icon: 'üß¨',\r\n    category: 'research',\r\n    difficulty: 'medium',\r\n    points: 75,\r\n    hidden: false,\r\n    requirements: { type: 'research_complete', target: 3 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'queen_researcher',\r\n    name: 'Royal Studies',\r\n    description: 'Complete research on the Queen xenomorph',\r\n    icon: 'üëë',\r\n    category: 'research',\r\n    difficulty: 'legendary',\r\n    points: 300,\r\n    hidden: true,\r\n    requirements: { type: 'custom', target: 'queen_researched' },\r\n    unlocked: false\r\n  },\r\n\r\n  // Management Achievements\r\n  {\r\n    id: 'millionaire',\r\n    name: 'Millionaire',\r\n    description: 'Accumulate 1,000,000 credits',\r\n    icon: 'üí∞',\r\n    category: 'management',\r\n    difficulty: 'hard',\r\n    points: 200,\r\n    hidden: false,\r\n    requirements: { type: 'credits', target: 1000000 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'popular_park',\r\n    name: 'Popular Park',\r\n    description: 'Attract 500 visitors',\r\n    icon: 'üë•',\r\n    category: 'management',\r\n    difficulty: 'medium',\r\n    points: 100,\r\n    hidden: false,\r\n    requirements: { type: 'visitors', target: 500 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'tourist_trap',\r\n    name: 'Tourist Trap',\r\n    description: 'Attract 1000 visitors',\r\n    icon: 'üé¢',\r\n    category: 'management',\r\n    difficulty: 'hard',\r\n    points: 250,\r\n    hidden: false,\r\n    requirements: { type: 'visitors', target: 1000 },\r\n    unlocked: false\r\n  },\r\n\r\n  // Survival Achievements\r\n  {\r\n    id: 'survivor',\r\n    name: 'Survivor',\r\n    description: 'Survive 30 days',\r\n    icon: 'üìÖ',\r\n    category: 'survival',\r\n    difficulty: 'medium',\r\n    points: 100,\r\n    hidden: false,\r\n    requirements: { type: 'days_survived', target: 30 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'veteran',\r\n    name: 'Veteran Manager',\r\n    description: 'Survive 100 days',\r\n    icon: 'üéñÔ∏è',\r\n    category: 'survival',\r\n    difficulty: 'hard',\r\n    points: 300,\r\n    hidden: false,\r\n    requirements: { type: 'days_survived', target: 100 },\r\n    unlocked: false\r\n  },\r\n\r\n  // Special Achievements\r\n  {\r\n    id: 'xenomorph_whisperer',\r\n    name: 'Xenomorph Whisperer',\r\n    description: 'House 20 xenomorphs simultaneously',\r\n    icon: 'üëæ',\r\n    category: 'special',\r\n    difficulty: 'hard',\r\n    points: 200,\r\n    hidden: false,\r\n    requirements: { type: 'xenomorph_count', target: 20 },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'perfect_storm',\r\n    name: 'Perfect Storm',\r\n    description: 'Survive a Critical severity crisis event',\r\n    icon: 'üå™Ô∏è',\r\n    category: 'special',\r\n    difficulty: 'legendary',\r\n    points: 500,\r\n    hidden: true,\r\n    requirements: { type: 'custom', target: 'critical_crisis_survived' },\r\n    unlocked: false\r\n  },\r\n  {\r\n    id: 'completionist',\r\n    name: 'Completionist',\r\n    description: 'Unlock all other achievements',\r\n    icon: 'üèÜ',\r\n    category: 'special',\r\n    difficulty: 'legendary',\r\n    points: 1000,\r\n    hidden: true,\r\n    requirements: { type: 'custom', target: 'all_achievements' },\r\n    unlocked: false\r\n  }\r\n];\r\n\r\nfunction AchievementToast({ achievement, isVisible, onClose }: AchievementToastProps) {\r\n  useEffect(() => {\r\n    if (isVisible) {\r\n      const timer = setTimeout(onClose, 5000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isVisible, onClose]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-4 right-4 z-50 pointer-events-auto\">\r\n      <PulseEffect pulse={true} color=\"yellow\">\r\n        <div className=\"bg-gradient-to-r from-yellow-400/20 to-orange-400/20 border-2 border-yellow-400 rounded-lg p-4 backdrop-blur-sm shadow-lg max-w-sm\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <span className=\"text-3xl\">{achievement.icon}</span>\r\n            <div className=\"flex-1\">\r\n              <div className=\"text-yellow-400 font-bold text-lg\">Achievement Unlocked!</div>\r\n              <div className=\"text-slate-300 font-semibold\">{achievement.name}</div>\r\n              <div className=\"text-slate-400 text-sm\">{achievement.description}</div>\r\n              <div className=\"text-yellow-400 text-sm mt-1\">+{achievement.points} points</div>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-slate-400 hover:text-slate-300 transition-colors\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </PulseEffect>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AchievementSystem({ isOpen, onClose }: AchievementSystemProps) {\r\n  const {\r\n    facilities,\r\n    research,\r\n    resources,\r\n    xenomorphs,\r\n    day\r\n  } = useGameStore();\r\n\r\n  const [achievements, setAchievements] = useState<Achievement[]>(() => {\r\n    // Load persisted achievements or use defaults\r\n    try {\r\n      const saved = localStorage.getItem('xenomorph-park-achievements');\r\n      if (saved) {\r\n        const parsedAchievements = JSON.parse(saved);\r\n        // Merge with ACHIEVEMENTS to handle any new achievements added\r\n        return ACHIEVEMENTS.map(defaultAchievement => {\r\n          const savedAchievement = parsedAchievements.find((a: Achievement) => a.id === defaultAchievement.id);\r\n          return savedAchievement ? { ...defaultAchievement, ...savedAchievement } : defaultAchievement;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to load achievements from localStorage:', error);\r\n    }\r\n    return ACHIEVEMENTS;\r\n  });\r\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\r\n  const [newAchievement, setNewAchievement] = useState<Achievement | null>(null);\r\n  const [showToast, setShowToast] = useState(false);\r\n  const processingRef = useRef(false);\r\n  const initialLoadRef = useRef(true);\r\n\r\n  // Achievement checking logic\r\n  const checkAchievements = useCallback(() => {\r\n    if (processingRef.current) return;\r\n\r\n    processingRef.current = true;\r\n    setAchievements(prev => prev.map(achievement => {\r\n      if (achievement.unlocked) return achievement;\r\n\r\n      let currentProgress = 0;\r\n      let shouldUnlock = false;\r\n\r\n      switch (achievement.requirements.type) {\r\n        case 'facility_count':\r\n          currentProgress = facilities.length;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'research_complete':\r\n          currentProgress = research.completed.length;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'xenomorph_count':\r\n          currentProgress = xenomorphs.length;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'credits':\r\n          currentProgress = resources.credits;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'visitors':\r\n          currentProgress = resources.visitors;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'days_survived':\r\n          currentProgress = day;\r\n          shouldUnlock = currentProgress >= achievement.requirements.target;\r\n          break;\r\n\r\n        case 'custom':\r\n          // Handle special achievements\r\n          switch (achievement.requirements.target) {\r\n            case 'queen_researched':\r\n              shouldUnlock = research.completed.includes('Queen');\r\n              break;\r\n            case 'all_achievements':\r\n              const otherAchievements = prev.filter(a => a.id !== 'completionist');\r\n              shouldUnlock = otherAchievements.every(a => a.unlocked);\r\n              break;\r\n            // Add more custom achievements as needed\r\n          }\r\n          break;\r\n      }\r\n\r\n      if (shouldUnlock && !achievement.unlocked) {\r\n        // Trigger achievement unlock\r\n        const unlockedAchievement = {\r\n          ...achievement,\r\n          unlocked: true,\r\n          unlockedAt: Date.now(),\r\n          progress: typeof achievement.requirements.target === 'number' ? achievement.requirements.target : 100\r\n        };\r\n\r\n        setNewAchievement(unlockedAchievement);\r\n        setShowToast(true);\r\n        \r\n        return unlockedAchievement;\r\n      }\r\n\r\n      return {\r\n        ...achievement,\r\n        progress: currentProgress\r\n      };\r\n    }));\r\n\r\n    // Reset processing flag after a delay\r\n    setTimeout(() => {\r\n      processingRef.current = false;\r\n    }, 500);\r\n  }, [facilities, research, xenomorphs, resources, day]);\r\n\r\n  // Save achievements to localStorage whenever they change\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('xenomorph-park-achievements', JSON.stringify(achievements));\r\n    } catch (error) {\r\n      console.warn('Failed to save achievements to localStorage:', error);\r\n    }\r\n  }, [achievements]);\r\n\r\n  // Check achievements periodically with heavy throttling\r\n  useEffect(() => {\r\n    // Skip initial load to prevent triggering achievements on fresh start\r\n    if (initialLoadRef.current) {\r\n      initialLoadRef.current = false;\r\n      return;\r\n    }\r\n\r\n    const intervalId = setInterval(() => {\r\n      if (!processingRef.current) {\r\n        checkAchievements();\r\n      }\r\n    }, 10000); // Only check every 10 seconds\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []); // Only run once after mount\r\n\r\n  // Also check when significant milestones are reached\r\n  useEffect(() => {\r\n    if (initialLoadRef.current) return;\r\n\r\n    const significantChanges =\r\n      facilities.length > 0 && facilities.length % 5 === 0 || // Every 5 facilities\r\n      research.completed.length > 0 && research.completed.length % 3 === 0 || // Every 3 research\r\n      day > 1 && day % 10 === 0; // Every 10 days\r\n\r\n    if (significantChanges) {\r\n      const timeoutId = setTimeout(() => {\r\n        checkAchievements();\r\n      }, 2000);\r\n\r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [facilities.length, research.completed.length, day]);\r\n\r\n  const categories = ['all', 'building', 'research', 'management', 'survival', 'special'];\r\n\r\n  const getDifficultyColor = (difficulty: Achievement['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'easy': return 'text-green-400';\r\n      case 'medium': return 'text-yellow-400';\r\n      case 'hard': return 'text-orange-400';\r\n      case 'legendary': return 'text-purple-400';\r\n    }\r\n  };\r\n\r\n  const getDifficultyStars = (difficulty: Achievement['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'easy': return '‚≠ê';\r\n      case 'medium': return '‚≠ê‚≠ê';\r\n      case 'hard': return '‚≠ê‚≠ê‚≠ê';\r\n      case 'legendary': return '‚≠ê‚≠ê‚≠ê‚≠ê';\r\n    }\r\n  };\r\n\r\n  const filteredAchievements = achievements.filter(achievement => {\r\n    if (selectedCategory === 'all') return true;\r\n    return achievement.category === selectedCategory;\r\n  }).filter(achievement => {\r\n    // Hide hidden achievements unless unlocked\r\n    return !achievement.hidden || achievement.unlocked;\r\n  });\r\n\r\n  const totalPoints = achievements.filter(a => a.unlocked).reduce((sum, a) => sum + a.points, 0);\r\n  const totalPossiblePoints = achievements.reduce((sum, a) => sum + a.points, 0);\r\n  const unlockedCount = achievements.filter(a => a.unlocked).length;\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={isOpen} onClose={onClose} title=\"üèÜ Achievements\">\r\n        <div className=\"space-y-6\">\r\n          {/* Statistics */}\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <div className=\"bg-slate-800 rounded p-3 text-center\">\r\n              <div className=\"text-2xl font-bold text-yellow-400\">{unlockedCount}</div>\r\n              <div className=\"text-sm text-slate-400\">Unlocked</div>\r\n            </div>\r\n            <div className=\"bg-slate-800 rounded p-3 text-center\">\r\n              <div className=\"text-2xl font-bold text-green-400\">{totalPoints}</div>\r\n              <div className=\"text-sm text-slate-400\">Points</div>\r\n            </div>\r\n            <div className=\"bg-slate-800 rounded p-3 text-center\">\r\n              <div className=\"text-2xl font-bold text-blue-400\">\r\n                {Math.round((unlockedCount / achievements.length) * 100)}%\r\n              </div>\r\n              <div className=\"text-sm text-slate-400\">Complete</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Progress Bar */}\r\n          <AnimatedProgressBar\r\n            value={unlockedCount}\r\n            max={achievements.length}\r\n            color=\"yellow\"\r\n            label={`Achievement Progress: ${unlockedCount}/${achievements.length}`}\r\n            showPercentage={true}\r\n          />\r\n\r\n          {/* Category Filter */}\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {categories.map(category => (\r\n              <button\r\n                key={category}\r\n                onClick={() => setSelectedCategory(category)}\r\n                className={`\r\n                  px-3 py-1 rounded text-sm transition-colors\r\n                  ${selectedCategory === category\r\n                    ? 'bg-green-400 text-black'\r\n                    : 'bg-slate-700 text-slate-300 hover:bg-slate-600'\r\n                  }\r\n                `}\r\n              >\r\n                {category.charAt(0).toUpperCase() + category.slice(1)}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Achievement List */}\r\n          <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n            {filteredAchievements.map(achievement => (\r\n              <div\r\n                key={achievement.id}\r\n                className={`\r\n                  border-2 rounded-lg p-4 transition-all duration-200\r\n                  ${achievement.unlocked\r\n                    ? 'border-yellow-400 bg-yellow-400/10'\r\n                    : 'border-slate-600 bg-slate-800'\r\n                  }\r\n                `}\r\n              >\r\n                <div className=\"flex items-start gap-3\">\r\n                  <span className={`text-2xl ${achievement.unlocked ? '' : 'grayscale opacity-50'}`}>\r\n                    {achievement.unlocked ? achievement.icon : 'üîí'}\r\n                  </span>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className={`font-bold ${achievement.unlocked ? 'text-yellow-400' : 'text-slate-400'}`}>\r\n                        {achievement.unlocked ? achievement.name : '???'}\r\n                      </h4>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className={getDifficultyColor(achievement.difficulty)}>\r\n                          {getDifficultyStars(achievement.difficulty)}\r\n                        </span>\r\n                        <span className=\"text-yellow-400 text-sm\">\r\n                          {achievement.points}pts\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <p className={`text-sm mb-3 ${achievement.unlocked ? 'text-slate-300' : 'text-slate-500'}`}>\r\n                      {achievement.unlocked ? achievement.description : 'Hidden achievement - complete requirements to reveal'}\r\n                    </p>\r\n\r\n                    {/* Progress for non-custom achievements */}\r\n                    {!achievement.unlocked && achievement.requirements.type !== 'custom' && achievement.progress !== undefined && (\r\n                      <div className=\"space-y-1\">\r\n                        <div className=\"flex justify-between text-xs text-slate-400\">\r\n                          <span>Progress</span>\r\n                          <span>{achievement.progress} / {achievement.requirements.target}</span>\r\n                        </div>\r\n                        <AnimatedProgressBar\r\n                          value={achievement.progress}\r\n                          max={typeof achievement.requirements.target === 'number' ? achievement.requirements.target : 100}\r\n                          color=\"blue\"\r\n                          showPercentage={false}\r\n                        />\r\n                      </div>\r\n                    )}\r\n\r\n                    {achievement.unlocked && achievement.unlockedAt && (\r\n                      <div className=\"text-xs text-slate-400\">\r\n                        Unlocked: {new Date(achievement.unlockedAt).toLocaleDateString()}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {filteredAchievements.length === 0 && (\r\n            <div className=\"text-center text-slate-400 py-8\">\r\n              No achievements found in this category.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Achievement Toast */}\r\n      {newAchievement && (\r\n        <AchievementToast\r\n          achievement={newAchievement}\r\n          isVisible={showToast}\r\n          onClose={() => {\r\n            setShowToast(false);\r\n            setTimeout(() => setNewAchievement(null), 500);\r\n          }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n// Hook for external access to achievement system\r\nexport function useAchievements() {\r\n  const [achievements, setAchievements] = useState<Achievement[]>(ACHIEVEMENTS);\r\n\r\n  const triggerCustomAchievement = useCallback((achievementId: string) => {\r\n    setAchievements(prev => prev.map(achievement => {\r\n      if (achievement.id === achievementId && !achievement.unlocked) {\r\n        return {\r\n          ...achievement,\r\n          unlocked: true,\r\n          unlockedAt: Date.now()\r\n        };\r\n      }\r\n      return achievement;\r\n    }));\r\n  }, []);\r\n\r\n  const getUnlockedCount = useCallback(() => {\r\n    return achievements.filter(a => a.unlocked).length;\r\n  }, [achievements]);\r\n\r\n  const getTotalPoints = useCallback(() => {\r\n    return achievements.filter(a => a.unlocked).reduce((sum, a) => sum + a.points, 0);\r\n  }, [achievements]);\r\n\r\n  return {\r\n    achievements,\r\n    triggerCustomAchievement,\r\n    getUnlockedCount,\r\n    getTotalPoints\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\BiomeSystem.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":44,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":44,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getBiomeEffectDescription' is assigned a value but never used.","line":410,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":410,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\n\r\nexport interface Biome {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  environment: {\r\n    temperature: 'frozen' | 'cold' | 'temperate' | 'hot' | 'scorching';\r\n    atmosphere: 'vacuum' | 'thin' | 'breathable' | 'toxic' | 'corrosive';\r\n    gravity: 'zero' | 'low' | 'standard' | 'high' | 'extreme';\r\n    radiation: 'none' | 'low' | 'moderate' | 'high' | 'lethal';\r\n  };\r\n  effects: {\r\n    facilityEfficiency: number; // 0.5 - 2.0 multiplier\r\n    containmentDifficulty: number; // -3 to +3 modifier\r\n    visitorComfort: number; // 0.1 - 1.0 multiplier\r\n    researchSpeed: number; // 0.5 - 1.5 multiplier\r\n    specialEffects?: string[];\r\n  };\r\n  nativeSpecies: string[]; // Species that thrive in this biome\r\n  hazards: BiomeHazard[];\r\n  visualTheme: {\r\n    primaryColor: string;\r\n    secondaryColor: string;\r\n    backgroundFilter: string;\r\n    particles?: 'dust' | 'snow' | 'sparks' | 'spores' | 'ash';\r\n  };\r\n}\r\n\r\nexport interface BiomeHazard {\r\n  name: string;\r\n  frequency: number; // 0-1 probability per day\r\n  severity: 'minor' | 'moderate' | 'severe' | 'catastrophic';\r\n  description: string;\r\n  effects: {\r\n    damageToFacilities?: number;\r\n    visitorEvacuation?: number;\r\n    powerDrain?: number;\r\n    researchLoss?: number;\r\n  };\r\n}\r\n\r\nexport const BIOMES: Record<string, Biome> = {\r\n  earth_colony: {\r\n    id: 'earth_colony',\r\n    name: 'Earth Colony',\r\n    description: 'Standard human colony with controlled atmosphere and familiar conditions.',\r\n    environment: {\r\n      temperature: 'temperate',\r\n      atmosphere: 'breathable',\r\n      gravity: 'standard',\r\n      radiation: 'none'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 1.0,\r\n      containmentDifficulty: 0,\r\n      visitorComfort: 1.0,\r\n      researchSpeed: 1.0\r\n    },\r\n    nativeSpecies: ['Drone', 'Warrior'],\r\n    hazards: [\r\n      {\r\n        name: 'System Malfunction',\r\n        frequency: 0.1,\r\n        severity: 'minor',\r\n        description: 'Minor technical issues with colony systems',\r\n        effects: { powerDrain: 5 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#00ff41',\r\n      secondaryColor: '#0066cc',\r\n      backgroundFilter: 'brightness(1) contrast(1)',\r\n      particles: 'dust'\r\n    }\r\n  },\r\n\r\n  lv_426: {\r\n    id: 'lv_426',\r\n    name: 'LV-426 (Acheron)',\r\n    description: 'Hostile moon with violent atmospheric storms and industrial ruins.',\r\n    environment: {\r\n      temperature: 'cold',\r\n      atmosphere: 'toxic',\r\n      gravity: 'low',\r\n      radiation: 'moderate'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.8,\r\n      containmentDifficulty: 2,\r\n      visitorComfort: 0.3,\r\n      researchSpeed: 1.2,\r\n      specialEffects: ['Atmospheric storms double containment difficulty during weather events']\r\n    },\r\n    nativeSpecies: ['Warrior', 'Runner', 'Queen'],\r\n    hazards: [\r\n      {\r\n        name: 'Atmospheric Storm',\r\n        frequency: 0.3,\r\n        severity: 'severe',\r\n        description: 'Violent winds and electrical storms wreak havoc',\r\n        effects: { damageToFacilities: 20, powerDrain: 15, visitorEvacuation: 50 }\r\n      },\r\n      {\r\n        name: 'Acid Rain',\r\n        frequency: 0.2,\r\n        severity: 'moderate',\r\n        description: 'Corrosive precipitation damages exposed systems',\r\n        effects: { damageToFacilities: 10 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#ff6600',\r\n      secondaryColor: '#990000',\r\n      backgroundFilter: 'brightness(0.6) contrast(1.3) hue-rotate(20deg)',\r\n      particles: 'ash'\r\n    }\r\n  },\r\n\r\n  space_station: {\r\n    id: 'space_station',\r\n    name: 'Deep Space Station',\r\n    description: 'Isolated research station in the void of space with artificial gravity.',\r\n    environment: {\r\n      temperature: 'cold',\r\n      atmosphere: 'breathable',\r\n      gravity: 'low',\r\n      radiation: 'high'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.9,\r\n      containmentDifficulty: 1,\r\n      visitorComfort: 0.7,\r\n      researchSpeed: 1.3,\r\n      specialEffects: ['Zero visitor influx', 'Enhanced research capabilities']\r\n    },\r\n    nativeSpecies: ['Void Xenomorph', 'Synthetic Xenomorph'],\r\n    hazards: [\r\n      {\r\n        name: 'Hull Breach',\r\n        frequency: 0.15,\r\n        severity: 'catastrophic',\r\n        description: 'Micrometorite impact compromises station integrity',\r\n        effects: { damageToFacilities: 50, visitorEvacuation: 100, powerDrain: 30 }\r\n      },\r\n      {\r\n        name: 'Solar Flare',\r\n        frequency: 0.25,\r\n        severity: 'moderate',\r\n        description: 'Radiation surge affects electronic systems',\r\n        effects: { powerDrain: 20, researchLoss: 10 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#00ccff',\r\n      secondaryColor: '#6600cc',\r\n      backgroundFilter: 'brightness(0.4) contrast(1.5) hue-rotate(240deg)',\r\n      particles: 'sparks'\r\n    }\r\n  },\r\n\r\n  xenomorph_prime: {\r\n    id: 'xenomorph_prime',\r\n    name: 'Xenomorph Homeworld',\r\n    description: 'The alien homeworld with biomechanical hive structures and hostile ecosystem.',\r\n    environment: {\r\n      temperature: 'hot',\r\n      atmosphere: 'toxic',\r\n      gravity: 'high',\r\n      radiation: 'high'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.6,\r\n      containmentDifficulty: -2,\r\n      visitorComfort: 0.1,\r\n      researchSpeed: 2.0,\r\n      specialEffects: ['Xenomorphs are easier to contain', 'Massive research bonuses', 'No human visitors']\r\n    },\r\n    nativeSpecies: ['Alpha Xenomorph', 'Empress', 'Berserker Xenomorph', 'Stalker Xenomorph'],\r\n    hazards: [\r\n      {\r\n        name: 'Hive Uprising',\r\n        frequency: 0.4,\r\n        severity: 'catastrophic',\r\n        description: 'Native xenomorphs attack the facility',\r\n        effects: { damageToFacilities: 75, powerDrain: 50 }\r\n      },\r\n      {\r\n        name: 'Biomass Infestation',\r\n        frequency: 0.3,\r\n        severity: 'severe',\r\n        description: 'Alien organisms infiltrate facility systems',\r\n        effects: { damageToFacilities: 30, researchLoss: 25 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#ff0040',\r\n      secondaryColor: '#330066',\r\n      backgroundFilter: 'brightness(0.3) contrast(2) saturate(1.5) hue-rotate(300deg)',\r\n      particles: 'spores'\r\n    }\r\n  },\r\n\r\n  volcanic_world: {\r\n    id: 'volcanic_world',\r\n    name: 'Volcanic World',\r\n    description: 'Molten landscape with extreme heat and geological instability.',\r\n    environment: {\r\n      temperature: 'scorching',\r\n      atmosphere: 'toxic',\r\n      gravity: 'standard',\r\n      radiation: 'moderate'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.7,\r\n      containmentDifficulty: 1,\r\n      visitorComfort: 0.2,\r\n      researchSpeed: 1.1,\r\n      specialEffects: ['Pyro species thrive here', 'Geothermal power generation']\r\n    },\r\n    nativeSpecies: ['Pyro Xenomorph', 'Boiler'],\r\n    hazards: [\r\n      {\r\n        name: 'Volcanic Eruption',\r\n        frequency: 0.2,\r\n        severity: 'catastrophic',\r\n        description: 'Massive lava flow threatens the facility',\r\n        effects: { damageToFacilities: 60, visitorEvacuation: 100, powerDrain: 25 }\r\n      },\r\n      {\r\n        name: 'Seismic Activity',\r\n        frequency: 0.35,\r\n        severity: 'moderate',\r\n        description: 'Earthquakes damage facility foundations',\r\n        effects: { damageToFacilities: 15 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#ff6600',\r\n      secondaryColor: '#cc0000',\r\n      backgroundFilter: 'brightness(0.8) contrast(1.4) saturate(1.8) hue-rotate(15deg)',\r\n      particles: 'ash'\r\n    }\r\n  },\r\n\r\n  ice_world: {\r\n    id: 'ice_world',\r\n    name: 'Frozen Wasteland',\r\n    description: 'Sub-zero planet with perpetual winter and ice storms.',\r\n    environment: {\r\n      temperature: 'frozen',\r\n      atmosphere: 'thin',\r\n      gravity: 'standard',\r\n      radiation: 'low'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.8,\r\n      containmentDifficulty: 0,\r\n      visitorComfort: 0.4,\r\n      researchSpeed: 0.9,\r\n      specialEffects: ['Cryo species gain bonuses', 'Reduced power costs for cooling']\r\n    },\r\n    nativeSpecies: ['Cryo Xenomorph'],\r\n    hazards: [\r\n      {\r\n        name: 'Blizzard',\r\n        frequency: 0.4,\r\n        severity: 'moderate',\r\n        description: 'Severe ice storms reduce visibility and mobility',\r\n        effects: { visitorEvacuation: 30, powerDrain: 10 }\r\n      },\r\n      {\r\n        name: 'Ice Quake',\r\n        frequency: 0.15,\r\n        severity: 'severe',\r\n        description: 'Shifting ice sheets damage surface structures',\r\n        effects: { damageToFacilities: 25 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#00ffff',\r\n      secondaryColor: '#0066ff',\r\n      backgroundFilter: 'brightness(1.2) contrast(1.1) saturate(0.7) hue-rotate(180deg)',\r\n      particles: 'snow'\r\n    }\r\n  },\r\n\r\n  aquatic_world: {\r\n    id: 'aquatic_world',\r\n    name: 'Ocean World',\r\n    description: 'Water-covered planet with underwater facilities and marine ecosystems.',\r\n    environment: {\r\n      temperature: 'temperate',\r\n      atmosphere: 'breathable',\r\n      gravity: 'standard',\r\n      radiation: 'none'\r\n    },\r\n    effects: {\r\n      facilityEfficiency: 0.9,\r\n      containmentDifficulty: -1,\r\n      visitorComfort: 0.8,\r\n      researchSpeed: 1.2,\r\n      specialEffects: ['Aquatic species thrive here', 'Unique underwater viewing experiences']\r\n    },\r\n    nativeSpecies: ['Aqua Xenomorph'],\r\n    hazards: [\r\n      {\r\n        name: 'Tidal Wave',\r\n        frequency: 0.1,\r\n        severity: 'severe',\r\n        description: 'Massive wave surge floods surface facilities',\r\n        effects: { damageToFacilities: 40, visitorEvacuation: 75 }\r\n      },\r\n      {\r\n        name: 'Pressure Breach',\r\n        frequency: 0.2,\r\n        severity: 'moderate',\r\n        description: 'Underwater facility hull integrity compromised',\r\n        effects: { damageToFacilities: 20, powerDrain: 15 }\r\n      }\r\n    ],\r\n    visualTheme: {\r\n      primaryColor: '#0099cc',\r\n      secondaryColor: '#006699',\r\n      backgroundFilter: 'brightness(0.9) contrast(1.2) saturate(1.3) hue-rotate(200deg)',\r\n      particles: 'dust'\r\n    }\r\n  }\r\n};\r\n\r\ninterface BiomeSystemProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\n// Compact biome display for header\r\nexport function BiomeDisplay() {\r\n  const [currentBiome] = useState<Biome>(BIOMES.earth_colony);\r\n\r\n  return (\r\n    <div className=\"bg-slate-800/50 border border-slate-600/50 rounded px-3 py-2 text-xs\">\r\n      <div className=\"flex items-center gap-2 mb-1\">\r\n        <span className=\"text-green-400 font-semibold\">üåç {currentBiome.name}</span>\r\n      </div>\r\n      <div className=\"flex items-center gap-2 text-slate-400\">\r\n        <span>üå°Ô∏è {currentBiome.environment.temperature}</span>\r\n        <span>üå´Ô∏è {currentBiome.environment.atmosphere}</span>\r\n        <span>‚öñÔ∏è {currentBiome.environment.gravity}G</span>\r\n        <span>‚ò¢Ô∏è {currentBiome.environment.radiation}</span>\r\n      </div>\r\n      {currentBiome.nativeSpecies.length > 0 && (\r\n        <div className=\"border-t border-slate-600/50 pt-1 mt-1\">\r\n          <span className=\"text-slate-400\">Species: </span>\r\n          <span className=\"text-green-400\">{currentBiome.nativeSpecies.join(', ')}</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function BiomeSystem({ children }: BiomeSystemProps) {\r\n  const [currentBiome, setCurrentBiome] = useState<Biome>(BIOMES.earth_colony);\r\n  const { day, hour } = useGameStore();\r\n\r\n  // Get current biome from campaign scenario or default\r\n  useEffect(() => {\r\n    const currentScenario = localStorage.getItem('current-campaign-scenario');\r\n    if (currentScenario) {\r\n      const scenario = JSON.parse(currentScenario);\r\n      const biome = BIOMES[scenario.biome] || BIOMES.earth_colony;\r\n      setCurrentBiome(biome);\r\n    }\r\n  }, []);\r\n\r\n  // Process biome hazards\r\n  useEffect(() => {\r\n    const checkHazards = () => {\r\n      currentBiome.hazards.forEach(hazard => {\r\n        if (Math.random() < hazard.frequency / 24) { // Convert daily frequency to hourly\r\n          triggerHazard(hazard);\r\n        }\r\n      });\r\n    };\r\n\r\n    checkHazards();\r\n  }, [hour, day, currentBiome]);\r\n\r\n  const triggerHazard = (hazard: BiomeHazard) => {\r\n    const { addStatusMessage, updateResources, resources } = useGameStore.getState();\r\n\r\n    addStatusMessage(`Biome Hazard: ${hazard.name} - ${hazard.description}`, 'warning');\r\n\r\n    // Apply hazard effects\r\n    if (hazard.effects.powerDrain) {\r\n      updateResources({\r\n        power: Math.max(0, resources.power - hazard.effects.powerDrain)\r\n      });\r\n    }\r\n\r\n    if (hazard.effects.visitorEvacuation) {\r\n      updateResources({\r\n        visitors: Math.max(0, resources.visitors - Math.floor(resources.visitors * hazard.effects.visitorEvacuation / 100))\r\n      });\r\n    }\r\n\r\n    // Additional effects could be implemented here\r\n    console.log(`Biome hazard triggered: ${hazard.name} (${hazard.severity})`);\r\n  };\r\n\r\n  const getBiomeEffectDescription = () => {\r\n    const effects = [];\r\n\r\n    if (currentBiome.effects.facilityEfficiency !== 1.0) {\r\n      const percent = Math.round((currentBiome.effects.facilityEfficiency - 1) * 100);\r\n      effects.push(`Facility efficiency ${percent > 0 ? '+' : ''}${percent}%`);\r\n    }\r\n\r\n    if (currentBiome.effects.containmentDifficulty !== 0) {\r\n      const sign = currentBiome.effects.containmentDifficulty > 0 ? '+' : '';\r\n      effects.push(`Containment difficulty ${sign}${currentBiome.effects.containmentDifficulty}`);\r\n    }\r\n\r\n    if (currentBiome.effects.visitorComfort !== 1.0) {\r\n      const percent = Math.round((currentBiome.effects.visitorComfort - 1) * 100);\r\n      effects.push(`Visitor comfort ${percent > 0 ? '+' : ''}${percent}%`);\r\n    }\r\n\r\n    if (currentBiome.effects.researchSpeed !== 1.0) {\r\n      const percent = Math.round((currentBiome.effects.researchSpeed - 1) * 100);\r\n      effects.push(`Research speed ${percent > 0 ? '+' : ''}${percent}%`);\r\n    }\r\n\r\n    return effects;\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {/* Biome Information Display - Moved to header */}\r\n      {/* <div className=\"fixed top-20 right-4 z-50 bg-slate-900/90 border border-slate-600 rounded-lg p-3 text-sm max-w-sm\">\r\n        <div className=\"text-green-400 font-semibold mb-1 flex items-center gap-2\">\r\n          üåç {currentBiome.name}\r\n        </div>\r\n        <div className=\"text-slate-300 text-xs mb-2\">\r\n          {currentBiome.description}\r\n        </div>\r\n\r\n        <div className=\"space-y-1 text-xs\">\r\n          <div className=\"text-slate-400\">Environment:</div>\r\n          <div className=\"grid grid-cols-2 gap-1 text-xs\">\r\n            <span>üå°Ô∏è {currentBiome.environment.temperature}</span>\r\n            <span>üå´Ô∏è {currentBiome.environment.atmosphere}</span>\r\n            <span>‚öñÔ∏è {currentBiome.environment.gravity}G</span>\r\n            <span>‚ò¢Ô∏è {currentBiome.environment.radiation}</span>\r\n          </div>\r\n\r\n          {getBiomeEffectDescription().length > 0 && (\r\n            <div className=\"border-t border-slate-600 pt-1 mt-1\">\r\n              <div className=\"text-slate-400 mb-1\">Effects:</div>\r\n              {getBiomeEffectDescription().map((effect, index) => (\r\n                <div key={index} className=\"text-yellow-400 text-xs\">‚Ä¢ {effect}</div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {currentBiome.nativeSpecies.length > 0 && (\r\n            <div className=\"border-t border-slate-600 pt-1 mt-1\">\r\n              <div className=\"text-slate-400 mb-1\">Native Species:</div>\r\n              <div className=\"text-green-400 text-xs\">\r\n                {currentBiome.nativeSpecies.join(', ')}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div> */}\r\n\r\n      {/* Biome Particles */}\r\n      {currentBiome.visualTheme.particles && (\r\n        <BiomeParticles type={currentBiome.visualTheme.particles} />\r\n      )}\r\n\r\n      {/* Main Content with Biome Filters */}\r\n      <div\r\n        className=\"transition-all duration-3000\"\r\n        style={{\r\n          filter: currentBiome.visualTheme.backgroundFilter,\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BiomeParticles({ type }: { type: 'dust' | 'snow' | 'sparks' | 'spores' | 'ash' }) {\r\n  const particleCount = 30;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 pointer-events-none z-20 overflow-hidden\">\r\n      {Array.from({ length: particleCount }, (_, i) => (\r\n        <BiomeParticle key={i} type={type} delay={i * 200} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BiomeParticle({ type, delay }: { type: 'dust' | 'snow' | 'sparks' | 'spores' | 'ash'; delay: number }) {\r\n  const [position, setPosition] = useState({\r\n    x: Math.random() * window.innerWidth,\r\n    y: -10,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setPosition(prev => {\r\n        let speed = 1;\r\n        let drift = 0;\r\n\r\n        switch (type) {\r\n          case 'snow':\r\n            speed = 2;\r\n            drift = Math.sin(Date.now() / 1000 + delay) * 2;\r\n            break;\r\n          case 'sparks':\r\n            speed = 4;\r\n            drift = (Math.random() - 0.5) * 6;\r\n            break;\r\n          case 'ash':\r\n            speed = 1.5;\r\n            drift = (Math.random() - 0.5) * 3;\r\n            break;\r\n          case 'spores':\r\n            speed = 0.5;\r\n            drift = Math.sin(Date.now() / 2000 + delay) * 4;\r\n            break;\r\n          default:\r\n            speed = 1;\r\n            drift = (Math.random() - 0.5) * 1;\r\n        }\r\n\r\n        const newY = prev.y + speed;\r\n        const newX = prev.x + drift;\r\n\r\n        if (newY > window.innerHeight + 10) {\r\n          return {\r\n            x: Math.random() * window.innerWidth,\r\n            y: -10,\r\n          };\r\n        }\r\n\r\n        return { x: newX, y: newY };\r\n      });\r\n    }, 50);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [type, delay]);\r\n\r\n  const getParticleStyle = () => {\r\n    const baseStyle = {\r\n      position: 'absolute' as const,\r\n      left: position.x,\r\n      top: position.y,\r\n    };\r\n\r\n    switch (type) {\r\n      case 'snow':\r\n        return {\r\n          ...baseStyle,\r\n          width: '4px',\r\n          height: '4px',\r\n          background: 'white',\r\n          borderRadius: '50%',\r\n          opacity: 0.8,\r\n        };\r\n      case 'sparks':\r\n        return {\r\n          ...baseStyle,\r\n          width: '2px',\r\n          height: '6px',\r\n          background: '#ffaa00',\r\n          borderRadius: '1px',\r\n          boxShadow: '0 0 4px #ffaa00',\r\n        };\r\n      case 'ash':\r\n        return {\r\n          ...baseStyle,\r\n          width: '3px',\r\n          height: '3px',\r\n          background: '#666666',\r\n          borderRadius: '50%',\r\n          opacity: 0.6,\r\n        };\r\n      case 'spores':\r\n        return {\r\n          ...baseStyle,\r\n          width: '5px',\r\n          height: '5px',\r\n          background: 'radial-gradient(circle, rgba(0, 255, 65, 0.3), transparent)',\r\n          borderRadius: '50%',\r\n        };\r\n      default:\r\n        return {\r\n          ...baseStyle,\r\n          width: '2px',\r\n          height: '2px',\r\n          background: '#888888',\r\n          borderRadius: '50%',\r\n          opacity: 0.4,\r\n        };\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        ...getParticleStyle(),\r\n        animationDelay: `${delay}ms`,\r\n      }}\r\n    />\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\CampaignEventModal.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":192,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":192,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'eventQueue' is assigned a value but never used.","line":194,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setEventQueue' is assigned a value but never used.","line":194,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":194,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'choice' is defined but never used.","line":214,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":214,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { campaignEventManager, CampaignEvent, EventChoice } from '../../utils/campaignEvents';\r\n\r\ninterface CampaignEventModalProps {\r\n  isOpen: boolean;\r\n  event: CampaignEvent | null;\r\n  onClose: () => void;\r\n  onChoiceSelected: (choice: EventChoice) => void;\r\n}\r\n\r\nexport function CampaignEventModal({ isOpen, event, onClose, onChoiceSelected }: CampaignEventModalProps) {\r\n  const [selectedChoice, setSelectedChoice] = useState<string | null>(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const gameState = useGameStore();\r\n\r\n  useEffect(() => {\r\n    if (isOpen && event) {\r\n      setSelectedChoice(null);\r\n      setIsProcessing(false);\r\n    }\r\n  }, [isOpen, event]);\r\n\r\n  if (!isOpen || !event) return null;\r\n\r\n  const handleChoiceSelect = async (choice: EventChoice) => {\r\n    setSelectedChoice(choice.id);\r\n    setIsProcessing(true);\r\n\r\n    // Small delay for better UX\r\n    setTimeout(() => {\r\n      onChoiceSelected(choice);\r\n      campaignEventManager.applyEventChoice(event, choice);\r\n      setIsProcessing(false);\r\n      onClose();\r\n    }, 1000);\r\n  };\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'critical': return 'border-red-500 bg-red-500/10';\r\n      case 'high': return 'border-orange-500 bg-orange-500/10';\r\n      case 'medium': return 'border-yellow-500 bg-yellow-500/10';\r\n      case 'low': return 'border-blue-500 bg-blue-500/10';\r\n      default: return 'border-slate-500 bg-slate-500/10';\r\n    }\r\n  };\r\n\r\n  const getPriorityIcon = (priority: string) => {\r\n    switch (priority) {\r\n      case 'critical': return 'üö®';\r\n      case 'high': return '‚ö†Ô∏è';\r\n      case 'medium': return 'üìã';\r\n      case 'low': return '‚ÑπÔ∏è';\r\n      default: return 'üìÑ';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\">\r\n      <div className={`bg-slate-900 rounded-lg border-2 max-w-2xl w-full max-h-[90vh] overflow-y-auto ${getPriorityColor(event.priority)}`}>\r\n        {/* Header */}\r\n        <div className=\"p-6 border-b border-slate-700\">\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <span className=\"text-2xl\">{getPriorityIcon(event.priority)}</span>\r\n            <h2 className=\"text-xl font-bold text-green-400\">{event.name}</h2>\r\n            <span className={`px-2 py-1 rounded text-xs font-semibold uppercase ${\r\n              event.priority === 'critical' ? 'bg-red-500/20 text-red-400' :\r\n              event.priority === 'high' ? 'bg-orange-500/20 text-orange-400' :\r\n              event.priority === 'medium' ? 'bg-yellow-500/20 text-yellow-400' :\r\n              'bg-blue-500/20 text-blue-400'\r\n            }`}>\r\n              {event.priority}\r\n            </span>\r\n          </div>\r\n          <p className=\"text-slate-400 text-sm\">{event.description}</p>\r\n        </div>\r\n\r\n        {/* Story Content */}\r\n        <div className=\"p-6\">\r\n          <div className=\"bg-slate-800/50 rounded-lg p-4 mb-6 border-l-4 border-cyan-400\">\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <span className=\"text-cyan-400\">üìñ</span>\r\n              <span className=\"font-semibold text-cyan-400\">Story</span>\r\n            </div>\r\n            <p className=\"text-slate-300 leading-relaxed italic\">\r\n              {event.storyText}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Choices */}\r\n          <div className=\"space-y-3\">\r\n            <h3 className=\"text-lg font-semibold text-slate-200 mb-4\">Choose your response:</h3>\r\n            {event.choices.map(choice => {\r\n              const isAvailable = campaignEventManager.isChoiceAvailable(choice, gameState);\r\n              const isSelected = selectedChoice === choice.id;\r\n\r\n              return (\r\n                <button\r\n                  key={choice.id}\r\n                  onClick={() => !isProcessing && isAvailable && handleChoiceSelect(choice)}\r\n                  disabled={!isAvailable || isProcessing}\r\n                  className={`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ${\r\n                    isSelected\r\n                      ? 'border-green-400 bg-green-400/20'\r\n                      : isAvailable\r\n                        ? 'border-slate-600 bg-slate-800/50 hover:border-green-400 hover:bg-green-400/10'\r\n                        : 'border-slate-700 bg-slate-800/30 opacity-50 cursor-not-allowed'\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <span className=\"text-xl mt-1\">\r\n                      {isSelected ? '‚úÖ' : isAvailable ? 'üëÜ' : 'üö´'}\r\n                    </span>\r\n                    <div className=\"flex-1\">\r\n                      <h4 className={`font-semibold mb-1 ${\r\n                        isAvailable ? 'text-slate-200' : 'text-slate-500'\r\n                      }`}>\r\n                        {choice.text}\r\n                      </h4>\r\n                      <p className={`text-sm mb-2 ${\r\n                        isAvailable ? 'text-slate-400' : 'text-slate-600'\r\n                      }`}>\r\n                        {choice.description}\r\n                      </p>\r\n\r\n                      {/* Requirements */}\r\n                      {choice.requirements && choice.requirements.length > 0 && (\r\n                        <div className=\"text-xs text-slate-500 mb-2\">\r\n                          <strong>Requirements:</strong>\r\n                          <ul className=\"list-disc list-inside ml-2\">\r\n                            {choice.requirements.map((req, index) => (\r\n                              <li key={index}>\r\n                                {req.type === 'resource' && Object.entries(req.condition).map(([resource, value]) =>\r\n                                  `${resource}: ${value}`\r\n                                ).join(', ')}\r\n                                {req.type === 'facility' && req.condition.hasType && `Facility: ${req.condition.hasType}`}\r\n                                {req.type === 'research' && req.condition.completed && `Research: ${req.condition.completed.join(', ')}`}\r\n                                {req.type === 'species' && req.condition.minSpecies && `Minimum species: ${req.condition.minSpecies}`}\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Consequences Preview */}\r\n                      <div className=\"text-xs\">\r\n                        <strong className={isAvailable ? 'text-slate-400' : 'text-slate-600'}>\r\n                          Consequences:\r\n                        </strong>\r\n                        <ul className=\"list-disc list-inside ml-2 text-slate-500\">\r\n                          {choice.consequences.map((consequence, index) => (\r\n                            <li key={index}>{consequence.description}</li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Processing Indicator */}\r\n          {isProcessing && (\r\n            <div className=\"mt-6 text-center\">\r\n              <div className=\"inline-flex items-center gap-2 px-4 py-2 bg-green-400/20 border border-green-400 rounded-lg\">\r\n                <div className=\"w-4 h-4 border-2 border-green-400 border-t-transparent rounded-full animate-spin\"></div>\r\n                <span className=\"text-green-400\">Processing choice...</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-4 border-t border-slate-700 bg-slate-800/50\">\r\n          <div className=\"flex justify-between items-center text-xs text-slate-500\">\r\n            <span>\r\n              {event.oneTime ? 'One-time event' : 'Recurring event'}\r\n            </span>\r\n            <span>\r\n              Scenario: {event.scenarioId || 'Universal'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Hook to manage campaign events\r\nexport function useCampaignEvents() {\r\n  const [currentEvent, setCurrentEvent] = useState<CampaignEvent | null>(null);\r\n  const [eventQueue, setEventQueue] = useState<CampaignEvent[]>([]);\r\n  const gameState = useGameStore();\r\n\r\n  useEffect(() => {\r\n    // Only check for events if we're in a campaign\r\n    const isCampaignActive = !!localStorage.getItem('current-campaign-scenario');\r\n    if (!isCampaignActive) return;\r\n\r\n    const checkInterval = setInterval(() => {\r\n      if (!currentEvent) {\r\n        const newEvent = campaignEventManager.checkForEvents(gameState);\r\n        if (newEvent) {\r\n          setCurrentEvent(newEvent);\r\n        }\r\n      }\r\n    }, 30000); // Check every 30 seconds\r\n\r\n    return () => clearInterval(checkInterval);\r\n  }, [gameState, currentEvent]);\r\n\r\n  const handleEventChoice = (choice: EventChoice) => {\r\n    // This will be handled by the modal component\r\n  };\r\n\r\n  const closeEvent = () => {\r\n    setCurrentEvent(null);\r\n  };\r\n\r\n  return {\r\n    currentEvent,\r\n    handleEventChoice,\r\n    closeEvent,\r\n    CampaignEventModal: () => (\r\n      <CampaignEventModal\r\n        isOpen={!!currentEvent}\r\n        event={currentEvent}\r\n        onClose={closeEvent}\r\n        onChoiceSelected={handleEventChoice}\r\n      />\r\n    )\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\CampaignMode.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":29},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":43,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":43,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCompletedScenarios' is assigned a value but never used.","line":160,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":160,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\n\r\nexport interface CampaignScenario {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  difficulty: 'Tutorial' | 'Easy' | 'Medium' | 'Hard' | 'Nightmare';\r\n  biome: string;\r\n  objectives: CampaignObjective[];\r\n  initialResources: {\r\n    credits: number;\r\n    power: number;\r\n    research: number;\r\n    visitors: number;\r\n  };\r\n  restrictions?: {\r\n    maxFacilities?: number;\r\n    forbiddenSpecies?: string[];\r\n    timeLimit?: number; // in game days\r\n    noResearchLabs?: boolean;\r\n  };\r\n  rewards: {\r\n    credits?: number;\r\n    research?: number;\r\n    unlockedSpecies?: string[];\r\n    unlockedFacilities?: string[];\r\n  };\r\n  unlockRequirements?: string[]; // Previous scenario IDs\r\n}\r\n\r\nexport interface CampaignObjective {\r\n  id: string;\r\n  description: string;\r\n  type: 'revenue' | 'visitors' | 'species' | 'survival' | 'research' | 'facility' | 'time';\r\n  target: number | string;\r\n  completed: boolean;\r\n  required: boolean; // Must complete to win scenario\r\n}\r\n\r\nexport const CAMPAIGN_SCENARIOS: CampaignScenario[] = [\r\n  {\r\n    id: 'tutorial_first_park',\r\n    name: 'Your First Xenomorph Park',\r\n    description: 'Learn the basics of park management by building your first small-scale xenomorph exhibition.',\r\n    difficulty: 'Tutorial',\r\n    biome: 'earth_colony',\r\n    objectives: [\r\n      { id: 'build_power', description: 'Build a Power Generator', type: 'facility', target: 'Power Generator', completed: false, required: true },\r\n      { id: 'build_research', description: 'Build a Research Lab', type: 'facility', target: 'Research Lab', completed: false, required: true },\r\n      { id: 'build_visitor', description: 'Build a Visitor Center', type: 'facility', target: 'Visitor Center', completed: false, required: true },\r\n      { id: 'first_drone', description: 'Research and place a Drone', type: 'species', target: 'Drone', completed: false, required: true },\r\n      { id: 'first_revenue', description: 'Earn 2000 credits total', type: 'revenue', target: 2000, completed: false, required: true },\r\n      { id: 'visitor_satisfaction', description: 'Maintain 20+ visitors', type: 'visitors', target: 20, completed: false, required: false },\r\n      { id: 'survive_days', description: 'Survive 3 days without major incidents', type: 'time', target: 3, completed: false, required: true }\r\n    ],\r\n    initialResources: { credits: 8000, power: 25, research: 150, visitors: 5 },\r\n    rewards: { credits: 3000, research: 750, unlockedSpecies: ['Warrior'], unlockedFacilities: ['Security Station'] }\r\n  },\r\n  {\r\n    id: 'corporate_expansion',\r\n    name: 'Corporate Expansion',\r\n    description: 'Weyland-Yutani has approved expansion. Build a larger facility and attract more dangerous specimens.',\r\n    difficulty: 'Easy',\r\n    biome: 'earth_colony',\r\n    objectives: [\r\n      { id: 'security_station', description: 'Build a Security Station', type: 'facility', target: 'Security Station', completed: false, required: true },\r\n      { id: 'containment_units', description: 'Build 2 Containment Units', type: 'facility', target: 2, completed: false, required: true },\r\n      { id: 'multiple_species', description: 'House 3 different species simultaneously', type: 'species', target: 3, completed: false, required: true },\r\n      { id: 'research_warrior', description: 'Research Warrior xenomorph', type: 'research', target: 'Warrior', completed: false, required: true },\r\n      { id: 'visitor_capacity', description: 'Accommodate 75+ visitors', type: 'visitors', target: 75, completed: false, required: true },\r\n      { id: 'profit_margin', description: 'Achieve 1000 daily profit', type: 'revenue', target: 1000, completed: false, required: true },\r\n      { id: 'zero_incidents', description: 'Operate 7 days without containment breaches', type: 'time', target: 7, completed: false, required: false }\r\n    ],\r\n    initialResources: { credits: 15000, power: 40, research: 300, visitors: 15 },\r\n    restrictions: { maxFacilities: 12 },\r\n    unlockRequirements: ['tutorial_first_park'],\r\n    rewards: { credits: 8000, research: 1500, unlockedSpecies: ['Runner', 'Spitter'], unlockedFacilities: ['Medical Bay', 'Cafeteria'] }\r\n  },\r\n  {\r\n    id: 'hadleys_hope',\r\n    name: \"Hadley's Hope Recreation\",\r\n    description: 'Recreate the infamous Hadley\\'s Hope colony. Manage a research station while studying aggressive specimens.',\r\n    difficulty: 'Medium',\r\n    biome: 'lv_426',\r\n    objectives: [\r\n      { id: 'atmospheric_processor', description: 'Build an Atmospheric Processor', type: 'facility', target: 'Atmospheric Processor', completed: false, required: true },\r\n      { id: 'research_facility', description: 'Establish advanced research capabilities', type: 'research', target: 3000, completed: false, required: true },\r\n      { id: 'contain_warriors', description: 'Successfully contain 3 different warrior-class species', type: 'species', target: 3, completed: false, required: true },\r\n      { id: 'weather_survival', description: 'Survive 3 atmospheric storm events', type: 'survival', target: 3, completed: false, required: true },\r\n      { id: 'colony_population', description: 'Support 100+ colonist simulation', type: 'visitors', target: 100, completed: false, required: true },\r\n      { id: 'terraforming_success', description: 'Operate for 15 days with stable conditions', type: 'time', target: 15, completed: false, required: true },\r\n      { id: 'perfect_safety', description: 'Zero colonist casualties', type: 'survival', target: 0, completed: false, required: false }\r\n    ],\r\n    initialResources: { credits: 25000, power: 60, research: 800, visitors: 50 },\r\n    restrictions: { maxFacilities: 18, timeLimit: 25, forbiddenSpecies: ['Queen', 'Empress'] },\r\n    unlockRequirements: ['corporate_expansion'],\r\n    rewards: { credits: 15000, research: 3000, unlockedSpecies: ['Praetorian', 'Lurker'], unlockedFacilities: ['Atmospheric Processor', 'Observatory'] }\r\n  },\r\n  {\r\n    id: 'nostromo_incident',\r\n    name: 'The Nostromo Incident',\r\n    description: 'A survival horror scenario. Your ship has been compromised. Survive and contain the threat.',\r\n    difficulty: 'Hard',\r\n    biome: 'space_station',\r\n    objectives: [\r\n      { id: 'survive_alien', description: 'Survive alien encounter', type: 'survival', target: 1, completed: false, required: true },\r\n      { id: 'repair_systems', description: 'Repair critical systems', type: 'facility', target: 'Life Support', completed: false, required: true },\r\n      { id: 'evacuate', description: 'Reach escape pods', type: 'survival', target: 1, completed: false, required: true }\r\n    ],\r\n    initialResources: { credits: 0, power: 10, research: 0, visitors: 0 },\r\n    restrictions: { forbiddenSpecies: ['Queen', 'Praetorian'], timeLimit: 3 },\r\n    unlockRequirements: ['hadleys_hope'],\r\n    rewards: { credits: 15000, research: 3000, unlockedSpecies: ['Neomorph'], unlockedFacilities: ['Emergency Systems'] }\r\n  },\r\n  {\r\n    id: 'weyland_yutani_exhibition',\r\n    name: 'Weyland-Yutani Grand Exhibition',\r\n    description: 'Corporate demands a massive exhibition showcasing all species. Spare no expense, but maintain perfect security.',\r\n    difficulty: 'Hard',\r\n    biome: 'earth_colony',\r\n    objectives: [\r\n      { id: 'all_species', description: 'Display all available species', type: 'species', target: 10, completed: false, required: true },\r\n      { id: 'massive_revenue', description: 'Generate 50,000 total revenue', type: 'revenue', target: 50000, completed: false, required: true },\r\n      { id: 'vip_visitors', description: 'Accommodate 200+ visitors', type: 'visitors', target: 200, completed: false, required: true },\r\n      { id: 'perfect_record', description: 'Zero visitor casualties', type: 'survival', target: 0, completed: false, required: true }\r\n    ],\r\n    initialResources: { credits: 50000, power: 100, research: 5000, visitors: 50 },\r\n    unlockRequirements: ['nostromo_incident'],\r\n    rewards: { credits: 100000, research: 10000, unlockedFacilities: ['Executive Suite', 'Corporate Laboratory'] }\r\n  },\r\n  {\r\n    id: 'alien_homeworld',\r\n    name: 'Alien Homeworld Expedition',\r\n    description: 'Establish a research outpost on the xenomorph homeworld. Face unknown species and hostile environment.',\r\n    difficulty: 'Nightmare',\r\n    biome: 'xenomorph_prime',\r\n    objectives: [\r\n      { id: 'establish_base', description: 'Build 20 facilities', type: 'facility', target: 20, completed: false, required: true },\r\n      { id: 'discover_species', description: 'Discover 5 new species', type: 'research', target: 5, completed: false, required: true },\r\n      { id: 'survive_waves', description: 'Survive 5 alien attack waves', type: 'survival', target: 5, completed: false, required: true },\r\n      { id: 'genetic_mastery', description: 'Create 10 genetic modifications', type: 'research', target: 10, completed: false, required: true }\r\n    ],\r\n    initialResources: { credits: 25000, power: 50, research: 2000, visitors: 0 },\r\n    restrictions: { forbiddenSpecies: [], timeLimit: 50 },\r\n    unlockRequirements: ['weyland_yutani_exhibition'],\r\n    rewards: { credits: 200000, research: 20000, unlockedSpecies: ['Alpha Xenomorph', 'Empress'], unlockedFacilities: ['Xenomorph Shrine', 'Hive Mind Interface'] }\r\n  }\r\n];\r\n\r\ninterface CampaignModeProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function CampaignMode({ isOpen, onClose }: CampaignModeProps) {\r\n  const [selectedScenario, setSelectedScenario] = useState<CampaignScenario | null>(null);\r\n  const [completedScenarios, setCompletedScenarios] = useState<string[]>(() => {\r\n    const saved = localStorage.getItem('xenomorph-park-campaign-progress');\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  const isScenarioUnlocked = (scenario: CampaignScenario) => {\r\n    if (!scenario.unlockRequirements) return true;\r\n    return scenario.unlockRequirements.every(req => completedScenarios.includes(req));\r\n  };\r\n\r\n  const getDifficultyColor = (difficulty: CampaignScenario['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'Tutorial': return 'text-green-400';\r\n      case 'Easy': return 'text-blue-400';\r\n      case 'Medium': return 'text-yellow-400';\r\n      case 'Hard': return 'text-red-400';\r\n      case 'Nightmare': return 'text-purple-400';\r\n      default: return 'text-slate-400';\r\n    }\r\n  };\r\n\r\n  const getDifficultyIcon = (difficulty: CampaignScenario['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'Tutorial': return 'üìö';\r\n      case 'Easy': return 'üü¢';\r\n      case 'Medium': return 'üü°';\r\n      case 'Hard': return 'üî¥';\r\n      case 'Nightmare': return 'üíÄ';\r\n      default: return '‚ö´';\r\n    }\r\n  };\r\n\r\n  const getBiomeIcon = (biome: string) => {\r\n    const icons: Record<string, string> = {\r\n      earth_colony: 'üåç',\r\n      lv_426: 'üåë',\r\n      space_station: 'üöÄ',\r\n      xenomorph_prime: 'üëæ',\r\n      research_facility: 'üî¨',\r\n      mining_station: '‚õèÔ∏è'\r\n    };\r\n    return icons[biome] || 'üåå';\r\n  };\r\n\r\n  const startScenario = (scenario: CampaignScenario) => {\r\n    if (!isScenarioUnlocked(scenario)) return;\r\n\r\n    // Initialize game state with scenario parameters\r\n    const { reset, updateResources } = useGameStore.getState();\r\n\r\n    // Reset the game\r\n    reset();\r\n\r\n    // Apply scenario starting resources\r\n    updateResources(scenario.initialResources);\r\n\r\n    // Store current scenario in localStorage for objective tracking\r\n    localStorage.setItem('current-campaign-scenario', JSON.stringify(scenario));\r\n\r\n    onClose();\r\n  };\r\n\r\n  const ScenarioCard = ({ scenario }: { scenario: CampaignScenario }) => {\r\n    const isUnlocked = isScenarioUnlocked(scenario);\r\n    const isCompleted = completedScenarios.includes(scenario.id);\r\n\r\n    return (\r\n      <div\r\n        className={`\r\n          p-4 rounded-lg border-2 cursor-pointer transition-all duration-200\r\n          ${isUnlocked\r\n            ? isCompleted\r\n              ? 'border-green-500 bg-green-500/10 hover:bg-green-500/20'\r\n              : 'border-slate-600 bg-slate-800/50 hover:bg-slate-700/50 hover:border-green-400'\r\n            : 'border-slate-700 bg-slate-900/50 opacity-50 cursor-not-allowed'\r\n          }\r\n          ${selectedScenario?.id === scenario.id ? 'ring-2 ring-green-400' : ''}\r\n        `}\r\n        onClick={() => isUnlocked && setSelectedScenario(scenario)}\r\n      >\r\n        <div className=\"flex justify-between items-start mb-2\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-2xl\">{getBiomeIcon(scenario.biome)}</span>\r\n            <div>\r\n              <h3 className={`font-semibold ${isCompleted ? 'text-green-400' : 'text-slate-200'}`}>\r\n                {scenario.name}\r\n                {isCompleted && ' ‚úÖ'}\r\n              </h3>\r\n              <div className=\"flex items-center gap-2 text-sm\">\r\n                <span className={getDifficultyColor(scenario.difficulty)}>\r\n                  {getDifficultyIcon(scenario.difficulty)} {scenario.difficulty}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {!isUnlocked && <span className=\"text-slate-500 text-sm\">üîí Locked</span>}\r\n        </div>\r\n\r\n        <p className=\"text-slate-300 text-sm mb-3 leading-relaxed\">\r\n          {scenario.description}\r\n        </p>\r\n\r\n        <div className=\"space-y-2\">\r\n          <div className=\"text-xs text-slate-400\">\r\n            <strong>Objectives:</strong> {scenario.objectives.filter(obj => obj.required).length} required, {scenario.objectives.filter(obj => !obj.required).length} optional\r\n          </div>\r\n\r\n          {scenario.restrictions && (\r\n            <div className=\"text-xs text-red-400\">\r\n              <strong>Restrictions:</strong>\r\n              {scenario.restrictions.timeLimit && ` ${scenario.restrictions.timeLimit} day limit`}\r\n              {scenario.restrictions.maxFacilities && ` Max ${scenario.restrictions.maxFacilities} facilities`}\r\n              {scenario.restrictions.noResearchLabs && ` No research labs`}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"text-xs text-green-400\">\r\n            <strong>Rewards:</strong>\r\n            {scenario.rewards.credits && ` ${scenario.rewards.credits} üí∞`}\r\n            {scenario.rewards.research && ` ${scenario.rewards.research} üî¨`}\r\n            {scenario.rewards.unlockedSpecies && ` +${scenario.rewards.unlockedSpecies.length} species`}\r\n            {scenario.rewards.unlockedFacilities && ` +${scenario.rewards.unlockedFacilities.length} facilities`}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Campaign Mode\">\r\n      <div className=\"space-y-6 max-h-96 overflow-y-auto\">\r\n        {/* Progress Overview */}\r\n        <div className=\"bg-slate-800/50 p-4 rounded-lg border border-slate-600\">\r\n          <h4 className=\"text-green-400 font-semibold mb-2\">Campaign Progress</h4>\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"text-sm\">\r\n              <span className=\"text-slate-400\">Completed:</span>\r\n              <span className=\"text-green-400 ml-2\">{completedScenarios.length}/{CAMPAIGN_SCENARIOS.length}</span>\r\n            </div>\r\n            <div className=\"flex-1 bg-slate-700 rounded-full h-2\">\r\n              <div\r\n                className=\"bg-green-400 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${(completedScenarios.length / CAMPAIGN_SCENARIOS.length) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scenario List */}\r\n        <div className=\"grid grid-cols-1 gap-4\">\r\n          {CAMPAIGN_SCENARIOS.map(scenario => (\r\n            <ScenarioCard key={scenario.id} scenario={scenario} />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Selected Scenario Details */}\r\n        {selectedScenario && (\r\n          <div className=\"bg-slate-800/50 p-4 rounded-lg border border-green-400\">\r\n            <h4 className=\"text-green-400 font-semibold mb-3\">Mission Briefing: {selectedScenario.name}</h4>\r\n\r\n            <div className=\"space-y-3 text-sm\">\r\n              <div>\r\n                <strong className=\"text-slate-300\">Starting Resources:</strong>\r\n                <div className=\"mt-1 flex gap-4 text-xs\">\r\n                  <span>üí∞ {selectedScenario.initialResources.credits}</span>\r\n                  <span>‚ö° {selectedScenario.initialResources.power}</span>\r\n                  <span>üî¨ {selectedScenario.initialResources.research}</span>\r\n                  <span>üë• {selectedScenario.initialResources.visitors}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <strong className=\"text-slate-300\">Mission Objectives:</strong>\r\n                <div className=\"mt-1 space-y-1\">\r\n                  {selectedScenario.objectives.map(objective => (\r\n                    <div key={objective.id} className=\"flex items-center gap-2 text-xs\">\r\n                      <span className={objective.required ? 'text-red-400' : 'text-blue-400'}>\r\n                        {objective.required ? 'üî¥' : 'üîµ'}\r\n                      </span>\r\n                      <span className=\"text-slate-300\">{objective.description}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          {selectedScenario && isScenarioUnlocked(selectedScenario) && (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => startScenario(selectedScenario)}\r\n              className=\"flex-1\"\r\n            >\r\n              üöÄ Start Mission\r\n            </Button>\r\n          )}\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\CampaignObjectiveTracker.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'hour' is assigned a value but never used.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":9},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'addStatusMessage' and 'completeScenario'. Either include them or remove the dependency array.","line":154,"column":6,"nodeType":"ArrayExpression","endLine":154,"endColumn":116,"suggestions":[{"desc":"Update the dependencies array to be: [resources, facilities, xenomorphs, day, research, objectives, completedObjectives, currentScenario, isActive, addStatusMessage, completeScenario]","fix":{"range":[5326,5436],"text":"[resources, facilities, xenomorphs, day, research, objectives, completedObjectives, currentScenario, isActive, addStatusMessage, completeScenario]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { CampaignScenario, CampaignObjective } from './CampaignMode';\r\n\r\ninterface ObjectiveTrackerProps {\r\n  isActive: boolean;\r\n}\r\n\r\nexport function CampaignObjectiveTracker({ isActive }: ObjectiveTrackerProps) {\r\n  const [currentScenario, setCurrentScenario] = useState<CampaignScenario | null>(null);\r\n  const [objectives, setObjectives] = useState<CampaignObjective[]>([]);\r\n  const [completedObjectives, setCompletedObjectives] = useState<string[]>([]);\r\n  const [scenarioStartTime, setScenarioStartTime] = useState<number>(0);\r\n\r\n  const {\r\n    resources,\r\n    facilities,\r\n    xenomorphs,\r\n    day,\r\n    hour,\r\n    research,\r\n    addStatusMessage\r\n  } = useGameStore();\r\n\r\n  // Load current scenario\r\n  useEffect(() => {\r\n    if (!isActive) return;\r\n\r\n    const scenarioData = localStorage.getItem('current-campaign-scenario');\r\n    if (scenarioData) {\r\n      const scenario = JSON.parse(scenarioData);\r\n      setCurrentScenario(scenario);\r\n      setObjectives(scenario.objectives || []);\r\n\r\n      const startTime = localStorage.getItem('campaign-start-time');\r\n      setScenarioStartTime(startTime ? parseInt(startTime) : Date.now());\r\n\r\n      if (!startTime) {\r\n        localStorage.setItem('campaign-start-time', Date.now().toString());\r\n      }\r\n    }\r\n  }, [isActive]);\r\n\r\n  // Check objective completion\r\n  useEffect(() => {\r\n    if (!currentScenario || !isActive) return;\r\n\r\n    const newCompletedObjectives: string[] = [];\r\n\r\n    objectives.forEach(objective => {\r\n      if (completedObjectives.includes(objective.id)) {\r\n        newCompletedObjectives.push(objective.id);\r\n        return;\r\n      }\r\n\r\n      let isCompleted = false;\r\n\r\n      switch (objective.type) {\r\n        case 'facility':\r\n          if (typeof objective.target === 'string') {\r\n            // Specific facility type\r\n            isCompleted = facilities.some(f => f.name === objective.target);\r\n          } else if (typeof objective.target === 'number') {\r\n            // Number of facilities\r\n            isCompleted = facilities.length >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'species':\r\n          if (typeof objective.target === 'string') {\r\n            // Specific species\r\n            isCompleted = xenomorphs.some(x => x.species.name === objective.target);\r\n          } else if (typeof objective.target === 'number') {\r\n            // Number of different species\r\n            const uniqueSpecies = new Set(xenomorphs.map(x => x.species.name));\r\n            isCompleted = uniqueSpecies.size >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'revenue':\r\n          if (typeof objective.target === 'number') {\r\n            // Check total credits or daily revenue\r\n            isCompleted = resources.credits >= objective.target ||\r\n                         resources.dailyRevenue >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'visitors':\r\n          if (typeof objective.target === 'number') {\r\n            isCompleted = resources.visitors >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'research':\r\n          if (typeof objective.target === 'string') {\r\n            // Specific research completed\r\n            isCompleted = research.completed.includes(objective.target);\r\n          } else if (typeof objective.target === 'number') {\r\n            // Research points accumulated\r\n            isCompleted = research.points >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'time':\r\n          if (typeof objective.target === 'number') {\r\n            // Days survived\r\n            isCompleted = day >= objective.target;\r\n          }\r\n          break;\r\n\r\n        case 'survival':\r\n          // This would be tracked by specific game events\r\n          // For now, we'll use a simple check\r\n          if (typeof objective.target === 'number') {\r\n            if (objective.target === 0) {\r\n              // No incidents (this would need to be tracked separately)\r\n              isCompleted = true; // Placeholder\r\n            } else {\r\n              // Survive X events (placeholder)\r\n              isCompleted = day >= objective.target;\r\n            }\r\n          }\r\n          break;\r\n      }\r\n\r\n      if (isCompleted && !completedObjectives.includes(objective.id)) {\r\n        newCompletedObjectives.push(objective.id);\r\n\r\n        // Trigger completion notification\r\n        addStatusMessage(\r\n          `‚úÖ Objective Complete: ${objective.description}`,\r\n          objective.required ? 'success' : 'info'\r\n        );\r\n\r\n        // Check if all required objectives are complete\r\n        const allRequired = objectives.filter(obj => obj.required);\r\n        const completedRequired = allRequired.filter(obj =>\r\n          newCompletedObjectives.includes(obj.id) || completedObjectives.includes(obj.id)\r\n        );\r\n\r\n        if (completedRequired.length === allRequired.length) {\r\n          // Scenario complete!\r\n          completeScenario();\r\n        }\r\n      }\r\n    });\r\n\r\n    if (newCompletedObjectives.length > completedObjectives.length) {\r\n      setCompletedObjectives(newCompletedObjectives);\r\n\r\n      // Save progress\r\n      localStorage.setItem('campaign-objective-progress', JSON.stringify(newCompletedObjectives));\r\n    }\r\n  }, [resources, facilities, xenomorphs, day, research, objectives, completedObjectives, currentScenario, isActive]);\r\n\r\n  const completeScenario = () => {\r\n    if (!currentScenario) return;\r\n\r\n    // Mark scenario as completed\r\n    const completedScenarios = JSON.parse(localStorage.getItem('xenomorph-park-campaign-progress') || '[]');\r\n    if (!completedScenarios.includes(currentScenario.id)) {\r\n      completedScenarios.push(currentScenario.id);\r\n      localStorage.setItem('xenomorph-park-campaign-progress', JSON.stringify(completedScenarios));\r\n    }\r\n\r\n    // Apply rewards\r\n    applyScenarioRewards(currentScenario);\r\n\r\n    // Show completion message\r\n    addStatusMessage(\r\n      `üéâ Campaign Scenario Complete: ${currentScenario.name}`,\r\n      'success'\r\n    );\r\n\r\n    // Clear current scenario\r\n    localStorage.removeItem('current-campaign-scenario');\r\n    localStorage.removeItem('campaign-start-time');\r\n    localStorage.removeItem('campaign-objective-progress');\r\n  };\r\n\r\n  const applyScenarioRewards = (scenario: CampaignScenario) => {\r\n    const { updateResources } = useGameStore.getState();\r\n\r\n    if (scenario.rewards.credits) {\r\n      updateResources({\r\n        credits: resources.credits + scenario.rewards.credits\r\n      });\r\n      addStatusMessage(`Received ${scenario.rewards.credits} credits reward`, 'success');\r\n    }\r\n\r\n    if (scenario.rewards.research) {\r\n      updateResources({\r\n        research: resources.research + scenario.rewards.research\r\n      });\r\n      addStatusMessage(`Received ${scenario.rewards.research} research points reward`, 'success');\r\n    }\r\n\r\n    // Unlock new species and facilities\r\n    if (scenario.rewards.unlockedSpecies) {\r\n      scenario.rewards.unlockedSpecies.forEach(species => {\r\n        if (!research.completed.includes(species)) {\r\n          research.completed.push(species);\r\n        }\r\n      });\r\n      addStatusMessage(`Unlocked ${scenario.rewards.unlockedSpecies.length} new species`, 'success');\r\n    }\r\n  };\r\n\r\n  const getObjectiveProgress = (objective: CampaignObjective): number => {\r\n    if (completedObjectives.includes(objective.id)) return 100;\r\n\r\n    switch (objective.type) {\r\n      case 'revenue':\r\n        if (typeof objective.target === 'number') {\r\n          return Math.min(100, (resources.credits / objective.target) * 100);\r\n        }\r\n        break;\r\n      case 'visitors':\r\n        if (typeof objective.target === 'number') {\r\n          return Math.min(100, (resources.visitors / objective.target) * 100);\r\n        }\r\n        break;\r\n      case 'research':\r\n        if (typeof objective.target === 'number') {\r\n          return Math.min(100, (research.points / objective.target) * 100);\r\n        }\r\n        break;\r\n      case 'time':\r\n        if (typeof objective.target === 'number') {\r\n          return Math.min(100, (day / objective.target) * 100);\r\n        }\r\n        break;\r\n      case 'species':\r\n        if (typeof objective.target === 'number') {\r\n          const uniqueSpecies = new Set(xenomorphs.map(x => x.species.name));\r\n          return Math.min(100, (uniqueSpecies.size / objective.target) * 100);\r\n        }\r\n        break;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  const getRemainingTime = (): string | null => {\r\n    if (!currentScenario?.restrictions?.timeLimit) return null;\r\n\r\n    const timeLimit = currentScenario.restrictions.timeLimit;\r\n    const remaining = timeLimit - day;\r\n\r\n    if (remaining <= 0) return \"Time Up!\";\r\n    if (remaining === 1) return \"1 day remaining\";\r\n    return `${remaining} days remaining`;\r\n  };\r\n\r\n  const getScenarioElapsedTime = (): string => {\r\n    const elapsed = Date.now() - scenarioStartTime;\r\n    const minutes = Math.floor(elapsed / 60000);\r\n    const hours = Math.floor(minutes / 60);\r\n\r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes % 60}m`;\r\n    }\r\n    return `${minutes}m`;\r\n  };\r\n\r\n  if (!isActive || !currentScenario) return null;\r\n\r\n  return (\r\n    <div className=\"fixed top-4 left-4 z-50 bg-slate-900/95 border border-green-400 rounded-lg p-4 max-w-sm\">\r\n      <div className=\"text-green-400 font-bold mb-2 flex items-center gap-2\">\r\n        üéØ {currentScenario.name}\r\n        <span className=\"text-xs bg-green-400/20 px-2 py-1 rounded\">\r\n          {currentScenario.difficulty}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"text-xs text-slate-400 mb-3 flex justify-between\">\r\n        <span>Elapsed: {getScenarioElapsedTime()}</span>\r\n        {getRemainingTime() && (\r\n          <span className={getRemainingTime()?.includes('Up') ? 'text-red-400' : 'text-yellow-400'}>\r\n            {getRemainingTime()}\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <div className=\"text-sm font-semibold text-slate-300 mb-2\">Objectives:</div>\r\n        {objectives.map(objective => {\r\n          const isCompleted = completedObjectives.includes(objective.id);\r\n          const progress = getObjectiveProgress(objective);\r\n\r\n          return (\r\n            <div key={objective.id} className=\"space-y-1\">\r\n              <div className=\"flex items-center gap-2 text-sm\">\r\n                <span className={`text-xs ${\r\n                  isCompleted\r\n                    ? 'text-green-400'\r\n                    : objective.required\r\n                      ? 'text-red-400'\r\n                      : 'text-blue-400'\r\n                }`}>\r\n                  {isCompleted ? '‚úÖ' : objective.required ? 'üî¥' : 'üîµ'}\r\n                </span>\r\n                <span className={`flex-1 ${\r\n                  isCompleted ? 'text-green-400 line-through' : 'text-slate-300'\r\n                }`}>\r\n                  {objective.description}\r\n                </span>\r\n              </div>\r\n\r\n              {!isCompleted && progress > 0 && (\r\n                <div className=\"ml-4\">\r\n                  <div className=\"w-full bg-slate-700 rounded-full h-1\">\r\n                    <div\r\n                      className=\"bg-green-400 h-1 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${progress}%` }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"text-xs text-slate-500 mt-1\">\r\n                    {Math.round(progress)}% complete\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Quick Stats */}\r\n      <div className=\"mt-3 pt-2 border-t border-slate-600 text-xs text-slate-400\">\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          <div>Day: {day}</div>\r\n          <div>Credits: {resources.credits}</div>\r\n          <div>Facilities: {facilities.length}</div>\r\n          <div>Species: {new Set(xenomorphs.map(x => x.species.name)).size}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\CampaignStatistics.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'campaignSaveManager' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[475,478],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[475,478],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[537,540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[537,540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[605,608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[605,608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fastestCompletion' is assigned a value but never used.","line":75,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4634,4637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4634,4637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { campaignRewardManager } from '../../utils/campaignRewards';\r\nimport { campaignSaveManager } from '../../utils/campaignSaveManager';\r\nimport { campaignEventManager } from '../../utils/campaignEvents';\r\n\r\ninterface CampaignStatisticsProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function CampaignStatistics({ isOpen, onClose }: CampaignStatisticsProps) {\r\n  const [statistics, setStatistics] = useState<any>({});\r\n  const [achievements, setAchievements] = useState<any[]>([]);\r\n  const [completionData, setCompletionData] = useState<any>({});\r\n  const [selectedTab, setSelectedTab] = useState<'overview' | 'scenarios' | 'achievements' | 'performance'>('overview');\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      loadStatistics();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const loadStatistics = () => {\r\n    const stats = campaignRewardManager.getStatistics();\r\n    const achievementsList = campaignRewardManager.getAchievements();\r\n    const completionRate = campaignRewardManager.getCompletionRate();\r\n\r\n    setStatistics(stats);\r\n    setAchievements(achievementsList);\r\n    setCompletionData({\r\n      completionRate,\r\n      totalScenarios: 6,\r\n      completedScenarios: Math.round((completionRate / 100) * 6)\r\n    });\r\n  };\r\n\r\n  const formatTime = (milliseconds: number): string => {\r\n    if (!milliseconds || milliseconds === Infinity) return 'N/A';\r\n\r\n    const totalSeconds = Math.floor(milliseconds / 1000);\r\n    const hours = Math.floor(totalSeconds / 3600);\r\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n    const seconds = totalSeconds % 60;\r\n\r\n    if (hours > 0) {\r\n      return `${hours}h ${minutes}m ${seconds}s`;\r\n    } else if (minutes > 0) {\r\n      return `${minutes}m ${seconds}s`;\r\n    } else {\r\n      return `${seconds}s`;\r\n    }\r\n  };\r\n\r\n  const formatNumber = (num: number): string => {\r\n    if (num >= 1000000) {\r\n      return `${(num / 1000000).toFixed(1)}M`;\r\n    } else if (num >= 1000) {\r\n      return `${(num / 1000).toFixed(1)}K`;\r\n    }\r\n    return num.toString();\r\n  };\r\n\r\n  const getScenarioNames = (): Record<string, string> => {\r\n    return {\r\n      'tutorial_first_park': 'Tutorial: First Park',\r\n      'hadleys_hope': 'Hadley\\'s Hope Colony',\r\n      'alien_homeworld': 'Alien Homeworld',\r\n      'space_station': 'Research Station Omega',\r\n      'corporate_facility': 'Corporate Facility',\r\n      'final_showdown': 'The Final Showdown'\r\n    };\r\n  };\r\n\r\n  const getPerformanceRating = (): string => {\r\n    const { perfectRuns, scenariosCompleted, fastestCompletion } = statistics;\r\n\r\n    if (perfectRuns >= 3) return 'Legendary';\r\n    if (perfectRuns >= 2) return 'Master';\r\n    if (scenariosCompleted >= 4) return 'Expert';\r\n    if (scenariosCompleted >= 2) return 'Skilled';\r\n    if (scenariosCompleted >= 1) return 'Novice';\r\n    return 'Rookie';\r\n  };\r\n\r\n  const getPerformanceColor = (rating: string): string => {\r\n    switch (rating) {\r\n      case 'Legendary': return 'text-purple-400';\r\n      case 'Master': return 'text-orange-400';\r\n      case 'Expert': return 'text-blue-400';\r\n      case 'Skilled': return 'text-green-400';\r\n      case 'Novice': return 'text-yellow-400';\r\n      default: return 'text-slate-400';\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-slate-900 rounded-lg border border-green-400 max-w-6xl w-full max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"p-6 border-b border-slate-700 bg-slate-800/50\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-green-400 mb-2\">Campaign Statistics</h2>\r\n              <p className=\"text-slate-400\">Your performance across all campaign scenarios</p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 text-slate-400 hover:text-red-400 transition-colors\"\r\n              title=\"Close\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"flex gap-2 mt-4\">\r\n            {[\r\n              { id: 'overview', label: 'Overview', icon: 'üìä' },\r\n              { id: 'scenarios', label: 'Scenarios', icon: 'üéØ' },\r\n              { id: 'achievements', label: 'Achievements', icon: 'üèÜ' },\r\n              { id: 'performance', label: 'Performance', icon: '‚ö°' }\r\n            ].map(tab => (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setSelectedTab(tab.id as any)}\r\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                  selectedTab === tab.id\r\n                    ? 'bg-green-400/20 text-green-400 border border-green-400'\r\n                    : 'text-slate-400 hover:text-slate-300 hover:bg-slate-700/50'\r\n                }`}\r\n              >\r\n                <span className=\"mr-2\">{tab.icon}</span>\r\n                {tab.label}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-200px)]\">\r\n          {selectedTab === 'overview' && (\r\n            <div className=\"space-y-6\">\r\n              {/* Key Metrics */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <div className=\"text-2xl mb-2\">üéØ</div>\r\n                  <div className=\"text-2xl font-bold text-green-400\">\r\n                    {completionData.completedScenarios}/{completionData.totalScenarios}\r\n                  </div>\r\n                  <div className=\"text-sm text-slate-400\">Scenarios Completed</div>\r\n                  <div className=\"w-full bg-slate-700 rounded-full h-2 mt-2\">\r\n                    <div\r\n                      className=\"bg-green-400 h-2 rounded-full transition-all duration-300\"\r\n                      style={{ width: `${completionData.completionRate}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <div className=\"text-2xl mb-2\">‚ö°</div>\r\n                  <div className={`text-2xl font-bold ${getPerformanceColor(getPerformanceRating())}`}>\r\n                    {getPerformanceRating()}\r\n                  </div>\r\n                  <div className=\"text-sm text-slate-400\">Performance Rating</div>\r\n                </div>\r\n\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <div className=\"text-2xl mb-2\">üèÜ</div>\r\n                  <div className=\"text-2xl font-bold text-yellow-400\">\r\n                    {achievements.length}\r\n                  </div>\r\n                  <div className=\"text-sm text-slate-400\">Achievements Earned</div>\r\n                </div>\r\n\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <div className=\"text-2xl mb-2\">‚è±Ô∏è</div>\r\n                  <div className=\"text-2xl font-bold text-blue-400\">\r\n                    {formatTime(statistics.fastestCompletion)}\r\n                  </div>\r\n                  <div className=\"text-sm text-slate-400\">Best Time</div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Detailed Stats */}\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <h3 className=\"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2\">\r\n                    <span>üìà</span>\r\n                    Gameplay Statistics\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Scenarios Attempted:</span>\r\n                      <span className=\"text-slate-200\">{statistics.scenariosAttempted || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Perfect Runs:</span>\r\n                      <span className=\"text-green-400\">{statistics.perfectRuns || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Total Objectives:</span>\r\n                      <span className=\"text-slate-200\">{statistics.totalObjectivesCompleted || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Facilities Built:</span>\r\n                      <span className=\"text-slate-200\">{formatNumber(statistics.facilitiesBuilt || 0)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Species Contained:</span>\r\n                      <span className=\"text-slate-200\">{formatNumber(statistics.speciesContained || 0)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-slate-400\">Crises Handled:</span>\r\n                      <span className=\"text-slate-200\">{formatNumber(statistics.crisisesHandled || 0)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <h3 className=\"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2\">\r\n                    <span>üéÆ</span>\r\n                    Recent Activity\r\n                  </h3>\r\n                  <div className=\"space-y-3 text-sm\">\r\n                    {achievements.slice(-5).reverse().map((achievement, index) => (\r\n                      <div key={index} className=\"flex items-center gap-3 p-2 bg-slate-700/50 rounded\">\r\n                        <span className=\"text-yellow-400\">üèÜ</span>\r\n                        <div>\r\n                          <div className=\"text-slate-200\">{achievement.name}</div>\r\n                          <div className=\"text-xs text-slate-500\">\r\n                            {new Date(achievement.dateUnlocked).toLocaleDateString()}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                    {achievements.length === 0 && (\r\n                      <div className=\"text-slate-500 text-center py-4\">\r\n                        No achievements yet. Complete scenarios to earn achievements!\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {selectedTab === 'scenarios' && (\r\n            <div className=\"space-y-6\">\r\n              <h3 className=\"text-xl font-semibold text-slate-200\">Scenario Progress</h3>\r\n              <div className=\"grid gap-4\">\r\n                {Object.entries(getScenarioNames()).map(([id, name]) => {\r\n                  const isCompleted = campaignRewardManager.getProgress().completedScenarios.includes(id);\r\n                  const bestTime = campaignRewardManager.getProgress().bestCompletionTimes[id];\r\n\r\n                  return (\r\n                    <div key={id} className={`p-4 rounded-lg border ${\r\n                      isCompleted\r\n                        ? 'bg-green-500/10 border-green-500/50'\r\n                        : 'bg-slate-800/50 border-slate-600'\r\n                    }`}>\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <span className=\"text-2xl\">\r\n                            {isCompleted ? '‚úÖ' : '‚è≥'}\r\n                          </span>\r\n                          <div>\r\n                            <h4 className=\"font-semibold text-slate-200\">{name}</h4>\r\n                            <p className=\"text-sm text-slate-400\">\r\n                              {isCompleted ? 'Completed' : 'Not completed'}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          {bestTime && (\r\n                            <div className=\"text-blue-400 font-mono\">\r\n                              {formatTime(bestTime)}\r\n                            </div>\r\n                          )}\r\n                          <div className=\"text-xs text-slate-500\">Best Time</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {selectedTab === 'achievements' && (\r\n            <div className=\"space-y-6\">\r\n              <h3 className=\"text-xl font-semibold text-slate-200\">Achievement Gallery</h3>\r\n              {achievements.length > 0 ? (\r\n                <div className=\"grid gap-4\">\r\n                  {achievements.map((achievement, index) => (\r\n                    <div key={index} className=\"p-4 bg-slate-800/50 rounded-lg border border-yellow-500/30\">\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <span className=\"text-3xl\">üèÜ</span>\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-semibold text-yellow-400\">{achievement.name}</h4>\r\n                          <p className=\"text-slate-400 text-sm mb-2\">{achievement.description}</p>\r\n                          <div className=\"flex justify-between items-center text-xs text-slate-500\">\r\n                            <span>Unlocked by: {getScenarioNames()[achievement.unlockedBy] || achievement.unlockedBy}</span>\r\n                            <span>{new Date(achievement.dateUnlocked).toLocaleDateString()}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"text-4xl mb-4\">üèÜ</div>\r\n                  <h4 className=\"text-xl text-slate-400 mb-2\">No Achievements Yet</h4>\r\n                  <p className=\"text-slate-500\">Complete campaign scenarios to unlock achievements!</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {selectedTab === 'performance' && (\r\n            <div className=\"space-y-6\">\r\n              <h3 className=\"text-xl font-semibold text-slate-200\">Performance Analysis</h3>\r\n\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Performance Metrics */}\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <h4 className=\"font-semibold text-slate-200 mb-4\">Efficiency Metrics</h4>\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <div className=\"flex justify-between mb-1\">\r\n                        <span className=\"text-slate-400\">Completion Rate</span>\r\n                        <span className=\"text-green-400\">{completionData.completionRate.toFixed(1)}%</span>\r\n                      </div>\r\n                      <div className=\"w-full bg-slate-700 rounded-full h-2\">\r\n                        <div\r\n                          className=\"bg-green-400 h-2 rounded-full\"\r\n                          style={{ width: `${completionData.completionRate}%` }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <div className=\"flex justify-between mb-1\">\r\n                        <span className=\"text-slate-400\">Perfect Run Rate</span>\r\n                        <span className=\"text-purple-400\">\r\n                          {statistics.scenariosCompleted > 0\r\n                            ? ((statistics.perfectRuns / statistics.scenariosCompleted) * 100).toFixed(1)\r\n                            : 0}%\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"w-full bg-slate-700 rounded-full h-2\">\r\n                        <div\r\n                          className=\"bg-purple-400 h-2 rounded-full\"\r\n                          style={{\r\n                            width: `${statistics.scenariosCompleted > 0\r\n                              ? (statistics.perfectRuns / statistics.scenariosCompleted) * 100\r\n                              : 0}%`\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Performance Tips */}\r\n                <div className=\"bg-slate-800/50 rounded-lg p-4 border border-slate-600\">\r\n                  <h4 className=\"font-semibold text-slate-200 mb-4\">Performance Tips</h4>\r\n                  <div className=\"space-y-3 text-sm\">\r\n                    {completionData.completionRate < 50 && (\r\n                      <div className=\"p-3 bg-blue-500/10 border border-blue-500/30 rounded\">\r\n                        <div className=\"text-blue-400 font-medium\">üéØ Focus on Objectives</div>\r\n                        <div className=\"text-slate-400\">Complete more scenarios to improve your rating</div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {statistics.perfectRuns === 0 && statistics.scenariosCompleted > 0 && (\r\n                      <div className=\"p-3 bg-purple-500/10 border border-purple-500/30 rounded\">\r\n                        <div className=\"text-purple-400 font-medium\">üíé Aim for Perfect Runs</div>\r\n                        <div className=\"text-slate-400\">Complete all optional objectives for better ratings</div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {statistics.fastestCompletion === Infinity && (\r\n                      <div className=\"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded\">\r\n                        <div className=\"text-yellow-400 font-medium\">‚ö° Speed Challenge</div>\r\n                        <div className=\"text-slate-400\">Try completing scenarios faster for better times</div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"p-3 bg-green-500/10 border border-green-500/30 rounded\">\r\n                      <div className=\"text-green-400 font-medium\">üìä Track Progress</div>\r\n                      <div className=\"text-slate-400\">Use this dashboard to monitor your improvement</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-4 border-t border-slate-700 bg-slate-800/50\">\r\n          <div className=\"flex justify-between items-center text-sm text-slate-500\">\r\n            <span>Campaign Statistics Dashboard</span>\r\n            <button\r\n              onClick={() => {\r\n                if (confirm('Are you sure you want to reset all campaign progress? This cannot be undone.')) {\r\n                  campaignRewardManager.resetProgress();\r\n                  campaignEventManager.clearEventHistory();\r\n                  loadStatistics();\r\n                }\r\n              }}\r\n              className=\"px-3 py-1 text-red-400 hover:text-red-300 border border-red-400/30 rounded hover:bg-red-400/10 transition-colors\"\r\n            >\r\n              Reset Progress\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\CrisisEventModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'onClose' is defined but never used.","line":102,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":102,"endColumn":58},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":281,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":281,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'facilities' is assigned a value but never used.","line":285,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":285,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'applyCrisisConsequences'. Either include it or remove the dependency array.","line":354,"column":6,"nodeType":"ArrayExpression","endLine":354,"endColumn":38,"suggestions":[{"desc":"Update the dependencies array to be: [activeCrisis, addStatusMessage, applyCrisisConsequences]","fix":{"range":[13143,13175],"text":"[activeCrisis, addStatusMessage, applyCrisisConsequences]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { PulseEffect, ShakeEffect } from '../ui/VisualFeedback';\r\nimport { CrisisEvent, Severity } from '../../types';\r\n\r\ninterface CrisisEventModalProps {\r\n  isOpen: boolean;\r\n  event: CrisisEvent | null;\r\n  onClose: () => void;\r\n  onResponse: (response: string) => void;\r\n}\r\n\r\ninterface ActiveCrisis {\r\n  event: CrisisEvent;\r\n  timeRemaining: number;\r\n  consequences: string[];\r\n  resolved: boolean;\r\n}\r\n\r\nconst EXTENDED_CRISIS_EVENTS: CrisisEvent[] = [\r\n  {\r\n    name: \"Containment Breach\",\r\n    probability: 0.3,\r\n    severity: \"Medium\",\r\n    description: \"Single xenomorph escapes containment. Security protocols activated.\",\r\n    responseOptions: [\r\n      \"Security lockdown - Seal all exits (-20 visitors, +10 security)\",\r\n      \"Colonial Marine deployment - Send armed response (+resources cost, guaranteed success)\",\r\n      \"Facility evacuation - Evacuate all civilians (-50% visitors, -facility income)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Power Failure\",\r\n    probability: 0.2,\r\n    severity: \"High\", \r\n    description: \"Main power grid failure detected. All containment systems at risk of shutdown.\",\r\n    responseOptions: [\r\n      \"Emergency power - Use backup generators (-50% power for 2 days)\",\r\n      \"Immediate evacuation - Clear facility entirely (-80% visitors, -security risk)\",\r\n      \"Manual lockdown - Manually secure all containment (-power, requires staff)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Hive Outbreak\",\r\n    probability: 0.1,\r\n    severity: \"Critical\",\r\n    description: \"Multiple xenomorphs coordinate escape attempt. Threat level: MAXIMUM\",\r\n    responseOptions: [\r\n      \"Nuclear option - Sterilize contaminated areas (-facilities, guaranteed elimination)\",\r\n      \"Full marine assault - Deploy entire security force (-credits, -staff safety)\",\r\n      \"Abandon facility - Evacuate all personnel and seal facility (-game over scenario)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Visitor Incident\",\r\n    probability: 0.25,\r\n    severity: \"Low\",\r\n    description: \"Tourist safety incident reported. Media attention increasing.\",\r\n    responseOptions: [\r\n      \"Cover-up - Use corporate influence to suppress news (-credits, +reputation)\",\r\n      \"Public relations - Hold press conference and show transparency (+trust, -secrets)\",\r\n      \"Compensation - Pay damages to affected parties (-credits, +visitor confidence)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Research Contamination\",\r\n    probability: 0.15,\r\n    severity: \"Medium\",\r\n    description: \"Laboratory contamination detected. Research materials compromised.\",\r\n    responseOptions: [\r\n      \"Quarantine lab - Seal and decontaminate research area (-research progress)\",\r\n      \"Continue research - Risk spreading contamination for scientific gain (+research, +risk)\",\r\n      \"Destroy samples - Eliminate contamination but lose research data (-research points)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Staff Rebellion\",\r\n    probability: 0.1,\r\n    severity: \"High\",\r\n    description: \"Facility staff protest dangerous working conditions. Morale critical.\",\r\n    responseOptions: [\r\n      \"Increase security - Use force to maintain order (-staff morale, +control)\",\r\n      \"Negotiate demands - Meet staff safety requirements (+credits cost, +morale)\",\r\n      \"Replace staff - Hire new personnel with fewer scruples (-time, -expertise)\"\r\n    ]\r\n  },\r\n  {\r\n    name: \"Corporate Inspection\",\r\n    probability: 0.2,\r\n    severity: \"Medium\",\r\n    description: \"Weyland-Yutani corporate inspection team arrives unannounced.\",\r\n    responseOptions: [\r\n      \"Full cooperation - Show all facilities and records (+corporate standing)\",\r\n      \"Limited access - Restrict access to sensitive areas (+secrecy, -trust)\",\r\n      \"Bribe officials - Use credits to ensure favorable report (-credits, +results)\"\r\n    ]\r\n  }\r\n];\r\n\r\nexport function CrisisEventModal({ isOpen, event, onClose, onResponse }: CrisisEventModalProps) {\r\n  const [selectedResponse, setSelectedResponse] = useState<string | null>(null);\r\n  const [timeRemaining, setTimeRemaining] = useState(30);\r\n  const [isShaking, setIsShaking] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen || !event) return;\r\n\r\n    setTimeRemaining(30);\r\n    setSelectedResponse(null);\r\n    \r\n    // Trigger shake effect for high severity events\r\n    if (event.severity === 'Critical' || event.severity === 'High') {\r\n      setIsShaking(true);\r\n      setTimeout(() => setIsShaking(false), 1000);\r\n    }\r\n\r\n    const timer = setInterval(() => {\r\n      setTimeRemaining(prev => {\r\n        if (prev <= 1) {\r\n          // Auto-select first option if time runs out\r\n          onResponse(event.responseOptions[0]);\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [isOpen, event, onResponse]);\r\n\r\n  const handleResponse = (response: string) => {\r\n    setSelectedResponse(response);\r\n    setTimeout(() => {\r\n      onResponse(response);\r\n    }, 500);\r\n  };\r\n\r\n  const getSeverityColor = (severity: Severity) => {\r\n    switch (severity) {\r\n      case 'Critical':\r\n        return 'text-red-400 border-red-400 bg-red-400/20';\r\n      case 'High':\r\n        return 'text-orange-400 border-orange-400 bg-orange-400/20';\r\n      case 'Medium':\r\n        return 'text-yellow-400 border-yellow-400 bg-yellow-400/20';\r\n      default:\r\n        return 'text-green-400 border-green-400 bg-green-400/20';\r\n    }\r\n  };\r\n\r\n  const getSeverityIcon = (severity: Severity) => {\r\n    switch (severity) {\r\n      case 'Critical':\r\n        return 'üö®';\r\n      case 'High':\r\n        return '‚ö†Ô∏è';\r\n      case 'Medium':\r\n        return 'üî∂';\r\n      default:\r\n        return '‚ÑπÔ∏è';\r\n    }\r\n  };\r\n\r\n  if (!event) return null;\r\n\r\n  return (\r\n    <ShakeEffect shake={isShaking}>\r\n      <Modal \r\n        isOpen={isOpen} \r\n        onClose={() => {}} // Prevent manual close during crisis\r\n        title={`üö® CRISIS EVENT`}\r\n      >\r\n        <div className=\"space-y-6\">\r\n          {/* Event Header */}\r\n          <div className={`border rounded-lg p-4 ${getSeverityColor(event.severity)}`}>\r\n            <div className=\"flex items-center gap-3 mb-3\">\r\n              <span className=\"text-2xl\">{getSeverityIcon(event.severity)}</span>\r\n              <div>\r\n                <h3 className=\"text-xl font-bold\">{event.name}</h3>\r\n                <div className=\"flex items-center gap-4 text-sm\">\r\n                  <span>Severity: {event.severity}</span>\r\n                  <span className=\"text-red-400 font-bold\">\r\n                    Time: {timeRemaining}s\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <p className=\"text-slate-300\">{event.description}</p>\r\n          </div>\r\n\r\n          {/* Timer Bar */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span>Response Time Remaining</span>\r\n              <span className={timeRemaining <= 10 ? 'text-red-400 font-bold' : 'text-slate-400'}>\r\n                {timeRemaining}s\r\n              </span>\r\n            </div>\r\n            <div className=\"w-full bg-slate-700 rounded-full h-3 overflow-hidden\">\r\n              <div \r\n                className={`h-full transition-all duration-1000 ${\r\n                  timeRemaining <= 10 ? 'bg-red-400' : 'bg-yellow-400'\r\n                }`}\r\n                style={{ width: `${(timeRemaining / 30) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Response Options */}\r\n          <div className=\"space-y-3\">\r\n            <h4 className=\"text-green-400 font-semibold\">Choose Your Response:</h4>\r\n            {event.responseOptions.map((option, index) => {\r\n              const isSelected = selectedResponse === option;\r\n              const [action, consequence] = option.split(' - ');\r\n              \r\n              return (\r\n                <PulseEffect key={index} pulse={isSelected} color=\"green\">\r\n                  <button\r\n                    onClick={() => handleResponse(option)}\r\n                    disabled={!!selectedResponse}\r\n                    className={`\r\n                      w-full text-left p-4 rounded-lg border-2 transition-all duration-200\r\n                      ${isSelected \r\n                        ? 'border-green-400 bg-green-400/20 text-green-400' \r\n                        : 'border-slate-600 bg-slate-800 hover:border-green-400/50 hover:bg-slate-700'\r\n                      }\r\n                      ${selectedResponse && !isSelected ? 'opacity-50' : ''}\r\n                      disabled:cursor-not-allowed\r\n                    `}\r\n                  >\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\"text-xl mt-1\">\r\n                        {index === 0 ? 'üõ°Ô∏è' : index === 1 ? '‚öîÔ∏è' : 'üèÉ'}\r\n                      </span>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"font-semibold text-slate-300 mb-1\">\r\n                          {action}\r\n                        </div>\r\n                        {consequence && (\r\n                          <div className=\"text-sm text-slate-400\">\r\n                            Consequences: {consequence}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      {isSelected && (\r\n                        <span className=\"text-green-400 text-xl\">‚úì</span>\r\n                      )}\r\n                    </div>\r\n                  </button>\r\n                </PulseEffect>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Warning Message */}\r\n          <div className=\"bg-red-900/30 border border-red-400/30 rounded p-3\">\r\n            <div className=\"flex items-center gap-2 text-red-400 text-sm\">\r\n              <span>‚ö†Ô∏è</span>\r\n              <span>\r\n                Crisis events have permanent consequences. Choose carefully!\r\n                {timeRemaining <= 10 && \" Time running out - first option will be auto-selected!\"}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Auto-selected message */}\r\n          {selectedResponse && (\r\n            <div className=\"text-center text-green-400\">\r\n              <span>Response selected... Implementing solution...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Modal>\r\n    </ShakeEffect>\r\n  );\r\n}\r\n\r\n// Crisis Manager Hook\r\nexport function useCrisisManager() {\r\n  const { \r\n    updateResources, \r\n    resources, \r\n    facilities,\r\n    xenomorphs,\r\n    addStatusMessage,\r\n    day\r\n  } = useGameStore();\r\n\r\n  const [activeCrisis, setActiveCrisis] = useState<ActiveCrisis | null>(null);\r\n  const [lastCrisisDay, setLastCrisisDay] = useState(0);\r\n  const [crisisHistory, setCrisisHistory] = useState<string[]>([]);\r\n\r\n  // Calculate crisis probability based on game state\r\n  const calculateCrisisProbability = useCallback(() => {\r\n    let baseProbability = 0.1; // 10% base chance per day\r\n\r\n    // Increase probability based on number of xenomorphs\r\n    baseProbability += xenomorphs.length * 0.05;\r\n\r\n    // Increase probability based on low security\r\n    if (resources.security === 'Low') baseProbability += 0.2;\r\n    else if (resources.security === 'Medium') baseProbability += 0.1;\r\n\r\n    // Increase probability based on power shortage\r\n    if (resources.power < resources.maxPower * 0.3) baseProbability += 0.3;\r\n\r\n    // Decrease probability if recent crisis occurred\r\n    if (day - lastCrisisDay < 3) baseProbability *= 0.5;\r\n\r\n    return Math.min(baseProbability, 0.8); // Cap at 80%\r\n  }, [xenomorphs.length, resources.security, resources.power, resources.maxPower, day, lastCrisisDay]);\r\n\r\n  // Trigger crisis check\r\n  const checkForCrisis = useCallback(() => {\r\n    if (activeCrisis) return;\r\n\r\n    const probability = calculateCrisisProbability();\r\n    if (Math.random() < probability) {\r\n      // Select random crisis event\r\n      const availableEvents = EXTENDED_CRISIS_EVENTS.filter(event => \r\n        !crisisHistory.includes(event.name) || crisisHistory.length >= EXTENDED_CRISIS_EVENTS.length\r\n      );\r\n      \r\n      const selectedEvent = availableEvents[Math.floor(Math.random() * availableEvents.length)];\r\n      \r\n      setActiveCrisis({\r\n        event: selectedEvent,\r\n        timeRemaining: 30,\r\n        consequences: [],\r\n        resolved: false\r\n      });\r\n\r\n      setLastCrisisDay(day);\r\n      addStatusMessage(`üö® Crisis Event: ${selectedEvent.name}`, 'error');\r\n    }\r\n  }, [activeCrisis, calculateCrisisProbability, crisisHistory, day, addStatusMessage]);\r\n\r\n  // Handle crisis response\r\n  const handleCrisisResponse = useCallback((response: string) => {\r\n    if (!activeCrisis) return;\r\n\r\n    const consequences = applyCrisisConsequences(activeCrisis.event, response);\r\n    \r\n    setActiveCrisis(null);\r\n    setCrisisHistory(prev => [...prev, activeCrisis.event.name]);\r\n    \r\n    // Apply consequences\r\n    consequences.forEach(consequence => {\r\n      addStatusMessage(consequence, 'warning');\r\n    });\r\n\r\n  }, [activeCrisis, addStatusMessage]);\r\n\r\n  const applyCrisisConsequences = (event: CrisisEvent, response: string): string[] => {\r\n    const consequences: string[] = [];\r\n    \r\n    // Parse response for consequences\r\n    if (response.includes('-20 visitors')) {\r\n      updateResources({ visitors: Math.max(0, resources.visitors - 20) });\r\n      consequences.push('Visitor count decreased by 20');\r\n    }\r\n    \r\n    if (response.includes('+10 security')) {\r\n      // Would need to implement security level changes\r\n      consequences.push('Security level increased');\r\n    }\r\n    \r\n    if (response.includes('-50% visitors')) {\r\n      updateResources({ visitors: Math.floor(resources.visitors * 0.5) });\r\n      consequences.push('Visitor count reduced by 50%');\r\n    }\r\n    \r\n    if (response.includes('-50% power')) {\r\n      updateResources({ power: Math.floor(resources.power * 0.5) });\r\n      consequences.push('Power reduced by 50% for emergency protocols');\r\n    }\r\n\r\n    if (response.includes('-credits')) {\r\n      const cost = Math.floor(resources.credits * 0.2);\r\n      updateResources({ credits: Math.max(0, resources.credits - cost) });\r\n      consequences.push(`Emergency response cost: ${cost} credits`);\r\n    }\r\n\r\n    return consequences;\r\n  };\r\n\r\n  return {\r\n    activeCrisis,\r\n    checkForCrisis,\r\n    handleCrisisResponse,\r\n    crisisHistory,\r\n    CrisisModal: ({ isOpen, onClose }: { isOpen: boolean; onClose: () => void }) => (\r\n      <CrisisEventModal\r\n        isOpen={isOpen && !!activeCrisis}\r\n        event={activeCrisis?.event || null}\r\n        onClose={onClose}\r\n        onResponse={handleCrisisResponse}\r\n      />\r\n    )\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\FacilityPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\FacilityUpgrade.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\GameControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\GameGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":89,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":92,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[775,778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[775,778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1173,1176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1173,1176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addResourceChange' is assigned a value but never used.","line":53,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rect' is assigned a value but never used.","line":131,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":131,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5327,5330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5327,5330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11877,11880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11877,11880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":413,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":413,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12710,12713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12710,12713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useCallback } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { GAME_CONSTANTS } from '../../constants/gameConstants';\r\nimport { GridPosition } from '../../types';\r\nimport { ContextMenu } from '../ui/ContextMenu';\r\nimport { Tooltip, TooltipContent } from '../ui/Tooltip';\r\nimport { useFloatingTextContext } from '../../contexts/FloatingTextContext';\r\n\r\nexport function GameGrid() {\r\n  const {\r\n    facilities,\r\n    xenomorphs,\r\n    selectedFacility,\r\n    selectedSpecies,\r\n    placeFacility,\r\n    placeXenomorph,\r\n    removeFacility,\r\n    removeXenomorph,\r\n    addStatusMessage\r\n  } = useGameStore();\r\n\r\n  // Drag and drop state\r\n  const [draggedItem, setDraggedItem] = useState<{type: 'facility' | 'xenomorph', data: any} | null>(null);\r\n  const [dragPreview, setDragPreview] = useState<GridPosition | null>(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const gridRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Context menu state\r\n  const [contextMenu, setContextMenu] = useState<{\r\n    isOpen: boolean;\r\n    position: { x: number; y: number };\r\n    target: { type: 'facility' | 'xenomorph'; data: any } | null;\r\n  }>({\r\n    isOpen: false,\r\n    position: { x: 0, y: 0 },\r\n    target: null,\r\n  });\r\n\r\n  // Grid helper state\r\n  const [showGridHelpers, setShowGridHelpers] = useState(false);\r\n  const [hoveredCell, setHoveredCell] = useState<GridPosition | null>(null);\r\n\r\n  // Camera controls state\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [panOffset, setPanOffset] = useState({ x: 0, y: 0 });\r\n  const [isPanning, setIsPanning] = useState(false);\r\n  const [lastPanPoint, setLastPanPoint] = useState({ x: 0, y: 0 });\r\n\r\n  const gridWidth = GAME_CONSTANTS.GRID_WIDTH;\r\n  const gridHeight = GAME_CONSTANTS.GRID_HEIGHT;\r\n\r\n  // Floating text for visual feedback\r\n  const { addResourceChange, addFloatingText } = useFloatingTextContext();\r\n\r\n  // Camera controls\r\n  const MIN_ZOOM = 0.5;\r\n  const MAX_ZOOM = 3;\r\n\r\n  const handleZoomIn = () => {\r\n    setZoomLevel(prev => Math.min(MAX_ZOOM, prev + 0.25));\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    setZoomLevel(prev => Math.max(MIN_ZOOM, prev - 0.25));\r\n  };\r\n\r\n  const handleResetCamera = () => {\r\n    setZoomLevel(1);\r\n    setPanOffset({ x: 0, y: 0 });\r\n  };\r\n\r\n  const handleZoomToFit = () => {\r\n    if (!gridRef.current) return;\r\n\r\n    const container = gridRef.current.parentElement;\r\n    if (!container) return;\r\n\r\n    const containerRect = container.getBoundingClientRect();\r\n\r\n    // Calculate optimal zoom to fit the grid within the container\r\n    const cellSize = 48; // w-12 h-12 = 48px\r\n    const gapSize = 2; // gap-0.5 = 2px\r\n    const padding = 16; // p-2 = 8px on each side = 16px total\r\n\r\n    const gridTotalWidth = (gridWidth * cellSize) + ((gridWidth - 1) * gapSize) + padding;\r\n    const gridTotalHeight = (gridHeight * cellSize) + ((gridHeight - 1) * gapSize) + padding;\r\n\r\n    const scaleX = (containerRect.width * 0.9) / gridTotalWidth;\r\n    const scaleY = (containerRect.height * 0.9) / gridTotalHeight;\r\n    const optimalZoom = Math.min(scaleX, scaleY, MAX_ZOOM);\r\n\r\n    setZoomLevel(Math.max(MIN_ZOOM, optimalZoom));\r\n    setPanOffset({ x: 0, y: 0 });\r\n  };\r\n\r\n  // Wheel zoom disabled - use manual zoom controls only\r\n\r\n  const handlePanStart = (e: React.MouseEvent) => {\r\n    if (e.button === 1 || (e.button === 0 && e.ctrlKey)) { // Middle mouse or Ctrl+Left click\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      setIsPanning(true);\r\n      setLastPanPoint({ x: e.clientX, y: e.clientY });\r\n    }\r\n  };\r\n\r\n  const handlePanMove = (e: React.MouseEvent) => {\r\n    if (isPanning) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const deltaX = e.clientX - lastPanPoint.x;\r\n      const deltaY = e.clientY - lastPanPoint.y;\r\n\r\n      setPanOffset(prev => ({\r\n        x: prev.x + deltaX,\r\n        y: prev.y + deltaY\r\n      }));\r\n\r\n      setLastPanPoint({ x: e.clientX, y: e.clientY });\r\n    }\r\n  };\r\n\r\n  const handlePanEnd = () => {\r\n    setIsPanning(false);\r\n  };\r\n\r\n  // Get grid position from mouse coordinates (accounting for zoom and pan)\r\n  const getGridPosition = useCallback((clientX: number, clientY: number): GridPosition | null => {\r\n    if (!gridRef.current) return null;\r\n\r\n    const rect = gridRef.current.getBoundingClientRect();\r\n\r\n    // Account for zoom and pan - transform coordinates back to grid space\r\n    const container = gridRef.current.parentElement;\r\n    if (!container) return null;\r\n\r\n    const containerRect = container.getBoundingClientRect();\r\n    const x = (clientX - containerRect.left - panOffset.x) / zoomLevel;\r\n    const y = (clientY - containerRect.top - panOffset.y) / zoomLevel;\r\n\r\n    // Cell size is fixed at 48px (12 * 4 from w-12 h-12) plus 2px gap\r\n    const cellSize = 48;\r\n    const gapSize = 2;\r\n    const gridPadding = 8; // p-2 = 8px padding\r\n\r\n    const col = Math.floor((x - gridPadding) / (cellSize + gapSize));\r\n    const row = Math.floor((y - gridPadding) / (cellSize + gapSize));\r\n\r\n    if (row >= 0 && row < gridHeight && col >= 0 && col < gridWidth) {\r\n      return { row, col };\r\n    }\r\n\r\n    return null;\r\n  }, [gridWidth, gridHeight, zoomLevel, panOffset]);\r\n\r\n  // Drag and drop handlers\r\n  const handleDragStart = (e: React.DragEvent, type: 'facility' | 'xenomorph', data: any) => {\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    setDraggedItem({ type, data });\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n\r\n    const position = getGridPosition(e.clientX, e.clientY);\r\n    if (position && !isPositionOccupied(position.row, position.col)) {\r\n      setDragPreview(position);\r\n    } else {\r\n      setDragPreview(null);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const position = getGridPosition(e.clientX, e.clientY);\r\n\r\n    if (position && draggedItem && !isPositionOccupied(position.row, position.col)) {\r\n      if (draggedItem.type === 'facility') {\r\n        placeFacility(draggedItem.data, position);\r\n      } else if (draggedItem.type === 'xenomorph') {\r\n        placeXenomorph(draggedItem.data, position);\r\n      }\r\n    }\r\n\r\n    setDraggedItem(null);\r\n    setDragPreview(null);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedItem(null);\r\n    setDragPreview(null);\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const isPositionOccupied = (row: number, col: number) => {\r\n    return facilities.some(f => f.position.row === row && f.position.col === col) ||\r\n           xenomorphs.some(x => x.position.row === row && x.position.col === col);\r\n  };\r\n\r\n  // Grid helper functions\r\n  const showAlignmentLines = (row: number, col: number) => {\r\n    if (!showGridHelpers || (!selectedFacility && !selectedSpecies)) return false;\r\n\r\n    // Show alignment lines when hovering over cells adjacent to existing items\r\n    const adjacentPositions = [\r\n      { row: row - 1, col },\r\n      { row: row + 1, col },\r\n      { row, col: col - 1 },\r\n      { row, col: col + 1 },\r\n    ];\r\n\r\n    return adjacentPositions.some(pos =>\r\n      pos.row >= 0 && pos.row < gridHeight &&\r\n      pos.col >= 0 && pos.col < gridWidth &&\r\n      isPositionOccupied(pos.row, pos.col)\r\n    );\r\n  };\r\n\r\n  const getGridLineClasses = (row: number, col: number) => {\r\n    if (!showGridHelpers || !hoveredCell || (!selectedFacility && !selectedSpecies)) return '';\r\n\r\n    let classes = '';\r\n\r\n    // Show row alignment\r\n    if (hoveredCell.row === row) {\r\n      classes += ' bg-green-400/5 ';\r\n    }\r\n\r\n    // Show column alignment\r\n    if (hoveredCell.col === col) {\r\n      classes += ' bg-green-400/5 ';\r\n    }\r\n\r\n    return classes;\r\n  };\r\n\r\n  const handleCellClick = (row: number, col: number) => {\r\n    const position: GridPosition = { row, col };\r\n\r\n    if (selectedFacility) {\r\n      placeFacility(selectedFacility, position);\r\n\r\n      // Show simple floating text\r\n      addFloatingText(\r\n        `${selectedFacility.name} Built! (-$${selectedFacility.cost})`,\r\n        { x: window.innerWidth / 2, y: 100 },\r\n        'text-green-400',\r\n        1500,\r\n        'sm'\r\n      );\r\n    } else if (selectedSpecies) {\r\n      placeXenomorph(selectedSpecies, position);\r\n\r\n      // Show simple floating text\r\n      addFloatingText(\r\n        `${selectedSpecies.name} Placed!`,\r\n        { x: window.innerWidth / 2, y: 100 },\r\n        'text-red-400',\r\n        1500,\r\n        'sm'\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleRightClick = (e: React.MouseEvent, row: number, col: number) => {\r\n    e.preventDefault();\r\n\r\n    const cellContent = getCellContent(row, col);\r\n    if (cellContent.type === 'empty') {\r\n      setContextMenu({ isOpen: false, position: { x: 0, y: 0 }, target: null });\r\n      return;\r\n    }\r\n\r\n    setContextMenu({\r\n      isOpen: true,\r\n      position: { x: e.clientX, y: e.clientY },\r\n      target: {\r\n        type: cellContent.type as 'facility' | 'xenomorph',\r\n        data: cellContent.content,\r\n      },\r\n    });\r\n  };\r\n\r\n  const getContextMenuItems = () => {\r\n    if (!contextMenu.target) return [];\r\n\r\n    const { type, data } = contextMenu.target;\r\n\r\n    if (type === 'facility') {\r\n      return [\r\n        {\r\n          id: 'inspect',\r\n          label: 'Inspect Facility',\r\n          icon: 'üîç',\r\n          action: () => {\r\n            addStatusMessage(`Inspecting ${data.name}`, 'info');\r\n          },\r\n        },\r\n        {\r\n          id: 'upgrade',\r\n          label: 'Upgrade Facility',\r\n          icon: '‚¨ÜÔ∏è',\r\n          action: () => {\r\n            addStatusMessage(`Upgrade feature coming soon for ${data.name}`, 'info');\r\n          },\r\n          disabled: true,\r\n        },\r\n        {\r\n          id: 'move',\r\n          label: 'Move Facility',\r\n          icon: 'üöö',\r\n          action: () => {\r\n            addStatusMessage(`Drag to move ${data.name}`, 'info');\r\n          },\r\n        },\r\n        {\r\n          id: 'remove',\r\n          label: 'Remove Facility',\r\n          icon: 'üóëÔ∏è',\r\n          action: () => {\r\n            if (confirm(`Remove ${data.name}? You'll get 50% refund.`)) {\r\n              const refund = Math.floor(data.cost * 0.5);\r\n              removeFacility(data.id);\r\n              addStatusMessage(`${data.name} removed`, 'success');\r\n\r\n              // Show floating text for refund\r\n              addFloatingText(\r\n                `${data.name} Removed (+$${refund})`,\r\n                { x: window.innerWidth / 2, y: 100 },\r\n                'text-orange-400',\r\n                1500,\r\n                'sm'\r\n              );\r\n            }\r\n          },\r\n          destructive: true,\r\n        },\r\n      ];\r\n    } else if (type === 'xenomorph') {\r\n      return [\r\n        {\r\n          id: 'inspect',\r\n          label: 'Inspect Xenomorph',\r\n          icon: 'üîç',\r\n          action: () => {\r\n            addStatusMessage(`Inspecting ${data.species.name}`, 'info');\r\n          },\r\n        },\r\n        {\r\n          id: 'move',\r\n          label: 'Move Xenomorph',\r\n          icon: 'üöö',\r\n          action: () => {\r\n            addStatusMessage(`Drag to move ${data.species.name}`, 'info');\r\n          },\r\n        },\r\n        {\r\n          id: 'contain',\r\n          label: 'Increase Containment',\r\n          icon: 'üîí',\r\n          action: () => {\r\n            addStatusMessage(`Containment upgrade coming soon`, 'info');\r\n          },\r\n          disabled: true,\r\n        },\r\n        {\r\n          id: 'remove',\r\n          label: 'Remove Xenomorph',\r\n          icon: 'üóëÔ∏è',\r\n          action: () => {\r\n            if (confirm(`Remove ${data.species.name}?`)) {\r\n              removeXenomorph(data.id);\r\n              addStatusMessage(`${data.species.name} removed`, 'success');\r\n            }\r\n          },\r\n          destructive: true,\r\n        },\r\n      ];\r\n    }\r\n\r\n    return [];\r\n  };\r\n\r\n  const getFacilityTooltipContent = (facility: any) => {\r\n    const stats = [\r\n      { label: 'Cost', value: `$${facility.cost}`, color: 'text-yellow-400' },\r\n      { label: 'Power Required', value: `${facility.powerRequirement}`, color: 'text-blue-400' },\r\n      { label: 'Position', value: `(${facility.position.row}, ${facility.position.col})` },\r\n    ];\r\n\r\n    if (facility.name === 'Power Generator') {\r\n      stats.push({ label: 'Power Generated', value: '+10', color: 'text-green-400' });\r\n    }\r\n\r\n    const actions = [\r\n      { label: 'Right-click for options', shortcut: 'Right Click' },\r\n      { label: 'Drag to move' },\r\n    ];\r\n\r\n    return (\r\n      <TooltipContent\r\n        title={facility.name}\r\n        description={facility.description}\r\n        stats={stats}\r\n        actions={actions}\r\n      />\r\n    );\r\n  };\r\n\r\n  const getXenomorphTooltipContent = (xenomorph: any) => {\r\n    const stats = [\r\n      { label: 'Species', value: xenomorph.species.name, color: 'text-red-400' },\r\n      { label: 'Containment Level', value: `${xenomorph.containmentLevel}/10`, color: 'text-orange-400' },\r\n      { label: 'Difficulty', value: `${xenomorph.species.containmentDifficulty}/10`, color: 'text-red-400' },\r\n      { label: 'Position', value: `(${xenomorph.position.row}, ${xenomorph.position.col})` },\r\n    ];\r\n\r\n    const actions = [\r\n      { label: 'Right-click for options', shortcut: 'Right Click' },\r\n      { label: 'Drag to move' },\r\n    ];\r\n\r\n    return (\r\n      <TooltipContent\r\n        title={`${xenomorph.species.name} Xenomorph`}\r\n        description={xenomorph.species.description}\r\n        stats={stats}\r\n        actions={actions}\r\n      />\r\n    );\r\n  };\r\n\r\n  const getCellContent = (row: number, col: number) => {\r\n    const facility = facilities.find(f => f.position.row === row && f.position.col === col);\r\n    const xenomorph = xenomorphs.find(x => x.position.row === row && x.position.col === col);\r\n    \r\n    if (facility) {\r\n      return { type: 'facility', content: facility };\r\n    }\r\n    if (xenomorph) {\r\n      return { type: 'xenomorph', content: xenomorph };\r\n    }\r\n    return { type: 'empty', content: null };\r\n  };\r\n\r\n  const getFacilityIcon = (facilityName: string) => {\r\n    const icons: Record<string, string> = {\r\n      'Research Lab': 'üî¨',\r\n      'Hatchery': 'ü•ö',\r\n      'Containment Unit': 'üè¢',\r\n      'Visitor Center': 'üèõÔ∏è',\r\n      'Security Station': 'üõ°Ô∏è',\r\n      'Power Generator': '‚ö°',\r\n    };\r\n    return icons[facilityName] || 'üèóÔ∏è';\r\n  };\r\n\r\n  const getSpeciesIcon = (speciesName: string) => {\r\n    const icons: Record<string, string> = {\r\n      'Drone': 'üëæ',\r\n      'Warrior': 'üëπ',\r\n      'Runner': 'üê∫',\r\n      'Praetorian': 'ü¶ñ',\r\n      'Predalien': 'üëë',\r\n      'Queen': 'üë∏',\r\n      'Facehugger': 'üï∑Ô∏è',\r\n      'Chestburster': 'üêõ',\r\n      'Crusher': 'ü¶è',\r\n      'Spitter': 'üêç',\r\n      'Lurker': 'ü¶é',\r\n      'Boiler': 'üí•',\r\n      'Neomorph': 'üß¨',\r\n      'Deacon': 'üë∫',\r\n    };\r\n    return icons[speciesName] || 'üëæ';\r\n  };\r\n\r\n  const renderGrid = () => {\r\n    const cells = [];\r\n\r\n    for (let row = 0; row < gridHeight; row++) {\r\n      for (let col = 0; col < gridWidth; col++) {\r\n        const cellContent = getCellContent(row, col);\r\n        const isOccupied = cellContent.type !== 'empty';\r\n        const isPreview = dragPreview && dragPreview.row === row && dragPreview.col === col;\r\n        const showPlacementPreview = (selectedFacility || selectedSpecies) && !isOccupied;\r\n        const isHovered = hoveredCell && hoveredCell.row === row && hoveredCell.col === col;\r\n        const showAlignment = showAlignmentLines(row, col);\r\n        const gridLineClasses = getGridLineClasses(row, col);\r\n\r\n        cells.push(\r\n          <button\r\n            key={`${row}-${col}`}\r\n            onClick={() => handleCellClick(row, col)}\r\n            onContextMenu={(e) => handleRightClick(e, row, col)}\r\n            onMouseEnter={() => setHoveredCell({ row, col })}\r\n            onMouseLeave={() => setHoveredCell(null)}\r\n            className={`\r\n              w-12 h-12 border border-slate-600 transition-all duration-200 text-base relative\r\n              ${isOccupied\r\n                ? 'bg-slate-700 cursor-default'\r\n                : 'bg-slate-800 hover:bg-slate-700 hover:border-green-400/50'\r\n              }\r\n              ${showPlacementPreview\r\n                ? 'hover:bg-green-400/20 cursor-pointer'\r\n                : ''\r\n              }\r\n              ${isPreview\r\n                ? 'bg-green-400/30 border-green-400 ring-1 ring-green-400/50'\r\n                : ''\r\n              }\r\n              ${isHovered && showPlacementPreview\r\n                ? 'ring-2 ring-green-400/30 border-green-400/70'\r\n                : ''\r\n              }\r\n              ${showAlignment && showPlacementPreview\r\n                ? 'border-blue-400/50'\r\n                : ''\r\n              }\r\n              ${gridLineClasses}\r\n            `}\r\n            disabled={isOccupied && !contextMenu.isOpen}\r\n          >\r\n            {/* Regular content */}\r\n            {cellContent.type === 'facility' && cellContent.content && 'name' in cellContent.content && (\r\n              <Tooltip\r\n                content={getFacilityTooltipContent(cellContent.content)}\r\n                rich={true}\r\n                position=\"auto\"\r\n                delay={300}\r\n              >\r\n                <span\r\n                  draggable={true}\r\n                  onDragStart={(e) => handleDragStart(e, 'facility', cellContent.content)}\r\n                  className=\"cursor-move block\"\r\n                >\r\n                  {getFacilityIcon(cellContent.content.name)}\r\n                </span>\r\n              </Tooltip>\r\n            )}\r\n            {cellContent.type === 'xenomorph' && cellContent.content && 'species' in cellContent.content && (\r\n              <Tooltip\r\n                content={getXenomorphTooltipContent(cellContent.content)}\r\n                rich={true}\r\n                position=\"auto\"\r\n                delay={300}\r\n              >\r\n                <span\r\n                  draggable={true}\r\n                  onDragStart={(e) => handleDragStart(e, 'xenomorph', cellContent.content)}\r\n                  className=\"cursor-move block\"\r\n                >\r\n                  {getSpeciesIcon(cellContent.content.species.name)}\r\n                </span>\r\n              </Tooltip>\r\n            )}\r\n\r\n            {/* Drag preview content */}\r\n            {isPreview && draggedItem && (\r\n              <span className=\"opacity-70 animate-pulse\">\r\n                {draggedItem.type === 'facility'\r\n                  ? getFacilityIcon(draggedItem.data.name)\r\n                  : getSpeciesIcon(draggedItem.data.species?.name || draggedItem.data.name)\r\n                }\r\n              </span>\r\n            )}\r\n\r\n            {/* Grid snap indicators */}\r\n            {showPlacementPreview && !isPreview && (\r\n              <div className=\"absolute inset-0 bg-green-400/10 border border-green-400/30 rounded-sm pointer-events-none\">\r\n                <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-1 h-1 bg-green-400/50 rounded-full\"></div>\r\n              </div>\r\n            )}\r\n          </button>\r\n        );\r\n      }\r\n    }\r\n\r\n    return cells;\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"flex justify-between items-center p-4 border-b border-green-400/20\">\r\n        <h3 className=\"text-green-400 font-bold text-lg glow\">Park Layout</h3>\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Camera Controls */}\r\n          <div className=\"flex items-center gap-1 bg-slate-800/50 rounded px-2 py-1\">\r\n            <button\r\n              onClick={handleZoomOut}\r\n              disabled={zoomLevel <= MIN_ZOOM}\r\n              className=\"text-xs px-2 py-1 rounded transition-colors hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"Zoom Out (Use zoom buttons - scroll wheel disabled)\"\r\n            >\r\n              üîç‚ûñ\r\n            </button>\r\n            <span className=\"text-xs text-slate-400 min-w-[3rem] text-center\">\r\n              {Math.round(zoomLevel * 100)}%\r\n            </span>\r\n            <button\r\n              onClick={handleZoomIn}\r\n              disabled={zoomLevel >= MAX_ZOOM}\r\n              className=\"text-xs px-2 py-1 rounded transition-colors hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"Zoom In (Use zoom buttons - scroll wheel disabled)\"\r\n            >\r\n              üîç‚ûï\r\n            </button>\r\n            <button\r\n              onClick={handleResetCamera}\r\n              className=\"text-xs px-2 py-1 rounded transition-colors hover:bg-slate-700\"\r\n              title=\"Reset Camera (100% zoom, center view)\"\r\n            >\r\n              üéØ\r\n            </button>\r\n            <button\r\n              onClick={handleZoomToFit}\r\n              className=\"text-xs px-2 py-1 rounded transition-colors hover:bg-slate-700\"\r\n              title=\"Fit grid to screen\"\r\n            >\r\n              üìê\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => setShowGridHelpers(!showGridHelpers)}\r\n            className={`text-xs px-2 py-1 rounded transition-colors ${\r\n              showGridHelpers\r\n                ? 'bg-green-400/20 text-green-400 border border-green-400/50'\r\n                : 'bg-slate-700 text-slate-400 border border-slate-600'\r\n            }`}\r\n            title=\"Toggle grid alignment helpers\"\r\n          >\r\n            üìê Grid Helpers\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"flex-1 overflow-hidden bg-slate-800 relative\"\r\n        style={{ cursor: isPanning ? 'grabbing' : 'grab' }}\r\n        onWheel={(e) => {\r\n          // Prevent wheel events from affecting zoom or page scroll\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }}\r\n        onMouseDown={(e) => {\r\n          e.stopPropagation();\r\n          handlePanStart(e);\r\n        }}\r\n        onMouseMove={(e) => {\r\n          e.stopPropagation();\r\n          handlePanMove(e);\r\n        }}\r\n        onMouseUp={(e) => {\r\n          e.stopPropagation();\r\n          handlePanEnd();\r\n        }}\r\n        onMouseLeave={(e) => {\r\n          e.stopPropagation();\r\n          handlePanEnd();\r\n        }}\r\n      >\r\n        <div\r\n          ref={gridRef}\r\n          className={`grid gap-0.5 w-fit bg-slate-700 p-2 rounded transition-transform duration-100 ${\r\n            isDragging ? 'ring-2 ring-green-400/50' : ''\r\n          }`}\r\n          style={{\r\n            gridTemplateColumns: `repeat(${gridWidth}, 1fr)`,\r\n            gridTemplateRows: `repeat(${gridHeight}, 1fr)`,\r\n            transform: `translate(${panOffset.x}px, ${panOffset.y}px) scale(${zoomLevel})`,\r\n            transformOrigin: '0 0',\r\n            margin: 'auto'\r\n          }}\r\n          onDragOver={handleDragOver}\r\n          onDrop={handleDrop}\r\n          onDragEnd={handleDragEnd}\r\n        >\r\n          {renderGrid()}\r\n        </div>\r\n      </div>\r\n      <div className=\"px-4 py-2 border-t border-green-400/20 bg-slate-900/50\">\r\n        {selectedFacility && (\r\n          <p className=\"text-green-400 text-sm\">\r\n            üìç Click on the grid to place: {selectedFacility.name}\r\n          </p>\r\n        )}\r\n        {selectedSpecies && (\r\n          <p className=\"text-green-400 text-sm\">\r\n            üìç Click on the grid to place: {selectedSpecies.name}\r\n          </p>\r\n        )}\r\n        {!selectedFacility && !selectedSpecies && !isDragging && (\r\n          <p className=\"text-slate-400 text-sm\">\r\n            Select a facility or species from the tabs below to place on the grid\r\n          </p>\r\n        )}\r\n        {isDragging && (\r\n          <p className=\"text-blue-400 animate-pulse text-sm\">\r\n            üöÄ Dragging... Drop on a free cell to place\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* Context Menu */}\r\n      <ContextMenu\r\n        isOpen={contextMenu.isOpen}\r\n        position={contextMenu.position}\r\n        items={getContextMenuItems()}\r\n        onClose={() => setContextMenu({ isOpen: false, position: { x: 0, y: 0 }, target: null })}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\GeneticModification.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modifiedSpecies' is assigned a value but never used.","line":103,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":103,"endColumn":25},{"ruleId":"prefer-const","severity":1,"message":"'specialAbilities' is never reassigned. Use 'const' instead.","line":133,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":133,"endColumn":25,"fix":{"range":[4105,4170],"text":"const specialAbilities = [...selectedBaseSpecies.specialAbilities];"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4863,4866],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4863,4866],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { XENOMORPH_SPECIES } from '../../data/gameData';\r\nimport { XenomorphSpecies } from '../../types';\r\nimport { Button } from '../ui/Button';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Tooltip } from '../ui/Tooltip';\r\n\r\ninterface GeneticTrait {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  type: 'physical' | 'behavioral' | 'special';\r\n  cost: number;\r\n  effect: {\r\n    dangerLevel?: number;\r\n    containmentDifficulty?: number;\r\n    foodRequirement?: number;\r\n    specialAbilities?: string[];\r\n  };\r\n}\r\n\r\nconst GENETIC_TRAITS: GeneticTrait[] = [\r\n  {\r\n    id: 'enhanced_carapace',\r\n    name: 'Enhanced Carapace',\r\n    description: 'Reinforced exoskeleton increases durability but makes containment harder',\r\n    type: 'physical',\r\n    cost: 500,\r\n    effect: {\r\n      dangerLevel: 1,\r\n      containmentDifficulty: 2,\r\n      specialAbilities: ['Armor Plating']\r\n    }\r\n  },\r\n  {\r\n    id: 'improved_agility',\r\n    name: 'Improved Agility',\r\n    description: 'Enhanced muscle fibers increase speed and escape potential',\r\n    type: 'physical',\r\n    cost: 300,\r\n    effect: {\r\n      dangerLevel: 1,\r\n      containmentDifficulty: 1,\r\n      specialAbilities: ['Rapid Movement']\r\n    }\r\n  },\r\n  {\r\n    id: 'acid_resistance',\r\n    name: 'Acid Resistance',\r\n    description: 'Modified cellular structure provides resistance to acidic environments',\r\n    type: 'special',\r\n    cost: 400,\r\n    effect: {\r\n      specialAbilities: ['Acid Immunity']\r\n    }\r\n  },\r\n  {\r\n    id: 'pheromone_control',\r\n    name: 'Pheromone Control',\r\n    description: 'Enhanced communication abilities for pack coordination',\r\n    type: 'behavioral',\r\n    cost: 600,\r\n    effect: {\r\n      dangerLevel: 2,\r\n      specialAbilities: ['Pack Leader', 'Coordinated Attacks']\r\n    }\r\n  },\r\n  {\r\n    id: 'stealth_adaptation',\r\n    name: 'Stealth Adaptation',\r\n    description: 'Adaptive camouflage makes detection extremely difficult',\r\n    type: 'special',\r\n    cost: 800,\r\n    effect: {\r\n      dangerLevel: 2,\r\n      containmentDifficulty: 3,\r\n      specialAbilities: ['Camouflage', 'Silent Movement']\r\n    }\r\n  },\r\n  {\r\n    id: 'regeneration',\r\n    name: 'Rapid Regeneration',\r\n    description: 'Enhanced healing factor but requires more food',\r\n    type: 'physical',\r\n    cost: 700,\r\n    effect: {\r\n      foodRequirement: 1,\r\n      specialAbilities: ['Self-Healing']\r\n    }\r\n  }\r\n];\r\n\r\ninterface GeneticModificationProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function GeneticModification({ isOpen, onClose }: GeneticModificationProps) {\r\n  const { resources, research, addStatusMessage, updateResources } = useGameStore();\r\n  const [selectedBaseSpecies, setSelectedBaseSpecies] = useState<XenomorphSpecies | null>(null);\r\n  const [selectedTraits, setSelectedTraits] = useState<GeneticTrait[]>([]);\r\n  const [modifiedSpecies, setModifiedSpecies] = useState<XenomorphSpecies | null>(null);\r\n  const [customName, setCustomName] = useState('');\r\n\r\n  const availableSpecies = XENOMORPH_SPECIES.filter(species =>\r\n    research.completed.includes(species.name)\r\n  );\r\n\r\n  const totalCost = selectedTraits.reduce((sum, trait) => sum + trait.cost, 0);\r\n  const baseResearchCost = selectedBaseSpecies?.researchCost || 0;\r\n  const totalResearchCost = baseResearchCost + Math.floor(totalCost / 10);\r\n\r\n  const canAfford = resources.credits >= totalCost && resources.research >= totalResearchCost;\r\n\r\n  const handleTraitToggle = (trait: GeneticTrait) => {\r\n    setSelectedTraits(prev => {\r\n      const isSelected = prev.find(t => t.id === trait.id);\r\n      if (isSelected) {\r\n        return prev.filter(t => t.id !== trait.id);\r\n      } else {\r\n        return [...prev, trait];\r\n      }\r\n    });\r\n  };\r\n\r\n  const calculateModifiedSpecies = (): XenomorphSpecies | null => {\r\n    if (!selectedBaseSpecies) return null;\r\n\r\n    let dangerLevel = selectedBaseSpecies.dangerLevel;\r\n    let containmentDifficulty = selectedBaseSpecies.containmentDifficulty;\r\n    let foodRequirement = selectedBaseSpecies.foodRequirement;\r\n    let specialAbilities = [...selectedBaseSpecies.specialAbilities];\r\n\r\n    // Apply trait effects\r\n    selectedTraits.forEach(trait => {\r\n      if (trait.effect.dangerLevel) {\r\n        dangerLevel = Math.min(10, dangerLevel + trait.effect.dangerLevel);\r\n      }\r\n      if (trait.effect.containmentDifficulty) {\r\n        containmentDifficulty = Math.min(10, containmentDifficulty + trait.effect.containmentDifficulty);\r\n      }\r\n      if (trait.effect.foodRequirement) {\r\n        const foodLevels = ['Low', 'Medium', 'High', 'Very High'];\r\n        const currentIndex = foodLevels.indexOf(foodRequirement);\r\n        const newIndex = Math.min(foodLevels.length - 1, currentIndex + trait.effect.foodRequirement);\r\n        foodRequirement = foodLevels[newIndex] as any;\r\n      }\r\n      if (trait.effect.specialAbilities) {\r\n        specialAbilities.push(...trait.effect.specialAbilities);\r\n      }\r\n    });\r\n\r\n    return {\r\n      name: customName || `Modified ${selectedBaseSpecies.name}`,\r\n      description: `Genetically modified ${selectedBaseSpecies.name} with enhanced capabilities`,\r\n      dangerLevel,\r\n      containmentDifficulty,\r\n      researchCost: totalResearchCost,\r\n      foodRequirement,\r\n      specialAbilities: [...new Set(specialAbilities)] // Remove duplicates\r\n    };\r\n  };\r\n\r\n  const handleCreateSpecies = () => {\r\n    if (!selectedBaseSpecies || selectedTraits.length === 0 || !canAfford) return;\r\n\r\n    const newSpecies = calculateModifiedSpecies();\r\n    if (!newSpecies) return;\r\n\r\n    // Deduct costs\r\n    updateResources({\r\n      credits: resources.credits - totalCost,\r\n      research: resources.research - totalResearchCost\r\n    });\r\n\r\n    // Add to completed research\r\n    research.completed.push(newSpecies.name);\r\n\r\n    addStatusMessage(`Successfully created ${newSpecies.name}!`, 'success');\r\n\r\n    // Reset form\r\n    setSelectedBaseSpecies(null);\r\n    setSelectedTraits([]);\r\n    setCustomName('');\r\n    setModifiedSpecies(null);\r\n\r\n    onClose();\r\n  };\r\n\r\n  const getTraitTypeColor = (type: GeneticTrait['type']) => {\r\n    switch (type) {\r\n      case 'physical': return 'text-blue-400';\r\n      case 'behavioral': return 'text-purple-400';\r\n      case 'special': return 'text-yellow-400';\r\n      default: return 'text-gray-400';\r\n    }\r\n  };\r\n\r\n  const getTraitTypeIcon = (type: GeneticTrait['type']) => {\r\n    switch (type) {\r\n      case 'physical': return 'üí™';\r\n      case 'behavioral': return 'üß†';\r\n      case 'special': return '‚ú®';\r\n      default: return 'üî¨';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Genetic Modification Laboratory\">\r\n      <div className=\"space-y-6 max-h-96 overflow-y-auto\">\r\n        {/* Base Species Selection */}\r\n        <div>\r\n          <h4 className=\"text-green-400 font-semibold mb-3\">Select Base Species</h4>\r\n          <div className=\"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto\">\r\n            {availableSpecies.map(species => (\r\n              <button\r\n                key={species.name}\r\n                onClick={() => setSelectedBaseSpecies(species)}\r\n                className={`p-3 rounded border text-left transition-colors ${\r\n                  selectedBaseSpecies?.name === species.name\r\n                    ? 'border-green-400 bg-green-400/20'\r\n                    : 'border-slate-600 hover:border-slate-500 bg-slate-800/50'\r\n                }`}\r\n              >\r\n                <div className=\"font-semibold text-green-400\">{species.name}</div>\r\n                <div className=\"text-sm text-slate-400\">\r\n                  Danger: {species.dangerLevel} | Containment: {species.containmentDifficulty}\r\n                </div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Genetic Traits */}\r\n        {selectedBaseSpecies && (\r\n          <div>\r\n            <h4 className=\"text-green-400 font-semibold mb-3\">Available Genetic Modifications</h4>\r\n            <div className=\"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto\">\r\n              {GENETIC_TRAITS.map(trait => {\r\n                const isSelected = selectedTraits.find(t => t.id === trait.id);\r\n                const canAffordTrait = resources.credits >= trait.cost;\r\n\r\n                return (\r\n                  <Tooltip\r\n                    key={trait.id}\r\n                    content={\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"font-semibold\">{trait.name}</div>\r\n                        <div className=\"text-sm\">{trait.description}</div>\r\n                        <div className=\"text-xs border-t border-slate-600 pt-2\">\r\n                          <div>Cost: {trait.cost} üí∞ + {Math.floor(trait.cost / 10)} üî¨</div>\r\n                          <div className={getTraitTypeColor(trait.type)}>\r\n                            Type: {getTraitTypeIcon(trait.type)} {trait.type}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    }\r\n                    rich={true}\r\n                  >\r\n                    <button\r\n                      onClick={() => handleTraitToggle(trait)}\r\n                      disabled={!canAffordTrait}\r\n                      className={`w-full p-2 rounded border text-left transition-colors ${\r\n                        isSelected\r\n                          ? 'border-green-400 bg-green-400/20'\r\n                          : canAffordTrait\r\n                          ? 'border-slate-600 hover:border-slate-500 bg-slate-800/50'\r\n                          : 'border-slate-700 bg-slate-900/50 opacity-50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                          <div className=\"font-semibold text-sm\">\r\n                            {getTraitTypeIcon(trait.type)} {trait.name}\r\n                          </div>\r\n                          <div className={`text-xs ${getTraitTypeColor(trait.type)}`}>\r\n                            {trait.type}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"text-xs text-yellow-400\">\r\n                          {trait.cost} üí∞\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n                  </Tooltip>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Custom Name Input */}\r\n        {selectedBaseSpecies && selectedTraits.length > 0 && (\r\n          <div>\r\n            <h4 className=\"text-green-400 font-semibold mb-3\">Custom Species Name</h4>\r\n            <input\r\n              type=\"text\"\r\n              value={customName}\r\n              onChange={(e) => setCustomName(e.target.value)}\r\n              placeholder={`Modified ${selectedBaseSpecies.name}`}\r\n              className=\"w-full p-2 bg-slate-800 border border-slate-600 rounded text-white placeholder-slate-400\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Preview */}\r\n        {selectedBaseSpecies && selectedTraits.length > 0 && (\r\n          <div>\r\n            <h4 className=\"text-green-400 font-semibold mb-3\">Species Preview</h4>\r\n            {(() => {\r\n              const preview = calculateModifiedSpecies();\r\n              return preview ? (\r\n                <div className=\"bg-slate-800/50 p-3 rounded border border-slate-600\">\r\n                  <div className=\"font-semibold text-green-400\">{preview.name}</div>\r\n                  <div className=\"text-sm text-slate-300 mt-1\">{preview.description}</div>\r\n                  <div className=\"grid grid-cols-2 gap-2 mt-2 text-xs\">\r\n                    <div>Danger Level: <span className=\"text-red-400\">{preview.dangerLevel}</span></div>\r\n                    <div>Containment: <span className=\"text-orange-400\">{preview.containmentDifficulty}</span></div>\r\n                    <div>Food: <span className=\"text-blue-400\">{preview.foodRequirement}</span></div>\r\n                    <div>Research Cost: <span className=\"text-yellow-400\">{preview.researchCost}</span></div>\r\n                  </div>\r\n                  <div className=\"mt-2\">\r\n                    <div className=\"text-xs text-slate-400 mb-1\">Abilities:</div>\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {preview.specialAbilities.map((ability, index) => (\r\n                        <span key={index} className=\"px-2 py-1 bg-slate-700 rounded text-xs text-green-300\">\r\n                          {ability}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : null;\r\n            })()}\r\n          </div>\r\n        )}\r\n\r\n        {/* Cost Summary */}\r\n        {selectedTraits.length > 0 && (\r\n          <div className=\"bg-slate-800/30 p-3 rounded border border-slate-600\">\r\n            <h4 className=\"text-green-400 font-semibold mb-2\">Total Cost</h4>\r\n            <div className=\"text-sm space-y-1\">\r\n              <div className=\"flex justify-between\">\r\n                <span>Credits:</span>\r\n                <span className={resources.credits >= totalCost ? 'text-green-400' : 'text-red-400'}>\r\n                  {totalCost} üí∞\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <span>Research:</span>\r\n                <span className={resources.research >= totalResearchCost ? 'text-green-400' : 'text-red-400'}>\r\n                  {totalResearchCost} üî¨\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={handleCreateSpecies}\r\n            disabled={!selectedBaseSpecies || selectedTraits.length === 0 || !canAfford}\r\n            className=\"flex-1\"\r\n          >\r\n            üß¨ Create Modified Species\r\n          </Button>\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Cancel\r\n          </Button>\r\n        </div>\r\n\r\n        {!canAfford && selectedTraits.length > 0 && (\r\n          <div className=\"text-red-400 text-sm text-center\">\r\n            Insufficient resources for genetic modification\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\GroupedFacilityPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\GroupedSpeciesPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\HistoricalScenarios.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":58,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":58,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setCompletedScenarios' is assigned a value but never used.","line":473,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":473,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\n\r\nexport interface HistoricalScenario {\r\n  id: string;\r\n  name: string;\r\n  subtitle: string;\r\n  description: string;\r\n  year: string;\r\n  location: string;\r\n  difficulty: 'Story' | 'Challenging' | 'Nightmare';\r\n  duration: string; // Estimated playtime\r\n  objectives: HistoricalObjective[];\r\n  initialSetup: {\r\n    mode: 'building' | 'horror';\r\n    resources: {\r\n      credits: number;\r\n      power: number;\r\n      research: number;\r\n      visitors: number;\r\n    };\r\n    predefinedFacilities?: Array<{\r\n      name: string;\r\n      position: { row: number; col: number };\r\n    }>;\r\n    predefinedXenomorphs?: Array<{\r\n      species: string;\r\n      position: { row: number; col: number };\r\n    }>;\r\n  };\r\n  storyElements: {\r\n    briefing: string;\r\n    midGameEvent?: string;\r\n    conclusion: string;\r\n  };\r\n  historicalAccuracy: string;\r\n  rewards: {\r\n    credits?: number;\r\n    research?: number;\r\n    unlockedContent?: string[];\r\n    achievements?: string[];\r\n  };\r\n}\r\n\r\nexport interface HistoricalObjective {\r\n  id: string;\r\n  description: string;\r\n  type: 'survival' | 'discovery' | 'containment' | 'evacuation' | 'investigation';\r\n  target?: number | string;\r\n  timeLimit?: number; // in game hours\r\n  completed: boolean;\r\n  required: boolean;\r\n  storyContext: string;\r\n}\r\n\r\nexport const HISTORICAL_SCENARIOS: HistoricalScenario[] = [\r\n  {\r\n    id: 'nostromo_encounter',\r\n    name: 'The Nostromo Incident',\r\n    subtitle: 'First Contact',\r\n    description: 'Experience the horror that started it all. The commercial towing vessel Nostromo has encountered something unprecedented.',\r\n    year: '2122',\r\n    location: 'USCSS Nostromo, Deep Space',\r\n    difficulty: 'Story',\r\n    duration: '45-60 minutes',\r\n    objectives: [\r\n      {\r\n        id: 'investigate_signal',\r\n        description: 'Investigate the mysterious signal on LV-426',\r\n        type: 'investigation',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Company Special Order 937 requires investigation of any signal of intelligent origin'\r\n      },\r\n      {\r\n        id: 'first_contact',\r\n        description: 'Discover the alien lifeform',\r\n        type: 'discovery',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The derelict ship contains something beyond human understanding'\r\n      },\r\n      {\r\n        id: 'contain_specimen',\r\n        description: 'Attempt to contain the organism',\r\n        type: 'containment',\r\n        completed: false,\r\n        required: false,\r\n        storyContext: 'Science Officer Ash has strict orders regarding the creature'\r\n      },\r\n      {\r\n        id: 'survive_hunt',\r\n        description: 'Survive the creature\\'s hunt',\r\n        type: 'survival',\r\n        target: 3,\r\n        timeLimit: 72,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The perfect organism adapts and hunts with lethal efficiency'\r\n      },\r\n      {\r\n        id: 'escape_nostromo',\r\n        description: 'Reach the escape shuttle',\r\n        type: 'evacuation',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The Nostromo\\'s self-destruct has been activated'\r\n      }\r\n    ],\r\n    initialSetup: {\r\n      mode: 'horror',\r\n      resources: { credits: 0, power: 5, research: 0, visitors: 0 },\r\n      predefinedFacilities: [\r\n        { name: 'Life Support Core', position: { row: 5, col: 5 } },\r\n        { name: 'Emergency Systems', position: { row: 5, col: 7 } }\r\n      ],\r\n      predefinedXenomorphs: [\r\n        { species: 'Drone', position: { row: 8, col: 6 } }\r\n      ]\r\n    },\r\n    storyElements: {\r\n      briefing: 'The USCSS Nostromo, a commercial towing vessel, has been awakened from hypersleep by MOTHER to investigate a signal of unknown origin. What the crew discovers will change humanity\\'s understanding of life in the universe forever.',\r\n      midGameEvent: 'The facehugger has successfully implanted its embryo. The chestburster has emerged and grown into a fully mature xenomorph. It now hunts the remaining crew through the ship\\'s corridors.',\r\n      conclusion: 'One way or another, this nightmare ends here. The Nostromo\\'s fate is sealed, but perhaps someone will survive to warn others of the terror that lurks in the darkness between the stars.'\r\n    },\r\n    historicalAccuracy: 'Recreates the events of the 1979 film \"Alien\" directed by Ridley Scott, following the crew\\'s first encounter with the xenomorph species.',\r\n    rewards: {\r\n      research: 500,\r\n      unlockedContent: ['Nostromo Archive Data', 'Early Xenomorph Research'],\r\n      achievements: ['First Contact', 'Sole Survivor']\r\n    }\r\n  },\r\n\r\n  {\r\n    id: 'hadleys_hope_colony',\r\n    name: 'The Fall of Hadley\\'s Hope',\r\n    subtitle: 'Colony Lost',\r\n    description: 'Manage the terraforming colony of Hadley\\'s Hope as it faces an overwhelming xenomorph infestation.',\r\n    year: '2179',\r\n    location: 'Hadley\\'s Hope, LV-426 (Acheron)',\r\n    difficulty: 'Challenging',\r\n    duration: '90-120 minutes',\r\n    objectives: [\r\n      {\r\n        id: 'establish_colony',\r\n        description: 'Build a functioning terraforming colony',\r\n        type: 'containment',\r\n        target: 15,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Hadley\\'s Hope was humanity\\'s first successful terraforming operation'\r\n      },\r\n      {\r\n        id: 'discover_derelict',\r\n        description: 'Investigate the alien derelict ship',\r\n        type: 'investigation',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The Jorden family has discovered something in the restricted zone'\r\n      },\r\n      {\r\n        id: 'first_infestation',\r\n        description: 'Contain the initial xenomorph outbreak',\r\n        type: 'containment',\r\n        target: 5,\r\n        timeLimit: 48,\r\n        completed: false,\r\n        required: false,\r\n        storyContext: 'The facehugger attack on the Jorden family was just the beginning'\r\n      },\r\n      {\r\n        id: 'colony_defense',\r\n        description: 'Defend the colony from the hive',\r\n        type: 'survival',\r\n        target: 10,\r\n        timeLimit: 120,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The xenomorphs have built a massive hive beneath the atmospheric processor'\r\n      },\r\n      {\r\n        id: 'final_evacuation',\r\n        description: 'Evacuate all survivors',\r\n        type: 'evacuation',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The atmospheric processor is going critical - nuclear explosion imminent'\r\n      }\r\n    ],\r\n    initialSetup: {\r\n      mode: 'building',\r\n      resources: { credits: 50000, power: 100, research: 1000, visitors: 158 },\r\n      predefinedFacilities: [\r\n        { name: 'Atmospheric Processor', position: { row: 10, col: 10 } },\r\n        { name: 'Visitor Center', position: { row: 5, col: 5 } },\r\n        { name: 'Medical Bay', position: { row: 5, col: 7 } },\r\n        { name: 'Communications Array', position: { row: 3, col: 5 } }\r\n      ]\r\n    },\r\n    storyElements: {\r\n      briefing: 'Hadley\\'s Hope represents humanity\\'s triumph over hostile worlds. The terraforming operation has been successful for decades, supporting 158 colonists. But when contact is lost, something terrible has awakened.',\r\n      midGameEvent: 'The infestation has spread throughout the colony. The atmospheric processor has been compromised, and its nuclear core is becoming unstable. You have limited time before a catastrophic explosion.',\r\n      conclusion: 'Hadley\\'s Hope is lost, but the data gathered here will be crucial for humanity\\'s survival. The xenomorph threat is now fully understood - and it is far worse than anyone imagined.'\r\n    },\r\n    historicalAccuracy: 'Based on the events of \"Aliens\" (1986), depicting the fall of the LV-426 colony and the discovery of the xenomorph hive.',\r\n    rewards: {\r\n      credits: 25000,\r\n      research: 2000,\r\n      unlockedContent: ['Colonial Marine Arsenal', 'Atmospheric Processor Technology', 'Hive Architecture Data'],\r\n      achievements: ['Colony Administrator', 'Xenomorph Researcher', 'Nuclear Survivor']\r\n    }\r\n  },\r\n\r\n  {\r\n    id: 'fiorina_prison',\r\n    name: 'Fiorina 161 Outbreak',\r\n    subtitle: 'No Weapons, No Technology, No Hope',\r\n    description: 'Survive an infestation on a maximum-security prison planet with minimal resources and no weapons.',\r\n    year: '2179',\r\n    location: 'Fiorina 161 Correctional Facility',\r\n    difficulty: 'Nightmare',\r\n    duration: '60-90 minutes',\r\n    objectives: [\r\n      {\r\n        id: 'crash_survival',\r\n        description: 'Survive the emergency landing',\r\n        type: 'survival',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The EEV escape pod has crash-landed on the prison planet'\r\n      },\r\n      {\r\n        id: 'locate_survivors',\r\n        description: 'Find other crash survivors',\r\n        type: 'investigation',\r\n        target: 2,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Multiple stasis tubes were aboard the escape pod'\r\n      },\r\n      {\r\n        id: 'contain_infection',\r\n        description: 'Prevent the facehugger from spreading',\r\n        type: 'containment',\r\n        timeLimit: 24,\r\n        completed: false,\r\n        required: false,\r\n        storyContext: 'A facehugger was aboard the escape pod - someone has been infected'\r\n      },\r\n      {\r\n        id: 'improvised_weapons',\r\n        description: 'Create makeshift weapons and traps',\r\n        type: 'survival',\r\n        target: 5,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The prison has no weapons - everything must be improvised from industrial equipment'\r\n      },\r\n      {\r\n        id: 'alien_hunt',\r\n        description: 'Hunt the xenomorph through the facility',\r\n        type: 'survival',\r\n        target: 1,\r\n        timeLimit: 72,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The dragon-born xenomorph is hunting through the prison\\'s industrial maze'\r\n      },\r\n      {\r\n        id: 'ultimate_sacrifice',\r\n        description: 'Stop the Company from acquiring the specimen',\r\n        type: 'survival',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Weyland-Yutani will stop at nothing to obtain a live xenomorph'\r\n      }\r\n    ],\r\n    initialSetup: {\r\n      mode: 'horror',\r\n      resources: { credits: 0, power: 3, research: 0, visitors: 0 },\r\n      predefinedFacilities: [\r\n        { name: 'Medical Bay', position: { row: 4, col: 4 } },\r\n        { name: 'Life Support Core', position: { row: 6, col: 6 } }\r\n      ],\r\n      predefinedXenomorphs: [\r\n        { species: 'Runner', position: { row: 10, col: 8 } }\r\n      ]\r\n    },\r\n    storyElements: {\r\n      briefing: 'Fiorina 161 is a maximum-security prison for the worst criminals in known space. The facility has no weapons, no technology, and no escape. When death arrives from the stars, there is nowhere to run.',\r\n      midGameEvent: 'The alien has claimed multiple victims and grown to full size. The inmates must work together with their former enemies to survive. Industrial equipment becomes weapons, and the foundry becomes a battlefield.',\r\n      conclusion: 'Some sacrifices transcend personal survival. The xenomorph threat ends here, but the cost is everything. The Company\\'s plans are thwarted, but at the ultimate price.'\r\n    },\r\n    historicalAccuracy: 'Recreates the events of \"Alien¬≥\" (1992), focusing on survival horror in a resource-scarce environment.',\r\n    rewards: {\r\n      research: 1500,\r\n      unlockedContent: ['Prison Industrial Equipment', 'Improvised Weapons Data', 'Runner Xenomorph Analysis'],\r\n      achievements: ['Prison Survivor', 'Improvised Arsenal', 'Ultimate Sacrifice']\r\n    }\r\n  },\r\n\r\n  {\r\n    id: 'usm_auriga',\r\n    name: 'The Auriga Incident',\r\n    subtitle: 'Resurrection',\r\n    description: 'Experience the horror of military xenomorph breeding experiments aboard a deep space research vessel.',\r\n    year: '2381',\r\n    location: 'USM Auriga, Deep Space',\r\n    difficulty: 'Challenging',\r\n    duration: '75-90 minutes',\r\n    objectives: [\r\n      {\r\n        id: 'establish_research',\r\n        description: 'Set up military xenomorph research program',\r\n        type: 'containment',\r\n        target: 8,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The United Systems Military is conducting classified xenomorph research'\r\n      },\r\n      {\r\n        id: 'clone_experiments',\r\n        description: 'Conduct genetic cloning experiments',\r\n        type: 'discovery',\r\n        target: 5,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Ripley\\'s DNA contains the key to controlling the xenomorph species'\r\n      },\r\n      {\r\n        id: 'hybrid_creation',\r\n        description: 'Witness the creation of the hybrid',\r\n        type: 'discovery',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The queen has given birth to something unprecedented'\r\n      },\r\n      {\r\n        id: 'containment_failure',\r\n        description: 'Survive the massive containment breach',\r\n        type: 'survival',\r\n        target: 15,\r\n        timeLimit: 48,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The xenomorphs have learned to use acid to escape their cells'\r\n      },\r\n      {\r\n        id: 'ship_crash',\r\n        description: 'Reach the escape pods before Earth impact',\r\n        type: 'evacuation',\r\n        timeLimit: 24,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The Auriga is on a collision course with Earth'\r\n      }\r\n    ],\r\n    initialSetup: {\r\n      mode: 'building',\r\n      resources: { credits: 75000, power: 120, research: 5000, visitors: 0 },\r\n      predefinedFacilities: [\r\n        { name: 'Corporate Laboratory', position: { row: 6, col: 6 } },\r\n        { name: 'Genetic Sequencer', position: { row: 6, col: 8 } },\r\n        { name: 'Containment Unit', position: { row: 8, col: 6 } },\r\n        { name: 'Medical Bay', position: { row: 4, col: 6 } }\r\n      ],\r\n      predefinedXenomorphs: [\r\n        { species: 'Queen', position: { row: 8, col: 8 } },\r\n        { species: 'Warrior', position: { row: 9, col: 7 } },\r\n        { species: 'Warrior', position: { row: 7, col: 9 } }\r\n      ]\r\n    },\r\n    storyElements: {\r\n      briefing: 'Two hundred years after Ripley\\'s sacrifice, humanity has not learned its lesson. The United Systems Military believes they can control and weaponize the perfect organism. They are wrong.',\r\n      midGameEvent: 'The xenomorphs have demonstrated intelligence far beyond previous observations. They used their acid blood to burn through containment, and the queen has given birth to a human-xenomorph hybrid.',\r\n      conclusion: 'The Auriga experiment ends in catastrophe, but valuable data has been obtained. The hybrid represents a new evolutionary path - one that threatens everything we understand about the species.'\r\n    },\r\n    historicalAccuracy: 'Based on \"Alien: Resurrection\" (1997), exploring themes of genetic manipulation and military xenomorph research.',\r\n    rewards: {\r\n      credits: 50000,\r\n      research: 7500,\r\n      unlockedContent: ['Military Research Protocols', 'Cloning Technology', 'Hybrid Xenomorph Data'],\r\n      achievements: ['Military Researcher', 'Genetic Engineer', 'Earth Defender']\r\n    }\r\n  },\r\n\r\n  {\r\n    id: 'weyland_origins',\r\n    name: 'Prometheus Expedition',\r\n    subtitle: 'Engineers',\r\n    description: 'Discover the origins of humanity and encounter the creators of the xenomorph species.',\r\n    year: '2093',\r\n    location: 'LV-223, Zeta Reticuli System',\r\n    difficulty: 'Story',\r\n    duration: '60-75 minutes',\r\n    objectives: [\r\n      {\r\n        id: 'archaeological_discovery',\r\n        description: 'Analyze ancient cave paintings and star maps',\r\n        type: 'investigation',\r\n        target: 5,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'Ancient civilizations left messages pointing to LV-223'\r\n      },\r\n      {\r\n        id: 'engineer_facility',\r\n        description: 'Explore the Engineer installation',\r\n        type: 'investigation',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The Engineers left behind advanced technology and biological weapons'\r\n      },\r\n      {\r\n        id: 'black_goo_analysis',\r\n        description: 'Study the mysterious black substance',\r\n        type: 'discovery',\r\n        target: 3,\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The Engineers created a bioweapon of unimaginable potential'\r\n      },\r\n      {\r\n        id: 'meet_engineer',\r\n        description: 'Make contact with the last Engineer',\r\n        type: 'discovery',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'One Engineer remains in stasis, waiting for over 2000 years'\r\n      },\r\n      {\r\n        id: 'escape_deacon',\r\n        description: 'Survive the emergence of the Deacon',\r\n        type: 'survival',\r\n        completed: false,\r\n        required: true,\r\n        storyContext: 'The trilobite creature has infected the Engineer'\r\n      }\r\n    ],\r\n    initialSetup: {\r\n      mode: 'building',\r\n      resources: { credits: 100000, power: 150, research: 10000, visitors: 0 },\r\n      predefinedFacilities: [\r\n        { name: 'Research Lab', position: { row: 5, col: 5 } },\r\n        { name: 'Medical Bay', position: { row: 5, col: 7 } },\r\n        { name: 'Communications Array', position: { row: 3, col: 6 } }\r\n      ]\r\n    },\r\n    storyElements: {\r\n      briefing: 'The Prometheus expedition represents humanity\\'s first journey to meet our creators. Armed with ancient star maps and cutting-edge technology, we seek answers to the ultimate questions: Who are we? Where do we come from?',\r\n      midGameEvent: 'The Engineers are not the benevolent creators we hoped to find. They planned to destroy humanity with a biological weapon so terrible it defies comprehension. The black goo creates horrors beyond imagination.',\r\n      conclusion: 'We came seeking gods and found devils. The Engineers created us, but they also created our destruction. The xenomorph is not just an alien species - it is a weapon designed to erase all life.'\r\n    },\r\n    historicalAccuracy: 'Prequel events from \"Prometheus\" (2012), exploring the origins of humanity and the xenomorph species.',\r\n    rewards: {\r\n      credits: 100000,\r\n      research: 15000,\r\n      unlockedContent: ['Engineer Technology', 'Black Goo Research', 'Ancient Star Maps', 'Proto-Xenomorph Data'],\r\n      achievements: ['Archaeological Discovery', 'First Contact with Engineers', 'Origin Seeker']\r\n    }\r\n  }\r\n];\r\n\r\ninterface HistoricalScenariosProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function HistoricalScenarios({ isOpen, onClose }: HistoricalScenariosProps) {\r\n  const [selectedScenario, setSelectedScenario] = useState<HistoricalScenario | null>(null);\r\n  const [completedScenarios, setCompletedScenarios] = useState<string[]>(() => {\r\n    const saved = localStorage.getItem('xenomorph-park-historical-progress');\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n\r\n  const getDifficultyColor = (difficulty: HistoricalScenario['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'Story': return 'text-blue-400';\r\n      case 'Challenging': return 'text-yellow-400';\r\n      case 'Nightmare': return 'text-red-400';\r\n      default: return 'text-slate-400';\r\n    }\r\n  };\r\n\r\n  const getDifficultyIcon = (difficulty: HistoricalScenario['difficulty']) => {\r\n    switch (difficulty) {\r\n      case 'Story': return 'üìñ';\r\n      case 'Challenging': return '‚öîÔ∏è';\r\n      case 'Nightmare': return 'üíÄ';\r\n      default: return '‚ùì';\r\n    }\r\n  };\r\n\r\n  const startScenario = (scenario: HistoricalScenario) => {\r\n    // Initialize game state with scenario parameters\r\n    const { reset, updateResources, setMode } = useGameStore.getState();\r\n\r\n    // Reset the game\r\n    reset();\r\n\r\n    // Apply scenario starting resources and mode\r\n    updateResources(scenario.initialSetup.resources);\r\n    setMode(scenario.initialSetup.mode);\r\n\r\n    // Store current scenario in localStorage for objective tracking\r\n    localStorage.setItem('current-historical-scenario', JSON.stringify(scenario));\r\n\r\n    onClose();\r\n  };\r\n\r\n  const ScenarioCard = ({ scenario }: { scenario: HistoricalScenario }) => {\r\n    const isCompleted = completedScenarios.includes(scenario.id);\r\n\r\n    return (\r\n      <div\r\n        className={`\r\n          p-4 rounded-lg border-2 cursor-pointer transition-all duration-200\r\n          ${isCompleted\r\n            ? 'border-green-500 bg-green-500/10 hover:bg-green-500/20'\r\n            : 'border-slate-600 bg-slate-800/50 hover:bg-slate-700/50 hover:border-green-400'\r\n          }\r\n          ${selectedScenario?.id === scenario.id ? 'ring-2 ring-green-400' : ''}\r\n        `}\r\n        onClick={() => setSelectedScenario(scenario)}\r\n      >\r\n        <div className=\"flex justify-between items-start mb-2\">\r\n          <div>\r\n            <h3 className={`font-semibold text-lg ${isCompleted ? 'text-green-400' : 'text-slate-200'}`}>\r\n              {scenario.name}\r\n              {isCompleted && ' ‚úÖ'}\r\n            </h3>\r\n            <div className=\"text-sm text-slate-400\">{scenario.subtitle}</div>\r\n            <div className=\"flex items-center gap-4 text-sm mt-1\">\r\n              <span className={getDifficultyColor(scenario.difficulty)}>\r\n                {getDifficultyIcon(scenario.difficulty)} {scenario.difficulty}\r\n              </span>\r\n              <span className=\"text-slate-500\">üïê {scenario.duration}</span>\r\n              <span className=\"text-blue-400\">üìÖ {scenario.year}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"text-slate-300 text-sm mb-3 leading-relaxed\">\r\n          {scenario.description}\r\n        </p>\r\n\r\n        <div className=\"text-xs text-slate-400 mb-2\">\r\n          <strong>Location:</strong> {scenario.location}\r\n        </div>\r\n\r\n        <div className=\"space-y-1 text-xs\">\r\n          <div className=\"text-slate-400\">\r\n            <strong>Objectives:</strong> {scenario.objectives.filter(obj => obj.required).length} required, {scenario.objectives.filter(obj => !obj.required).length} optional\r\n          </div>\r\n\r\n          <div className=\"text-green-400\">\r\n            <strong>Rewards:</strong>\r\n            {scenario.rewards.credits && ` ${scenario.rewards.credits} üí∞`}\r\n            {scenario.rewards.research && ` ${scenario.rewards.research} üî¨`}\r\n            {scenario.rewards.unlockedContent && ` +${scenario.rewards.unlockedContent.length} archives`}\r\n            {scenario.rewards.achievements && ` +${scenario.rewards.achievements.length} achievements`}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Historical Scenarios\">\r\n      <div className=\"space-y-6 max-h-96 overflow-y-auto\">\r\n        {/* Progress Overview */}\r\n        <div className=\"bg-slate-800/50 p-4 rounded-lg border border-slate-600\">\r\n          <h4 className=\"text-green-400 font-semibold mb-2\">Historical Archive Progress</h4>\r\n          <div className=\"flex items-center gap-4\">\r\n            <div className=\"text-sm\">\r\n              <span className=\"text-slate-400\">Completed:</span>\r\n              <span className=\"text-green-400 ml-2\">{completedScenarios.length}/{HISTORICAL_SCENARIOS.length}</span>\r\n            </div>\r\n            <div className=\"flex-1 bg-slate-700 rounded-full h-2\">\r\n              <div\r\n                className=\"bg-green-400 h-2 rounded-full transition-all duration-300\"\r\n                style={{ width: `${(completedScenarios.length / HISTORICAL_SCENARIOS.length) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scenario List */}\r\n        <div className=\"grid grid-cols-1 gap-4\">\r\n          {HISTORICAL_SCENARIOS.map(scenario => (\r\n            <ScenarioCard key={scenario.id} scenario={scenario} />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Selected Scenario Details */}\r\n        {selectedScenario && (\r\n          <div className=\"bg-slate-800/50 p-4 rounded-lg border border-green-400\">\r\n            <h4 className=\"text-green-400 font-semibold mb-3\">Historical Briefing: {selectedScenario.name}</h4>\r\n\r\n            <div className=\"space-y-3 text-sm\">\r\n              <div className=\"text-slate-300 leading-relaxed\">\r\n                {selectedScenario.storyElements.briefing}\r\n              </div>\r\n\r\n              <div>\r\n                <strong className=\"text-slate-300\">Mission Parameters:</strong>\r\n                <div className=\"mt-1 space-y-1\">\r\n                  {selectedScenario.objectives.map(objective => (\r\n                    <div key={objective.id} className=\"flex items-center gap-2 text-xs\">\r\n                      <span className={objective.required ? 'text-red-400' : 'text-blue-400'}>\r\n                        {objective.required ? 'üî¥' : 'üîµ'}\r\n                      </span>\r\n                      <span className=\"text-slate-300\">{objective.description}</span>\r\n                      {objective.timeLimit && (\r\n                        <span className=\"text-yellow-400\">({objective.timeLimit}h limit)</span>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"text-xs text-slate-400 leading-relaxed\">\r\n                <strong>Historical Context:</strong> {selectedScenario.historicalAccuracy}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3\">\r\n          {selectedScenario && (\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={() => startScenario(selectedScenario)}\r\n              className=\"flex-1\"\r\n            >\r\n              üìú Begin Historical Scenario\r\n            </Button>\r\n          )}\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Close Archive\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\ResearchTreeView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\nimport { RESEARCH_TREE, RESEARCH_CATEGORIES, updateResearchAvailability, ResearchNode } from '../../data/researchTree';\r\n\r\ninterface ResearchTreeViewProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\ninterface ResearchNodeComponentProps {\r\n  node: ResearchNode;\r\n  onNodeClick: (node: ResearchNode) => void;\r\n}\r\n\r\nfunction ResearchNodeComponent({ node, onNodeClick }: ResearchNodeComponentProps) {\r\n  const { research, resources } = useGameStore();\r\n\r\n  const nodeState = research.researchTree[node.id] || {\r\n    completed: false,\r\n    inProgress: false,\r\n    progress: 0\r\n  };\r\n\r\n  const canAfford = resources.credits >= node.cost.credits &&\r\n                   resources.research >= node.cost.research;\r\n\r\n  const isClickable = node.available && !nodeState.completed && !nodeState.inProgress && canAfford;\r\n\r\n  const getNodeStatus = () => {\r\n    if (nodeState.completed) return 'completed';\r\n    if (nodeState.inProgress) return 'in-progress';\r\n    if (!node.available) return 'locked';\r\n    if (!canAfford) return 'unaffordable';\r\n    return 'available';\r\n  };\r\n\r\n  const getNodeColor = () => {\r\n    const status = getNodeStatus();\r\n    switch (status) {\r\n      case 'completed': return 'border-green-400 bg-green-400/20 text-green-400';\r\n      case 'in-progress': return 'border-blue-400 bg-blue-400/20 text-blue-400 animate-pulse';\r\n      case 'available': return 'border-yellow-400 bg-yellow-400/10 text-yellow-400 hover:bg-yellow-400/20';\r\n      case 'unaffordable': return 'border-red-400/50 bg-red-400/5 text-red-400/70';\r\n      case 'locked': return 'border-slate-600 bg-slate-800/50 text-slate-500';\r\n      default: return 'border-slate-600 bg-slate-800 text-slate-400';\r\n    }\r\n  };\r\n\r\n  const categoryData = RESEARCH_CATEGORIES[node.category];\r\n\r\n  return (\r\n    <div\r\n      className={`\r\n        absolute border-2 rounded-lg p-3 w-40 cursor-pointer transition-all duration-200\r\n        ${getNodeColor()}\r\n        ${isClickable ? 'hover:scale-105 hover:shadow-lg' : ''}\r\n      `}\r\n      style={{\r\n        left: `${node.position.x}px`,\r\n        top: `${node.position.y}px`,\r\n      }}\r\n      onClick={() => isClickable && onNodeClick(node)}\r\n    >\r\n      {/* Node Icon */}\r\n      <div className=\"text-center mb-2\">\r\n        <span className=\"text-2xl\">{nodeState.completed ? '‚úÖ' : nodeState.inProgress ? '‚è≥' : node.icon}</span>\r\n      </div>\r\n\r\n      {/* Node Title */}\r\n      <h4 className=\"font-bold text-sm text-center mb-1\">{node.name}</h4>\r\n\r\n      {/* Category Badge */}\r\n      <div className={`text-xs px-2 py-1 rounded text-center mb-2 ${categoryData.bgColor} ${categoryData.color}`}>\r\n        Tier {node.tier} ‚Ä¢ {categoryData.name}\r\n      </div>\r\n\r\n      {/* Progress Bar (if in progress) */}\r\n      {nodeState.inProgress && (\r\n        <div className=\"mb-2\">\r\n          <div className=\"w-full bg-slate-700 rounded-full h-1\">\r\n            <div\r\n              className=\"bg-blue-400 h-1 rounded-full transition-all duration-300\"\r\n              style={{ width: `${nodeState.progress}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"text-xs text-center mt-1\">{Math.round(nodeState.progress)}%</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Cost */}\r\n      <div className=\"text-xs space-y-1\">\r\n        <div className=\"flex justify-between\">\r\n          <span>üí∞</span>\r\n          <span className={resources.credits >= node.cost.credits ? 'text-green-400' : 'text-red-400'}>\r\n            {node.cost.credits.toLocaleString()}\r\n          </span>\r\n        </div>\r\n        <div className=\"flex justify-between\">\r\n          <span>üî¨</span>\r\n          <span className={resources.research >= node.cost.research ? 'text-green-400' : 'text-red-400'}>\r\n            {node.cost.research}\r\n          </span>\r\n        </div>\r\n        <div className=\"flex justify-between\">\r\n          <span>‚è∞</span>\r\n          <span>{node.cost.time}h</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ConnectionLine({ from, to, completed }: { from: { x: number; y: number }, to: { x: number; y: number }, completed: boolean }) {\r\n  const fromX = from.x + 80; // Half of node width\r\n  const fromY = from.y + 60; // Rough center of node\r\n  const toX = to.x + 80;\r\n  const toY = to.y + 60;\r\n\r\n  return (\r\n    <svg\r\n      className=\"absolute pointer-events-none\"\r\n      style={{\r\n        left: Math.min(fromX, toX) - 2,\r\n        top: Math.min(fromY, toY) - 2,\r\n        width: Math.abs(toX - fromX) + 4,\r\n        height: Math.abs(toY - fromY) + 4,\r\n      }}\r\n    >\r\n      <line\r\n        x1={fromX > toX ? Math.abs(toX - fromX) : 0}\r\n        y1={fromY > toY ? Math.abs(toY - fromY) : 0}\r\n        x2={fromX > toX ? 0 : Math.abs(toX - fromX)}\r\n        y2={fromY > toY ? 0 : Math.abs(toY - fromY)}\r\n        stroke={completed ? '#10b981' : '#64748b'}\r\n        strokeWidth=\"2\"\r\n        strokeDasharray={completed ? 'none' : '5,5'}\r\n        opacity={completed ? 1 : 0.5}\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n\r\nfunction ResearchNodeDetailModal({ node, isOpen, onClose, onStart }: {\r\n  node: ResearchNode | null;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onStart: () => void;\r\n}) {\r\n  const { research, resources } = useGameStore();\r\n\r\n  if (!node) return null;\r\n\r\n  const nodeState = research.researchTree[node.id] || {\r\n    completed: false,\r\n    inProgress: false,\r\n    progress: 0\r\n  };\r\n\r\n  const canAfford = resources.credits >= node.cost.credits &&\r\n                   resources.research >= node.cost.research;\r\n\r\n  const canStart = node.available && !nodeState.completed && !nodeState.inProgress && canAfford;\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title={`Research: ${node.name}`}>\r\n      <div className=\"space-y-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center gap-4\">\r\n          <span className=\"text-4xl\">{node.icon}</span>\r\n          <div>\r\n            <h3 className=\"text-xl font-bold text-green-400\">{node.name}</h3>\r\n            <p className=\"text-slate-400\">Tier {node.tier} ‚Ä¢ {RESEARCH_CATEGORIES[node.category].name}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Description */}\r\n        <p className=\"text-slate-300\">{node.description}</p>\r\n\r\n        {/* Status */}\r\n        <div className=\"bg-slate-800 rounded p-3\">\r\n          <h4 className=\"font-semibold mb-2\">Status</h4>\r\n          {nodeState.completed && <span className=\"text-green-400\">‚úÖ Completed</span>}\r\n          {nodeState.inProgress && (\r\n            <div>\r\n              <span className=\"text-blue-400\">‚è≥ In Progress</span>\r\n              <div className=\"w-full bg-slate-700 rounded-full h-2 mt-2\">\r\n                <div\r\n                  className=\"bg-blue-400 h-2 rounded-full transition-all duration-300\"\r\n                  style={{ width: `${nodeState.progress}%` }}\r\n                />\r\n              </div>\r\n              <p className=\"text-sm text-slate-400 mt-1\">{Math.round(nodeState.progress)}% complete</p>\r\n            </div>\r\n          )}\r\n          {!nodeState.completed && !nodeState.inProgress && (\r\n            <span className={node.available ? 'text-yellow-400' : 'text-slate-500'}>\r\n              {node.available ? 'üîì Available' : 'üîí Locked'}\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Requirements */}\r\n        {node.prerequisites.length > 0 && (\r\n          <div className=\"bg-slate-800 rounded p-3\">\r\n            <h4 className=\"font-semibold mb-2\">Prerequisites</h4>\r\n            <ul className=\"space-y-1\">\r\n              {node.prerequisites.map(prereqId => {\r\n                const prereqNode = RESEARCH_TREE.find(n => n.id === prereqId);\r\n                const prereqCompleted = research.researchTree[prereqId]?.completed || false;\r\n                return (\r\n                  <li key={prereqId} className={`flex items-center gap-2 ${prereqCompleted ? 'text-green-400' : 'text-red-400'}`}>\r\n                    <span>{prereqCompleted ? '‚úÖ' : '‚ùå'}</span>\r\n                    <span>{prereqNode?.name || prereqId}</span>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        {/* Cost */}\r\n        <div className=\"bg-slate-800 rounded p-3\">\r\n          <h4 className=\"font-semibold mb-2\">Research Cost</h4>\r\n          <div className=\"grid grid-cols-3 gap-4\">\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl\">üí∞</div>\r\n              <div className={`font-bold ${resources.credits >= node.cost.credits ? 'text-green-400' : 'text-red-400'}`}>\r\n                {node.cost.credits.toLocaleString()}\r\n              </div>\r\n              <div className=\"text-xs text-slate-400\">Credits</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl\">üî¨</div>\r\n              <div className={`font-bold ${resources.research >= node.cost.research ? 'text-green-400' : 'text-red-400'}`}>\r\n                {node.cost.research}\r\n              </div>\r\n              <div className=\"text-xs text-slate-400\">Research Points</div>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"text-2xl\">‚è∞</div>\r\n              <div className=\"font-bold text-blue-400\">{node.cost.time}h</div>\r\n              <div className=\"text-xs text-slate-400\">Time Required</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Unlocks */}\r\n        <div className=\"bg-slate-800 rounded p-3\">\r\n          <h4 className=\"font-semibold mb-2\">Unlocks</h4>\r\n          <div className=\"space-y-2\">\r\n            {node.unlocks.species && node.unlocks.species.length > 0 && (\r\n              <div>\r\n                <span className=\"text-purple-400 font-medium\">Species: </span>\r\n                <span className=\"text-slate-300\">{node.unlocks.species.join(', ')}</span>\r\n              </div>\r\n            )}\r\n            {node.unlocks.facilities && node.unlocks.facilities.length > 0 && (\r\n              <div>\r\n                <span className=\"text-orange-400 font-medium\">Facilities: </span>\r\n                <span className=\"text-slate-300\">{node.unlocks.facilities.join(', ')}</span>\r\n              </div>\r\n            )}\r\n            {node.unlocks.bonuses && node.unlocks.bonuses.length > 0 && (\r\n              <div>\r\n                <span className=\"text-green-400 font-medium\">Bonuses:</span>\r\n                <ul className=\"mt-1 space-y-1\">\r\n                  {node.unlocks.bonuses.map((bonus, index) => (\r\n                    <li key={index} className=\"text-slate-300 text-sm\">\r\n                      ‚Ä¢ {bonus.description}\r\n                    </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Button */}\r\n        <div className=\"flex gap-2\">\r\n          {canStart && (\r\n            <Button\r\n              onClick={onStart}\r\n              variant=\"primary\"\r\n              className=\"flex-1\"\r\n            >\r\n              Start Research\r\n            </Button>\r\n          )}\r\n          <Button\r\n            onClick={onClose}\r\n            variant=\"secondary\"\r\n          >\r\n            Close\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport function ResearchTreeView({ isOpen, onClose }: ResearchTreeViewProps) {\r\n  const { research, startResearchNode } = useGameStore();\r\n  const [selectedNode, setSelectedNode] = useState<ResearchNode | null>(null);\r\n  const [showNodeDetail, setShowNodeDetail] = useState(false);\r\n  const [viewOffset, setViewOffset] = useState({ x: 0, y: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Update research tree with current progress\r\n  const researchTree = updateResearchAvailability(\r\n    RESEARCH_TREE.map(node => ({\r\n      ...node,\r\n      completed: research.researchTree[node.id]?.completed || false,\r\n      inProgress: research.researchTree[node.id]?.inProgress || false,\r\n      progress: research.researchTree[node.id]?.progress || 0,\r\n    }))\r\n  );\r\n\r\n  const handleNodeClick = (node: ResearchNode) => {\r\n    setSelectedNode(node);\r\n    setShowNodeDetail(true);\r\n  };\r\n\r\n  const handleStartResearch = () => {\r\n    if (selectedNode) {\r\n      startResearchNode(selectedNode.id);\r\n      setShowNodeDetail(false);\r\n      setSelectedNode(null);\r\n    }\r\n  };\r\n\r\n  const handleMouseDown = (e: React.MouseEvent) => {\r\n    if (e.target === containerRef.current) {\r\n      setIsDragging(true);\r\n      setDragStart({ x: e.clientX - viewOffset.x, y: e.clientY - viewOffset.y });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e: React.MouseEvent) => {\r\n    if (isDragging) {\r\n      setViewOffset({\r\n        x: e.clientX - dragStart.x,\r\n        y: e.clientY - dragStart.y,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Render connection lines\r\n  const renderConnections = () => {\r\n    const connections = [];\r\n\r\n    researchTree.forEach(node => {\r\n      node.prerequisites.forEach(prereqId => {\r\n        const prereqNode = researchTree.find(n => n.id === prereqId);\r\n        if (prereqNode) {\r\n          const isCompleted = research.researchTree[prereqId]?.completed || false;\r\n          connections.push(\r\n            <ConnectionLine\r\n              key={`${prereqId}-${node.id}`}\r\n              from={prereqNode.position}\r\n              to={node.position}\r\n              completed={isCompleted}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    });\r\n\r\n    return connections;\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={isOpen} onClose={onClose} title=\"üî¨ Research Tree\">\r\n        <div className=\"h-96 relative\">\r\n          {/* Instructions */}\r\n          <div className=\"mb-4 p-3 bg-slate-800 rounded text-sm\">\r\n            <p className=\"text-slate-300\">\r\n              Click nodes to view details and start research. Drag to pan the view.\r\n            </p>\r\n            <div className=\"flex gap-4 mt-2 text-xs\">\r\n              <span className=\"flex items-center gap-1\">\r\n                <div className=\"w-3 h-3 border border-green-400 bg-green-400/20 rounded\"></div>\r\n                Completed\r\n              </span>\r\n              <span className=\"flex items-center gap-1\">\r\n                <div className=\"w-3 h-3 border border-blue-400 bg-blue-400/20 rounded\"></div>\r\n                In Progress\r\n              </span>\r\n              <span className=\"flex items-center gap-1\">\r\n                <div className=\"w-3 h-3 border border-yellow-400 bg-yellow-400/10 rounded\"></div>\r\n                Available\r\n              </span>\r\n              <span className=\"flex items-center gap-1\">\r\n                <div className=\"w-3 h-3 border border-slate-600 bg-slate-800 rounded\"></div>\r\n                Locked\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tree Container */}\r\n          <div\r\n            ref={containerRef}\r\n            className=\"w-full h-full overflow-hidden border border-slate-600 rounded bg-slate-900 relative cursor-grab active:cursor-grabbing\"\r\n            onMouseDown={handleMouseDown}\r\n            onMouseMove={handleMouseMove}\r\n            onMouseUp={handleMouseUp}\r\n            onMouseLeave={handleMouseUp}\r\n          >\r\n            <div\r\n              className=\"relative\"\r\n              style={{\r\n                transform: `translate(${viewOffset.x}px, ${viewOffset.y}px)`,\r\n                width: '1200px',\r\n                height: '1200px',\r\n              }}\r\n            >\r\n              {/* Connection Lines */}\r\n              {renderConnections()}\r\n\r\n              {/* Research Nodes */}\r\n              {researchTree.map(node => (\r\n                <ResearchNodeComponent\r\n                  key={node.id}\r\n                  node={node}\r\n                  onNodeClick={handleNodeClick}\r\n                />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Node Detail Modal */}\r\n      <ResearchNodeDetailModal\r\n        node={selectedNode}\r\n        isOpen={showNodeDetail}\r\n        onClose={() => {\r\n          setShowNodeDetail(false);\r\n          setSelectedNode(null);\r\n        }}\r\n        onStart={handleStartResearch}\r\n      />\r\n    </>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\ResourceCounter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\ResourceTrends.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":262,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7106,7109],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7106,7109],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Resources } from '../../types';\r\n\r\ninterface DataPoint {\r\n  timestamp: number;\r\n  day: number;\r\n  resources: Resources;\r\n}\r\n\r\ninterface TrendChartProps {\r\n  data: DataPoint[];\r\n  metric: keyof Resources;\r\n  color: string;\r\n  width?: number;\r\n  height?: number;\r\n}\r\n\r\ninterface ResourceTrendsProps {\r\n  className?: string;\r\n}\r\n\r\n// Mini chart component using Canvas\r\nfunction TrendChart({ data, metric, color, width = 200, height = 80 }: TrendChartProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas || data.length < 2) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    // Set canvas size for retina displays\r\n    const dpr = window.devicePixelRatio || 1;\r\n    canvas.width = width * dpr;\r\n    canvas.height = height * dpr;\r\n    canvas.style.width = `${width}px`;\r\n    canvas.style.height = `${height}px`;\r\n    ctx.scale(dpr, dpr);\r\n\r\n    // Clear canvas\r\n    ctx.clearRect(0, 0, width, height);\r\n\r\n    // Get values for this metric\r\n    const values = data.map(d => {\r\n      const value = d.resources[metric];\r\n      return typeof value === 'number' ? value : 0;\r\n    });\r\n\r\n    if (values.length === 0) return;\r\n\r\n    const minValue = Math.min(...values);\r\n    const maxValue = Math.max(...values);\r\n    const range = maxValue - minValue || 1; // Prevent division by zero\r\n\r\n    // Draw grid lines\r\n    ctx.strokeStyle = '#374151';\r\n    ctx.lineWidth = 1;\r\n    \r\n    // Horizontal lines\r\n    for (let i = 0; i <= 4; i++) {\r\n      const y = (height / 4) * i;\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, y);\r\n      ctx.lineTo(width, y);\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Vertical lines\r\n    for (let i = 0; i <= 4; i++) {\r\n      const x = (width / 4) * i;\r\n      ctx.beginPath();\r\n      ctx.moveTo(x, 0);\r\n      ctx.lineTo(x, height);\r\n      ctx.stroke();\r\n    }\r\n\r\n    // Draw trend line\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = 2;\r\n    ctx.beginPath();\r\n\r\n    values.forEach((value, index) => {\r\n      const x = (index / (values.length - 1)) * width;\r\n      const y = height - ((value - minValue) / range) * height;\r\n      \r\n      if (index === 0) {\r\n        ctx.moveTo(x, y);\r\n      } else {\r\n        ctx.lineTo(x, y);\r\n      }\r\n    });\r\n\r\n    ctx.stroke();\r\n\r\n    // Draw data points\r\n    ctx.fillStyle = color;\r\n    values.forEach((value, index) => {\r\n      const x = (index / (values.length - 1)) * width;\r\n      const y = height - ((value - minValue) / range) * height;\r\n      \r\n      ctx.beginPath();\r\n      ctx.arc(x, y, 3, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n    });\r\n\r\n    // Draw current value indicator\r\n    if (values.length > 0) {\r\n      const lastValue = values[values.length - 1];\r\n      const x = width - 5;\r\n      const y = height - ((lastValue - minValue) / range) * height;\r\n      \r\n      ctx.fillStyle = color;\r\n      ctx.beginPath();\r\n      ctx.arc(x, y, 4, 0, 2 * Math.PI);\r\n      ctx.fill();\r\n    }\r\n\r\n  }, [data, metric, color, width, height]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className=\"rounded border border-slate-600\"\r\n      style={{ width, height }}\r\n    />\r\n  );\r\n}\r\n\r\n// Sparkline component for inline trends\r\nfunction Sparkline({ data, metric, color }: { data: DataPoint[], metric: keyof Resources, color: string }) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas || data.length < 2) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    const width = 60;\r\n    const height = 20;\r\n\r\n    // Set canvas size\r\n    const dpr = window.devicePixelRatio || 1;\r\n    canvas.width = width * dpr;\r\n    canvas.height = height * dpr;\r\n    canvas.style.width = `${width}px`;\r\n    canvas.style.height = `${height}px`;\r\n    ctx.scale(dpr, dpr);\r\n\r\n    ctx.clearRect(0, 0, width, height);\r\n\r\n    const values = data.slice(-10).map(d => {\r\n      const value = d.resources[metric];\r\n      return typeof value === 'number' ? value : 0;\r\n    });\r\n\r\n    if (values.length === 0) return;\r\n\r\n    const minValue = Math.min(...values);\r\n    const maxValue = Math.max(...values);\r\n    const range = maxValue - minValue || 1;\r\n\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = 1.5;\r\n    ctx.beginPath();\r\n\r\n    values.forEach((value, index) => {\r\n      const x = (index / (values.length - 1)) * width;\r\n      const y = height - ((value - minValue) / range) * height;\r\n      \r\n      if (index === 0) {\r\n        ctx.moveTo(x, y);\r\n      } else {\r\n        ctx.lineTo(x, y);\r\n      }\r\n    });\r\n\r\n    ctx.stroke();\r\n  }, [data, metric, color]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className=\"inline-block\"\r\n      style={{ width: 60, height: 20 }}\r\n    />\r\n  );\r\n}\r\n\r\nexport function ResourceTrends({ className = '' }: ResourceTrendsProps) {\r\n  const { resources, day } = useGameStore();\r\n  const [historicalData, setHistoricalData] = useState<DataPoint[]>([]);\r\n  const [selectedMetric, setSelectedMetric] = useState<keyof Resources>('credits');\r\n  const [showDetailed, setShowDetailed] = useState(false);\r\n\r\n  // Record resource data periodically\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setHistoricalData(prev => {\r\n        const newDataPoint: DataPoint = {\r\n          timestamp: Date.now(),\r\n          day,\r\n          resources: { ...resources }\r\n        };\r\n\r\n        // Keep last 50 data points\r\n        const updated = [...prev, newDataPoint].slice(-50);\r\n        return updated;\r\n      });\r\n    }, 2000); // Record every 2 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [resources, day]);\r\n\r\n  const calculateTrend = (metric: keyof Resources): 'up' | 'down' | 'stable' => {\r\n    if (historicalData.length < 5) return 'stable';\r\n\r\n    const recent = historicalData.slice(-5);\r\n    const values = recent.map(d => {\r\n      const value = d.resources[metric];\r\n      return typeof value === 'number' ? value : 0;\r\n    });\r\n\r\n    const firstValue = values[0];\r\n    const lastValue = values[values.length - 1];\r\n    const change = lastValue - firstValue;\r\n\r\n    if (Math.abs(change) < 5) return 'stable';\r\n    return change > 0 ? 'up' : 'down';\r\n  };\r\n\r\n  const getTrendIcon = (trend: 'up' | 'down' | 'stable') => {\r\n    switch (trend) {\r\n      case 'up': return 'üìà';\r\n      case 'down': return 'üìâ';\r\n      default: return '‚û°Ô∏è';\r\n    }\r\n  };\r\n\r\n  const getTrendColor = (trend: 'up' | 'down' | 'stable') => {\r\n    switch (trend) {\r\n      case 'up': return '#10b981';\r\n      case 'down': return '#ef4444';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  const getMetricColor = (metric: keyof Resources) => {\r\n    switch (metric) {\r\n      case 'credits': return '#fbbf24';\r\n      case 'power': return '#3b82f6';\r\n      case 'maxPower': return '#8b5cf6';\r\n      case 'research': return '#a855f7';\r\n      case 'visitors': return '#10b981';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  const formatValue = (metric: keyof Resources, value: any) => {\r\n    if (typeof value === 'number') {\r\n      return metric === 'credits' ? `üí∞ ${value}` :\r\n             metric === 'power' || metric === 'maxPower' ? `‚ö° ${value}` :\r\n             metric === 'research' ? `üî¨ ${value}` :\r\n             metric === 'visitors' ? `üë• ${value}` :\r\n             value.toString();\r\n    }\r\n    return value?.toString() || '';\r\n  };\r\n\r\n  const resourceMetrics: (keyof Resources)[] = ['credits', 'power', 'research', 'visitors'];\r\n\r\n  return (\r\n    <div className={`bg-slate-900/80 border border-green-400/30 rounded-lg p-4 ${className}`}>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-green-400 font-bold text-lg\">Resource Trends</h3>\r\n        <button\r\n          onClick={() => setShowDetailed(!showDetailed)}\r\n          className=\"text-sm text-slate-400 hover:text-green-400 transition-colors\"\r\n        >\r\n          {showDetailed ? 'Hide Details' : 'Show Details'}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Quick Overview */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-4\">\r\n        {resourceMetrics.map(metric => {\r\n          const trend = calculateTrend(metric);\r\n          const value = resources[metric];\r\n          \r\n          return (\r\n            <div\r\n              key={metric}\r\n              className={`\r\n                bg-slate-800 rounded p-3 cursor-pointer transition-all duration-200\r\n                ${selectedMetric === metric ? 'ring-2 ring-green-400' : 'hover:bg-slate-700'}\r\n              `}\r\n              onClick={() => setSelectedMetric(metric)}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-1\">\r\n                <span className=\"text-xs text-slate-400 capitalize\">{metric}</span>\r\n                <span>{getTrendIcon(trend)}</span>\r\n              </div>\r\n              <div className=\"text-sm font-semibold\" style={{ color: getMetricColor(metric) }}>\r\n                {formatValue(metric, value)}\r\n              </div>\r\n              <div className=\"mt-1\">\r\n                <Sparkline \r\n                  data={historicalData} \r\n                  metric={metric} \r\n                  color={getMetricColor(metric)} \r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Detailed Chart */}\r\n      {showDetailed && historicalData.length > 1 && (\r\n        <div className=\"space-y-4\">\r\n          <div className=\"bg-slate-800 rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h4 className=\"font-semibold\" style={{ color: getMetricColor(selectedMetric) }}>\r\n                {selectedMetric.charAt(0).toUpperCase() + selectedMetric.slice(1)} Trend\r\n              </h4>\r\n              <select\r\n                value={selectedMetric}\r\n                onChange={(e) => setSelectedMetric(e.target.value as keyof Resources)}\r\n                className=\"bg-slate-700 border border-slate-600 text-slate-300 rounded px-2 py-1 text-sm\"\r\n              >\r\n                {resourceMetrics.map(metric => (\r\n                  <option key={metric} value={metric}>\r\n                    {metric.charAt(0).toUpperCase() + metric.slice(1)}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            <TrendChart\r\n              data={historicalData}\r\n              metric={selectedMetric}\r\n              color={getMetricColor(selectedMetric)}\r\n              width={400}\r\n              height={120}\r\n            />\r\n            \r\n            <div className=\"mt-3 grid grid-cols-3 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"text-slate-400\">Current: </span>\r\n                <span style={{ color: getMetricColor(selectedMetric) }}>\r\n                  {formatValue(selectedMetric, resources[selectedMetric])}\r\n                </span>\r\n              </div>\r\n              {historicalData.length > 0 && (\r\n                <>\r\n                  <div>\r\n                    <span className=\"text-slate-400\">Trend: </span>\r\n                    <span style={{ color: getTrendColor(calculateTrend(selectedMetric)) }}>\r\n                      {calculateTrend(selectedMetric)}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"text-slate-400\">Data Points: </span>\r\n                    <span className=\"text-slate-300\">{historicalData.length}</span>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Statistics */}\r\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3\">\r\n            {resourceMetrics.map(metric => {\r\n              const values = historicalData.map(d => {\r\n                const value = d.resources[metric];\r\n                return typeof value === 'number' ? value : 0;\r\n              });\r\n              \r\n              if (values.length === 0) return null;\r\n\r\n              const min = Math.min(...values);\r\n              const max = Math.max(...values);\r\n              const avg = values.reduce((a, b) => a + b, 0) / values.length;\r\n\r\n              return (\r\n                <div key={metric} className=\"bg-slate-800 rounded p-3\">\r\n                  <div className=\"text-xs text-slate-400 mb-2 capitalize\">{metric} Stats</div>\r\n                  <div className=\"space-y-1 text-xs\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Min:</span>\r\n                      <span style={{ color: getMetricColor(metric) }}>{min.toFixed(0)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Max:</span>\r\n                      <span style={{ color: getMetricColor(metric) }}>{max.toFixed(0)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Avg:</span>\r\n                      <span style={{ color: getMetricColor(metric) }}>{avg.toFixed(0)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {historicalData.length === 0 && (\r\n        <div className=\"text-center text-slate-400 py-8\">\r\n          <span>üìä Collecting resource data...</span>\r\n          <p className=\"text-sm mt-2\">Charts will appear once enough data is gathered</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\SpeciesPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\TimeDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'tick' is assigned a value but never used.","line":4,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useGameStore } from '../../stores/gameStore';\r\n\r\nexport function TimeDisplay() {\r\n  const { day, hour, tick, paused } = useGameStore();\r\n\r\n  const formatTime = (hour: number) => {\r\n    const ampm = hour >= 12 ? 'PM' : 'AM';\r\n    const displayHour = hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;\r\n    return `${displayHour}:00 ${ampm}`;\r\n  };\r\n\r\n  const getTimeOfDay = (hour: number) => {\r\n    if (hour >= 6 && hour < 12) return 'Morning';\r\n    if (hour >= 12 && hour < 18) return 'Afternoon';\r\n    if (hour >= 18 && hour < 22) return 'Evening';\r\n    return 'Night';\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-3 text-sm\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <span className=\"text-green-400 font-bold\">Day {day}</span>\r\n        <span className=\"text-slate-300\">{formatTime(hour)}</span>\r\n        <span className=\"text-slate-400\">{getTimeOfDay(hour)}</span>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-1\">\r\n        <div className={`w-2 h-2 rounded-full ${paused ? 'bg-red-400' : 'bg-green-400'} ${!paused ? 'animate-pulse' : ''}`}></div>\r\n        <span className=\"text-slate-400 text-xs\">\r\n          {paused ? 'Paused' : 'Running'}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\TutorialMode.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Modal' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'currentStep.action' and 'nextStep'. Either include them or remove the dependency array.","line":205,"column":6,"nodeType":"ArrayExpression","endLine":205,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [currentStep.action, currentStepIndex, isOpen, nextStep]","fix":{"range":[7074,7100],"text":"[currentStep.action, currentStepIndex, isOpen, nextStep]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":367,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":367,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Modal } from '../ui/Modal';\r\nimport { Button } from '../ui/Button';\r\n\r\ninterface TutorialStep {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  target?: string; // CSS selector for element to highlight\r\n  position: 'top' | 'bottom' | 'left' | 'right' | 'center';\r\n  action?: {\r\n    type: 'click' | 'wait' | 'condition';\r\n    target?: string;\r\n    condition?: () => boolean;\r\n    description: string;\r\n  };\r\n  skippable?: boolean;\r\n}\r\n\r\nconst TUTORIAL_STEPS: TutorialStep[] = [\r\n  {\r\n    id: 'welcome',\r\n    title: 'Welcome to Xenomorph Park!',\r\n    content: 'Welcome to your new xenomorph park management adventure! This tutorial will guide you through the basics of building and managing your park.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'resources',\r\n    title: 'Understanding Resources',\r\n    content: 'At the top, you can see your current resources: Credits (üí∞), Power (‚ö°), Research points (üî¨), and Visitors (üë•). These are essential for building and maintaining your park.',\r\n    target: '.resource-counter',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'time',\r\n    title: 'Time Progression',\r\n    content: 'Time passes automatically in the game. You can see the current day and hour. Different times of day affect visitor flow and park atmosphere.',\r\n    target: '.time-display',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'game_controls',\r\n    title: 'Game Controls',\r\n    content: 'Use these controls to pause the game and access undo/redo functions.',\r\n    target: '.game-controls',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'facilities',\r\n    title: 'Building Facilities',\r\n    content: 'Click on a facility to select it, then click on the grid to place it. Different facilities have different costs and power requirements.',\r\n    target: '.facility-panel',\r\n    position: 'right',\r\n    action: {\r\n      type: 'condition',\r\n      condition: () => useGameStore.getState().selectedFacility !== null,\r\n      description: 'Select a facility from the panel'\r\n    },\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'placing_facility',\r\n    title: 'Placing Your First Facility',\r\n    content: 'Great! Now click on any empty cell in the grid to place your selected facility. Green highlights show where you can place it.',\r\n    target: '.game-grid',\r\n    position: 'left',\r\n    action: {\r\n      type: 'condition',\r\n      condition: () => useGameStore.getState().facilities.length > 0,\r\n      description: 'Place a facility on the grid'\r\n    },\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'power_generator',\r\n    title: 'Power Management',\r\n    content: 'Build Power Generators to increase your maximum power capacity. Most facilities require power to operate.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'research_lab',\r\n    title: 'Research and Development',\r\n    content: 'Research Labs generate research points over time. You need research points to unlock new xenomorph species and technologies.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'species_panel',\r\n    title: 'Xenomorph Species',\r\n    content: 'Here you can see available xenomorph species. You need to research most species before you can place them in your park.',\r\n    target: '.species-panel',\r\n    position: 'left',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'research_tree',\r\n    title: 'Research Tree',\r\n    content: 'Click the üî¨ button in the header to open the research tree and unlock new technologies and species.',\r\n    target: 'button[title*=\"Research Tree\"]',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'genetic_modification',\r\n    title: 'Genetic Modification',\r\n    content: 'Once you have researched species, you can use the Gene Lab to create modified xenomorphs with enhanced abilities!',\r\n    target: 'button:contains(\"üß¨ Gene Lab\")',\r\n    position: 'left',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'camera_controls',\r\n    title: 'Camera Controls',\r\n    content: 'Use the zoom controls to get a better view of your park. You can also pan by holding Ctrl and dragging, or use the mouse wheel to zoom.',\r\n    target: '.camera-controls',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'right_click',\r\n    title: 'Context Actions',\r\n    content: 'Right-click on placed facilities and xenomorphs to see available actions like inspection, upgrades, and removal.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'visitor_management',\r\n    title: 'Visitor Management',\r\n    content: 'Build Visitor Centers to accommodate more guests. More dangerous xenomorphs attract more visitors but are harder to contain.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'achievements',\r\n    title: 'Achievements & Progress',\r\n    content: 'Click the üèÜ button to view achievements and track your progress. Complete objectives to unlock rewards!',\r\n    target: 'button[title=\"Achievements\"]',\r\n    position: 'bottom',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'keyboard_shortcuts',\r\n    title: 'Keyboard Shortcuts',\r\n    content: 'Press H to view all available keyboard shortcuts. Many actions can be performed quickly using hotkeys.',\r\n    position: 'center',\r\n    skippable: true\r\n  },\r\n  {\r\n    id: 'conclusion',\r\n    title: 'Tutorial Complete!',\r\n    content: 'You\\'re ready to build your xenomorph park! Remember: balance visitor satisfaction with containment security. Good luck, and have fun!',\r\n    position: 'center',\r\n    skippable: false\r\n  }\r\n];\r\n\r\ninterface TutorialModeProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function TutorialMode({ isOpen, onClose }: TutorialModeProps) {\r\n  const [currentStepIndex, setCurrentStepIndex] = useState(0);\r\n  const [isWaitingForAction, setIsWaitingForAction] = useState(false);\r\n  const [highlightedElement, setHighlightedElement] = useState<Element | null>(null);\r\n\r\n  const currentStep = TUTORIAL_STEPS[currentStepIndex];\r\n  const isLastStep = currentStepIndex === TUTORIAL_STEPS.length - 1;\r\n\r\n  // Highlight target element\r\n  useEffect(() => {\r\n    if (!isOpen || !currentStep.target) {\r\n      setHighlightedElement(null);\r\n      return;\r\n    }\r\n\r\n    const element = document.querySelector(currentStep.target);\r\n    if (element) {\r\n      setHighlightedElement(element);\r\n      element.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    }\r\n  }, [isOpen, currentStep.target]);\r\n\r\n  // Handle action conditions\r\n  useEffect(() => {\r\n    if (!isOpen || !currentStep.action || currentStep.action.type !== 'condition') return;\r\n\r\n    setIsWaitingForAction(true);\r\n\r\n    const checkCondition = () => {\r\n      if (currentStep.action?.condition?.()) {\r\n        setIsWaitingForAction(false);\r\n        setTimeout(() => nextStep(), 1000); // Small delay before auto-advancing\r\n      }\r\n    };\r\n\r\n    const interval = setInterval(checkCondition, 500);\r\n    return () => clearInterval(interval);\r\n  }, [currentStepIndex, isOpen]);\r\n\r\n  const nextStep = () => {\r\n    if (isLastStep) {\r\n      onClose();\r\n    } else {\r\n      setCurrentStepIndex(prev => prev + 1);\r\n      setIsWaitingForAction(false);\r\n    }\r\n  };\r\n\r\n  const prevStep = () => {\r\n    if (currentStepIndex > 0) {\r\n      setCurrentStepIndex(prev => prev - 1);\r\n      setIsWaitingForAction(false);\r\n    }\r\n  };\r\n\r\n  const skipTutorial = () => {\r\n    onClose();\r\n  };\r\n\r\n  const getStepPosition = () => {\r\n    if (!currentStep.target || !highlightedElement) {\r\n      return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' };\r\n    }\r\n\r\n    const rect = highlightedElement.getBoundingClientRect();\r\n    const modalWidth = 400; // Approximate modal width\r\n    const modalHeight = 300; // Approximate modal height\r\n\r\n    switch (currentStep.position) {\r\n      case 'top':\r\n        return {\r\n          top: rect.top - modalHeight - 20,\r\n          left: rect.left + rect.width / 2 - modalWidth / 2,\r\n        };\r\n      case 'bottom':\r\n        return {\r\n          top: rect.bottom + 20,\r\n          left: rect.left + rect.width / 2 - modalWidth / 2,\r\n        };\r\n      case 'left':\r\n        return {\r\n          top: rect.top + rect.height / 2 - modalHeight / 2,\r\n          left: rect.left - modalWidth - 20,\r\n        };\r\n      case 'right':\r\n        return {\r\n          top: rect.top + rect.height / 2 - modalHeight / 2,\r\n          left: rect.right + 20,\r\n        };\r\n      default:\r\n        return { top: '50%', left: '50%', transform: 'translate(-50%, -50%)' };\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay with highlighted element */}\r\n      <div className=\"fixed inset-0 z-40 pointer-events-none\">\r\n        {/* Dark overlay */}\r\n        <div className=\"absolute inset-0 bg-black/60\" />\r\n\r\n        {/* Highlight cutout */}\r\n        {highlightedElement && (\r\n          <div\r\n            className=\"absolute border-4 border-green-400 rounded-lg animate-pulse pointer-events-auto\"\r\n            style={{\r\n              top: highlightedElement.getBoundingClientRect().top - 8,\r\n              left: highlightedElement.getBoundingClientRect().left - 8,\r\n              width: highlightedElement.getBoundingClientRect().width + 16,\r\n              height: highlightedElement.getBoundingClientRect().height + 16,\r\n              boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.6)',\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Tutorial Modal */}\r\n      <div\r\n        className=\"fixed z-50 bg-slate-900 border-2 border-green-400 rounded-lg shadow-2xl p-6 max-w-md\"\r\n        style={getStepPosition()}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-start mb-4\">\r\n          <div>\r\n            <h3 className=\"text-xl font-bold text-green-400\">{currentStep.title}</h3>\r\n            <div className=\"text-sm text-slate-400 mt-1\">\r\n              Step {currentStepIndex + 1} of {TUTORIAL_STEPS.length}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={skipTutorial}\r\n            className=\"text-slate-400 hover:text-red-400 transition-colors\"\r\n            title=\"Skip Tutorial\"\r\n          >\r\n            ‚úï\r\n          </button>\r\n        </div>\r\n\r\n        {/* Progress Bar */}\r\n        <div className=\"w-full bg-slate-700 rounded-full h-2 mb-4\">\r\n          <div\r\n            className=\"bg-green-400 h-2 rounded-full transition-all duration-300\"\r\n            style={{ width: `${((currentStepIndex + 1) / TUTORIAL_STEPS.length) * 100}%` }}\r\n          />\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"text-slate-200 mb-6 leading-relaxed\">\r\n          {currentStep.content}\r\n        </div>\r\n\r\n        {/* Action Instruction */}\r\n        {currentStep.action && isWaitingForAction && (\r\n          <div className=\"bg-blue-900/30 border border-blue-400/50 rounded p-3 mb-4\">\r\n            <div className=\"text-blue-400 text-sm font-semibold mb-1\">Action Required:</div>\r\n            <div className=\"text-blue-200 text-sm\">{currentStep.action.description}</div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Controls */}\r\n        <div className=\"flex justify-between items-center\">\r\n          <Button\r\n            variant=\"outline\"\r\n            onClick={prevStep}\r\n            disabled={currentStepIndex === 0}\r\n            className=\"text-sm\"\r\n          >\r\n            ‚Üê Previous\r\n          </Button>\r\n\r\n          <div className=\"flex gap-2\">\r\n            {currentStep.skippable && (\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={skipTutorial}\r\n                className=\"text-sm\"\r\n              >\r\n                Skip Tutorial\r\n              </Button>\r\n            )}\r\n\r\n            <Button\r\n              variant=\"primary\"\r\n              onClick={nextStep}\r\n              disabled={isWaitingForAction}\r\n              className=\"text-sm\"\r\n            >\r\n              {isLastStep ? 'Finish' : 'Next ‚Üí'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n// Hook to manage tutorial state\r\nexport function useTutorial() {\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [hasSeenTutorial, setHasSeenTutorial] = useState(() => {\r\n    return localStorage.getItem('xenomorph-park-tutorial-seen') === 'true';\r\n  });\r\n\r\n  const startTutorial = () => {\r\n    setShowTutorial(true);\r\n  };\r\n\r\n  const endTutorial = () => {\r\n    setShowTutorial(false);\r\n    setHasSeenTutorial(true);\r\n    localStorage.setItem('xenomorph-park-tutorial-seen', 'true');\r\n  };\r\n\r\n  const resetTutorial = () => {\r\n    setHasSeenTutorial(false);\r\n    localStorage.removeItem('xenomorph-park-tutorial-seen');\r\n  };\r\n\r\n  // Auto-start tutorial for new players\r\n  useEffect(() => {\r\n    if (!hasSeenTutorial) {\r\n      const timer = setTimeout(() => {\r\n        setShowTutorial(true);\r\n      }, 2000); // Start tutorial after 2 seconds for new players\r\n\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [hasSeenTutorial]);\r\n\r\n  return {\r\n    showTutorial,\r\n    hasSeenTutorial,\r\n    startTutorial,\r\n    endTutorial,\r\n    resetTutorial,\r\n    TutorialComponent: () => (\r\n      <TutorialMode isOpen={showTutorial} onClose={endTutorial} />\r\n    ),\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\game\\WeatherSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\AccessibilityFeatures.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":1,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":345,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":345,"endColumn":36},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":382,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":382,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\n// Screen reader announcements\r\ninterface ScreenReaderAnnouncementProps {\r\n  message: string;\r\n  priority?: 'polite' | 'assertive';\r\n}\r\n\r\nexport function ScreenReaderAnnouncement({ message, priority = 'polite' }: ScreenReaderAnnouncementProps) {\r\n  return (\r\n    <div\r\n      role=\"status\"\r\n      aria-live={priority}\r\n      aria-atomic=\"true\"\r\n      className=\"sr-only\"\r\n    >\r\n      {message}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Skip navigation links\r\nexport function SkipNavigation() {\r\n  return (\r\n    <div className=\"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 z-50\">\r\n      <a\r\n        href=\"#main-content\"\r\n        className=\"bg-green-400 text-black px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-green-600\"\r\n      >\r\n        Skip to main content\r\n      </a>\r\n      <a\r\n        href=\"#navigation\"\r\n        className=\"bg-green-400 text-black px-4 py-2 rounded ml-2 focus:outline-none focus:ring-2 focus:ring-green-600\"\r\n      >\r\n        Skip to navigation\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Focus trap for modals\r\ninterface FocusTrapProps {\r\n  isActive: boolean;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function FocusTrap({ isActive, children, className = '' }: FocusTrapProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const firstFocusableRef = useRef<HTMLElement | null>(null);\r\n  const lastFocusableRef = useRef<HTMLElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isActive || !containerRef.current) return;\r\n\r\n    const focusableElements = containerRef.current.querySelectorAll(\r\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n    );\r\n\r\n    const focusableArray = Array.from(focusableElements) as HTMLElement[];\r\n    firstFocusableRef.current = focusableArray[0];\r\n    lastFocusableRef.current = focusableArray[focusableArray.length - 1];\r\n\r\n    // Focus the first element\r\n    if (firstFocusableRef.current) {\r\n      firstFocusableRef.current.focus();\r\n    }\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Tab') {\r\n        if (e.shiftKey) {\r\n          // Shift + Tab\r\n          if (document.activeElement === firstFocusableRef.current) {\r\n            e.preventDefault();\r\n            lastFocusableRef.current?.focus();\r\n          }\r\n        } else {\r\n          // Tab\r\n          if (document.activeElement === lastFocusableRef.current) {\r\n            e.preventDefault();\r\n            firstFocusableRef.current?.focus();\r\n          }\r\n        }\r\n      }\r\n\r\n      if (e.key === 'Escape') {\r\n        // Allow parent to handle escape\r\n        const escapeEvent = new CustomEvent('focustrap-escape');\r\n        containerRef.current?.dispatchEvent(escapeEvent);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [isActive]);\r\n\r\n  return (\r\n    <div ref={containerRef} className={className}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Accessible button with proper ARIA attributes\r\ninterface AccessibleButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  disabled?: boolean;\r\n  loading?: boolean;\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  ariaLabel?: string;\r\n  ariaDescribedBy?: string;\r\n  className?: string;\r\n}\r\n\r\nexport function AccessibleButton({\r\n  children,\r\n  onClick,\r\n  disabled = false,\r\n  loading = false,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  ariaLabel,\r\n  ariaDescribedBy,\r\n  className = ''\r\n}: AccessibleButtonProps) {\r\n  const getVariantClasses = () => {\r\n    switch (variant) {\r\n      case 'secondary':\r\n        return 'bg-slate-700 hover:bg-slate-600 text-slate-300 border-slate-600';\r\n      case 'danger':\r\n        return 'bg-red-600 hover:bg-red-700 text-white border-red-500';\r\n      default:\r\n        return 'bg-green-600 hover:bg-green-700 text-white border-green-500';\r\n    }\r\n  };\r\n\r\n  const getSizeClasses = () => {\r\n    switch (size) {\r\n      case 'sm':\r\n        return 'px-3 py-1.5 text-sm';\r\n      case 'lg':\r\n        return 'px-6 py-3 text-lg';\r\n      default:\r\n        return 'px-4 py-2 text-base';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      aria-label={ariaLabel}\r\n      aria-describedby={ariaDescribedBy}\r\n      aria-busy={loading}\r\n      className={`\r\n        font-medium border-2 rounded transition-all duration-200\r\n        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400\r\n        disabled:opacity-50 disabled:cursor-not-allowed\r\n        ${getVariantClasses()}\r\n        ${getSizeClasses()}\r\n        ${className}\r\n      `}\r\n    >\r\n      {loading ? (\r\n        <span className=\"flex items-center gap-2\">\r\n          <span className=\"animate-spin\">‚è≥</span>\r\n          <span>Loading...</span>\r\n        </span>\r\n      ) : (\r\n        children\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n\r\n// Accessible form field with proper labeling\r\ninterface AccessibleFieldProps {\r\n  label: string;\r\n  children: React.ReactNode;\r\n  error?: string;\r\n  hint?: string;\r\n  required?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport function AccessibleField({\r\n  label,\r\n  children,\r\n  error,\r\n  hint,\r\n  required = false,\r\n  className = ''\r\n}: AccessibleFieldProps) {\r\n  const fieldId = `field-${Math.random().toString(36).substr(2, 9)}`;\r\n  const errorId = error ? `${fieldId}-error` : undefined;\r\n  const hintId = hint ? `${fieldId}-hint` : undefined;\r\n\r\n  return (\r\n    <div className={`space-y-2 ${className}`}>\r\n      <label\r\n        htmlFor={fieldId}\r\n        className=\"block text-sm font-medium text-slate-300\"\r\n      >\r\n        {label}\r\n        {required && (\r\n          <span className=\"text-red-400 ml-1\" aria-label=\"required\">\r\n            *\r\n          </span>\r\n        )}\r\n      </label>\r\n\r\n      <div>\r\n        {React.cloneElement(children as React.ReactElement, {\r\n          id: fieldId,\r\n          'aria-describedby': [errorId, hintId].filter(Boolean).join(' ') || undefined,\r\n          'aria-invalid': error ? 'true' : undefined,\r\n          'aria-required': required,\r\n        })}\r\n      </div>\r\n\r\n      {hint && (\r\n        <p id={hintId} className=\"text-sm text-slate-400\">\r\n          {hint}\r\n        </p>\r\n      )}\r\n\r\n      {error && (\r\n        <p id={errorId} className=\"text-sm text-red-400\" role=\"alert\">\r\n          {error}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Accessible modal with proper ARIA attributes\r\ninterface AccessibleModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  description?: string;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function AccessibleModal({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  description,\r\n  children,\r\n  className = ''\r\n}: AccessibleModalProps) {\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n  const titleId = `modal-title-${Math.random().toString(36).substr(2, 9)}`;\r\n  const descriptionId = description ? `modal-desc-${Math.random().toString(36).substr(2, 9)}` : undefined;\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      // Prevent background scrolling\r\n      document.body.style.overflow = 'hidden';\r\n      \r\n      // Announce modal opening\r\n      const announcement = document.createElement('div');\r\n      announcement.setAttribute('aria-live', 'assertive');\r\n      announcement.setAttribute('aria-atomic', 'true');\r\n      announcement.className = 'sr-only';\r\n      announcement.textContent = `Dialog opened: ${title}`;\r\n      document.body.appendChild(announcement);\r\n\r\n      setTimeout(() => {\r\n        document.body.removeChild(announcement);\r\n      }, 1000);\r\n    } else {\r\n      document.body.style.overflow = '';\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [isOpen, title]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby={titleId}\r\n      aria-describedby={descriptionId}\r\n    >\r\n      <FocusTrap isActive={isOpen} className=\"w-full max-w-2xl max-h-[90vh] mx-4\">\r\n        <motion.div\r\n          ref={modalRef}\r\n          initial={{ opacity: 0, scale: 0.9 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          exit={{ opacity: 0, scale: 0.9 }}\r\n          className={`bg-slate-900 border border-green-400/30 rounded-lg overflow-hidden ${className}`}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Escape') {\r\n              onClose();\r\n            }\r\n          }}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-4 border-b border-slate-700\">\r\n            <h2 id={titleId} className=\"text-xl font-bold text-green-400\">\r\n              {title}\r\n            </h2>\r\n            <button\r\n              onClick={onClose}\r\n              aria-label=\"Close dialog\"\r\n              className=\"text-slate-400 hover:text-slate-300 p-2 rounded focus:outline-none focus:ring-2 focus:ring-green-400\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n\r\n          {/* Description */}\r\n          {description && (\r\n            <p id={descriptionId} className=\"px-4 py-2 text-slate-400 text-sm border-b border-slate-700\">\r\n              {description}\r\n            </p>\r\n          )}\r\n\r\n          {/* Content */}\r\n          <div className=\"p-4 overflow-y-auto max-h-[calc(90vh-120px)]\">\r\n            {children}\r\n          </div>\r\n        </motion.div>\r\n      </FocusTrap>\r\n    </div>\r\n  );\r\n}\r\n\r\n// High contrast mode toggle\r\nexport function useHighContrastMode() {\r\n  const [highContrast, setHighContrast] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem('high-contrast-mode');\r\n    if (saved === 'true') {\r\n      setHighContrast(true);\r\n    }\r\n\r\n    // Check for system preference\r\n    const mediaQuery = window.matchMedia('(prefers-contrast: high)');\r\n    if (mediaQuery.matches) {\r\n      setHighContrast(true);\r\n    }\r\n\r\n    const handleChange = (e: MediaQueryListEvent) => {\r\n      setHighContrast(e.matches);\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (highContrast) {\r\n      document.documentElement.classList.add('high-contrast');\r\n    } else {\r\n      document.documentElement.classList.remove('high-contrast');\r\n    }\r\n    \r\n    localStorage.setItem('high-contrast-mode', highContrast.toString());\r\n  }, [highContrast]);\r\n\r\n  return [highContrast, setHighContrast] as const;\r\n}\r\n\r\n// Reduced motion preference\r\nexport function useReducedMotion() {\r\n  const [reducedMotion, setReducedMotion] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\r\n    setReducedMotion(mediaQuery.matches);\r\n\r\n    const handleChange = (e: MediaQueryListEvent) => {\r\n      setReducedMotion(e.matches);\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (reducedMotion) {\r\n      document.documentElement.classList.add('reduce-motion');\r\n    } else {\r\n      document.documentElement.classList.remove('reduce-motion');\r\n    }\r\n  }, [reducedMotion]);\r\n\r\n  return reducedMotion;\r\n}\r\n\r\n// Live region for dynamic content updates\r\ninterface LiveRegionProps {\r\n  children: React.ReactNode;\r\n  priority?: 'polite' | 'assertive';\r\n  atomic?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport function LiveRegion({ \r\n  children, \r\n  priority = 'polite', \r\n  atomic = true, \r\n  className = '' \r\n}: LiveRegionProps) {\r\n  return (\r\n    <div\r\n      role=\"status\"\r\n      aria-live={priority}\r\n      aria-atomic={atomic}\r\n      className={`sr-only ${className}`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Keyboard navigation hints\r\ninterface KeyboardHintsProps {\r\n  shortcuts: Array<{ keys: string; description: string }>;\r\n  className?: string;\r\n}\r\n\r\nexport function KeyboardHints({ shortcuts, className = '' }: KeyboardHintsProps) {\r\n  const [showHints, setShowHints] = useState(false);\r\n\r\n  return (\r\n    <div className={className}>\r\n      <button\r\n        onClick={() => setShowHints(!showHints)}\r\n        className=\"text-sm text-slate-400 hover:text-slate-300 focus:outline-none focus:ring-2 focus:ring-green-400 rounded px-2 py-1\"\r\n        aria-expanded={showHints}\r\n        aria-controls=\"keyboard-hints\"\r\n      >\r\n        ‚å®Ô∏è Keyboard Shortcuts\r\n      </button>\r\n\r\n      {showHints && (\r\n        <div\r\n          id=\"keyboard-hints\"\r\n          className=\"absolute right-0 top-full mt-2 bg-slate-800 border border-slate-600 rounded-lg p-4 shadow-lg z-50 min-w-64\"\r\n          role=\"region\"\r\n          aria-label=\"Keyboard shortcuts\"\r\n        >\r\n          <h3 className=\"text-green-400 font-semibold mb-3\">Keyboard Shortcuts</h3>\r\n          <ul className=\"space-y-2\">\r\n            {shortcuts.map((shortcut, index) => (\r\n              <li key={index} className=\"flex justify-between text-sm\">\r\n                <span className=\"text-slate-300\">{shortcut.description}</span>\r\n                <kbd className=\"bg-slate-700 px-2 py-1 rounded text-xs font-mono\">\r\n                  {shortcut.keys}\r\n                </kbd>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Progress indicator with percentage for screen readers\r\ninterface AccessibleProgressProps {\r\n  value: number;\r\n  max: number;\r\n  label: string;\r\n  className?: string;\r\n}\r\n\r\nexport function AccessibleProgress({ value, max, label, className = '' }: AccessibleProgressProps) {\r\n  const percentage = Math.round((value / max) * 100);\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"flex justify-between text-sm mb-1\">\r\n        <span>{label}</span>\r\n        <span>{percentage}%</span>\r\n      </div>\r\n      <div\r\n        role=\"progressbar\"\r\n        aria-valuenow={value}\r\n        aria-valuemin={0}\r\n        aria-valuemax={max}\r\n        aria-label={`${label}: ${percentage}% complete`}\r\n        className=\"w-full bg-slate-700 rounded-full h-2\"\r\n      >\r\n        <div\r\n          className=\"bg-green-400 h-2 rounded-full transition-all duration-300\"\r\n          style={{ width: `${percentage}%` }}\r\n        />\r\n      </div>\r\n      <LiveRegion>\r\n        {label} progress: {percentage}% complete\r\n      </LiveRegion>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Error boundary with accessible error messages\r\ninterface AccessibleErrorBoundaryProps {\r\n  children: React.ReactNode;\r\n  fallback?: React.ReactNode;\r\n}\r\n\r\nexport class AccessibleErrorBoundary extends React.Component<\r\n  AccessibleErrorBoundaryProps,\r\n  { hasError: boolean; error: Error | null }\r\n> {\r\n  constructor(props: AccessibleErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    console.error('Accessibility Error Boundary caught an error:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        this.props.fallback || (\r\n          <div\r\n            role=\"alert\"\r\n            className=\"bg-red-900/30 border border-red-400/30 rounded-lg p-4 m-4\"\r\n          >\r\n            <h2 className=\"text-red-400 font-bold text-lg mb-2\">\r\n              Something went wrong\r\n            </h2>\r\n            <p className=\"text-slate-300 mb-4\">\r\n              An error occurred while rendering this component. Please try refreshing the page.\r\n            </p>\r\n            <button\r\n              onClick={() => this.setState({ hasError: false, error: null })}\r\n              className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-red-400\"\r\n            >\r\n              Try again\r\n            </button>\r\n          </div>\r\n        )\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\AdvancedAnimations.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":2,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":37},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":456,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":456,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { motion, AnimatePresence, useAnimation } from 'framer-motion';\r\nimport { useState, useEffect, useRef } from 'react';\r\n\r\n// Particle system for various effects\r\ninterface Particle {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n  life: number;\r\n  maxLife: number;\r\n  size: number;\r\n  color: string;\r\n  type: 'spark' | 'smoke' | 'acid' | 'blood' | 'energy';\r\n}\r\n\r\ninterface ParticleSystemProps {\r\n  particles: Particle[];\r\n  className?: string;\r\n}\r\n\r\nexport function ParticleSystem({ particles, className = '' }: ParticleSystemProps) {\r\n  return (\r\n    <div className={`fixed inset-0 pointer-events-none z-40 ${className}`}>\r\n      <AnimatePresence>\r\n        {particles.map((particle) => (\r\n          <motion.div\r\n            key={particle.id}\r\n            initial={{ \r\n              x: particle.x, \r\n              y: particle.y, \r\n              scale: 0,\r\n              opacity: 1 \r\n            }}\r\n            animate={{ \r\n              x: particle.x + particle.vx * particle.life,\r\n              y: particle.y + particle.vy * particle.life,\r\n              scale: particle.size,\r\n              opacity: 1 - (particle.life / particle.maxLife)\r\n            }}\r\n            exit={{ \r\n              scale: 0, \r\n              opacity: 0 \r\n            }}\r\n            transition={{ \r\n              duration: particle.maxLife / 1000,\r\n              ease: \"easeOut\" \r\n            }}\r\n            className={`absolute w-2 h-2 rounded-full ${getParticleStyle(particle.type)}`}\r\n            style={{ backgroundColor: particle.color }}\r\n          />\r\n        ))}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getParticleStyle(type: Particle['type']): string {\r\n  switch (type) {\r\n    case 'spark':\r\n      return 'shadow-lg shadow-yellow-400/50';\r\n    case 'smoke':\r\n      return 'opacity-60 blur-sm';\r\n    case 'acid':\r\n      return 'shadow-lg shadow-green-400/50';\r\n    case 'blood':\r\n      return 'shadow-sm';\r\n    case 'energy':\r\n      return 'shadow-lg shadow-blue-400/50 animate-pulse';\r\n    default:\r\n      return '';\r\n  }\r\n}\r\n\r\n// Animated background effects\r\nexport function AnimatedBackground() {\r\n  const [stars, setStars] = useState<Array<{ id: string; x: number; y: number; opacity: number; size: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const starCount = 50;\r\n    const newStars = Array.from({ length: starCount }, (_, i) => ({\r\n      id: `star-${i}`,\r\n      x: Math.random() * 100,\r\n      y: Math.random() * 100,\r\n      opacity: Math.random() * 0.8 + 0.2,\r\n      size: Math.random() * 2 + 1\r\n    }));\r\n    setStars(newStars);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0\">\r\n      {stars.map((star) => (\r\n        <motion.div\r\n          key={star.id}\r\n          className=\"absolute bg-white rounded-full\"\r\n          style={{\r\n            left: `${star.x}%`,\r\n            top: `${star.y}%`,\r\n            width: `${star.size}px`,\r\n            height: `${star.size}px`,\r\n          }}\r\n          animate={{\r\n            opacity: [star.opacity, star.opacity * 0.3, star.opacity],\r\n            scale: [1, 1.2, 1],\r\n          }}\r\n          transition={{\r\n            duration: Math.random() * 3 + 2,\r\n            repeat: Infinity,\r\n            ease: \"easeInOut\",\r\n          }}\r\n        />\r\n      ))}\r\n      \r\n      {/* Animated grid lines */}\r\n      <motion.div\r\n        className=\"absolute inset-0\"\r\n        style={{\r\n          backgroundImage: `\r\n            linear-gradient(rgba(16, 185, 129, 0.1) 1px, transparent 1px),\r\n            linear-gradient(90deg, rgba(16, 185, 129, 0.1) 1px, transparent 1px)\r\n          `,\r\n          backgroundSize: '50px 50px',\r\n        }}\r\n        animate={{\r\n          backgroundPosition: ['0px 0px', '50px 50px'],\r\n        }}\r\n        transition={{\r\n          duration: 20,\r\n          repeat: Infinity,\r\n          ease: \"linear\",\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n// Glitch effect component\r\ninterface GlitchTextProps {\r\n  children: React.ReactNode;\r\n  intensity?: 'low' | 'medium' | 'high';\r\n  trigger?: boolean;\r\n}\r\n\r\nexport function GlitchText({ children, intensity = 'medium', trigger = false }: GlitchTextProps) {\r\n  const controls = useAnimation();\r\n\r\n  useEffect(() => {\r\n    if (trigger) {\r\n      const glitchAnimation = async () => {\r\n        const iterations = intensity === 'low' ? 3 : intensity === 'medium' ? 5 : 8;\r\n        \r\n        for (let i = 0; i < iterations; i++) {\r\n          await controls.start({\r\n            x: [0, -2, 2, -1, 1, 0],\r\n            textShadow: [\r\n              '0 0 0 transparent',\r\n              '2px 0 0 #ff0040, -2px 0 0 #00ff41',\r\n              '-2px 0 0 #ff0040, 2px 0 0 #00ff41',\r\n              '0 0 0 transparent'\r\n            ],\r\n            transition: { duration: 0.1 }\r\n          });\r\n        }\r\n      };\r\n      \r\n      glitchAnimation();\r\n    }\r\n  }, [trigger, intensity, controls]);\r\n\r\n  return (\r\n    <motion.div animate={controls} className=\"inline-block\">\r\n      {children}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n// Containment breach effect\r\nexport function ContainmentBreachEffect({ isActive }: { isActive: boolean }) {\r\n  return (\r\n    <AnimatePresence>\r\n      {isActive && (\r\n        <>\r\n          {/* Red alert overlay */}\r\n          <motion.div\r\n            className=\"fixed inset-0 bg-red-600/20 pointer-events-none z-30\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ \r\n              opacity: [0, 0.8, 0, 0.8, 0],\r\n            }}\r\n            exit={{ opacity: 0 }}\r\n            transition={{ \r\n              duration: 2,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n          />\r\n          \r\n          {/* Screen shake effect */}\r\n          <motion.div\r\n            className=\"fixed inset-0 pointer-events-none z-20\"\r\n            animate={{\r\n              x: [0, -5, 5, -3, 3, 0],\r\n              y: [0, -2, 2, -1, 1, 0],\r\n            }}\r\n            transition={{\r\n              duration: 0.5,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n          />\r\n          \r\n          {/* Alert borders */}\r\n          <motion.div\r\n            className=\"fixed inset-0 border-4 border-red-500 pointer-events-none z-25\"\r\n            animate={{\r\n              borderColor: ['#ef4444', '#7f1d1d', '#ef4444'],\r\n            }}\r\n            transition={{\r\n              duration: 1,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\"\r\n            }}\r\n          />\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// Holographic display effect\r\ninterface HologramProps {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  flicker?: boolean;\r\n}\r\n\r\nexport function Hologram({ children, className = '', flicker = true }: HologramProps) {\r\n  return (\r\n    <motion.div\r\n      className={`relative ${className}`}\r\n      animate={flicker ? {\r\n        opacity: [1, 0.8, 1, 0.9, 1],\r\n      } : {}}\r\n      transition={flicker ? {\r\n        duration: 2,\r\n        repeat: Infinity,\r\n        ease: \"easeInOut\"\r\n      } : {}}\r\n    >\r\n      {/* Hologram content */}\r\n      <div className=\"relative z-10 text-cyan-400\">\r\n        {children}\r\n      </div>\r\n      \r\n      {/* Scan lines */}\r\n      <div \r\n        className=\"absolute inset-0 pointer-events-none\"\r\n        style={{\r\n          background: `repeating-linear-gradient(\r\n            0deg,\r\n            transparent,\r\n            transparent 2px,\r\n            rgba(6, 182, 212, 0.1) 2px,\r\n            rgba(6, 182, 212, 0.1) 4px\r\n          )`\r\n        }}\r\n      />\r\n      \r\n      {/* Glow effect */}\r\n      <div className=\"absolute inset-0 bg-cyan-400/10 rounded blur-sm -z-10\" />\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n// Energy pulse effect for facilities\r\nexport function EnergyPulse({ isActive, color = '#10b981' }: { isActive: boolean; color?: string }) {\r\n  return (\r\n    <AnimatePresence>\r\n      {isActive && (\r\n        <motion.div\r\n          className=\"absolute inset-0 rounded-full border-2 pointer-events-none\"\r\n          style={{ borderColor: color }}\r\n          initial={{ scale: 1, opacity: 1 }}\r\n          animate={{ \r\n            scale: [1, 2, 3],\r\n            opacity: [1, 0.5, 0]\r\n          }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{\r\n            duration: 2,\r\n            repeat: Infinity,\r\n            ease: \"easeOut\"\r\n          }}\r\n        />\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// Matrix-style digital rain\r\nexport function DigitalRain() {\r\n  const [drops, setDrops] = useState<Array<{ id: string; x: number; chars: string[]; speed: number }>>([]);\r\n\r\n  useEffect(() => {\r\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()'.split('');\r\n    const columns = Math.floor(window.innerWidth / 20);\r\n    \r\n    const newDrops = Array.from({ length: columns }, (_, i) => ({\r\n      id: `drop-${i}`,\r\n      x: i * 20,\r\n      chars: Array.from({ length: Math.floor(Math.random() * 20) + 10 }, () => \r\n        chars[Math.floor(Math.random() * chars.length)]\r\n      ),\r\n      speed: Math.random() * 2 + 1\r\n    }));\r\n    \r\n    setDrops(newDrops);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 overflow-hidden pointer-events-none z-0 opacity-20\">\r\n      {drops.map((drop) => (\r\n        <motion.div\r\n          key={drop.id}\r\n          className=\"absolute text-green-400 font-mono text-sm\"\r\n          style={{ left: drop.x }}\r\n          animate={{\r\n            y: [-100, window.innerHeight + 100],\r\n          }}\r\n          transition={{\r\n            duration: 15 / drop.speed,\r\n            repeat: Infinity,\r\n            ease: \"linear\",\r\n          }}\r\n        >\r\n          {drop.chars.map((char, index) => (\r\n            <motion.div\r\n              key={index}\r\n              animate={{\r\n                opacity: [1, 0.3, 1],\r\n              }}\r\n              transition={{\r\n                duration: 0.5,\r\n                repeat: Infinity,\r\n                delay: index * 0.1,\r\n              }}\r\n            >\r\n              {char}\r\n            </motion.div>\r\n          ))}\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Morphing blob effect\r\nexport function MorphingBlob({ className = '' }: { className?: string }) {\r\n  return (\r\n    <motion.div\r\n      className={`absolute rounded-full bg-gradient-to-r from-purple-500/30 to-blue-500/30 blur-xl ${className}`}\r\n      animate={{\r\n        scale: [1, 1.2, 0.8, 1],\r\n        borderRadius: [\"50%\", \"40%\", \"60%\", \"50%\"],\r\n        x: [0, 50, -30, 0],\r\n        y: [0, -20, 30, 0],\r\n      }}\r\n      transition={{\r\n        duration: 8,\r\n        repeat: Infinity,\r\n        ease: \"easeInOut\"\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n// Typewriter effect\r\ninterface TypewriterProps {\r\n  text: string;\r\n  speed?: number;\r\n  className?: string;\r\n  onComplete?: () => void;\r\n}\r\n\r\nexport function Typewriter({ text, speed = 50, className = '', onComplete }: TypewriterProps) {\r\n  const [displayText, setDisplayText] = useState('');\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (currentIndex < text.length) {\r\n      const timer = setTimeout(() => {\r\n        setDisplayText(prev => prev + text[currentIndex]);\r\n        setCurrentIndex(prev => prev + 1);\r\n      }, speed);\r\n\r\n      return () => clearTimeout(timer);\r\n    } else if (onComplete) {\r\n      onComplete();\r\n    }\r\n  }, [currentIndex, text, speed, onComplete]);\r\n\r\n  return (\r\n    <span className={className}>\r\n      {displayText}\r\n      <motion.span\r\n        animate={{ opacity: [1, 0] }}\r\n        transition={{ duration: 0.5, repeat: Infinity }}\r\n        className=\"inline-block w-2 h-5 bg-current ml-1\"\r\n      />\r\n    </span>\r\n  );\r\n}\r\n\r\n// Lightning effect\r\nexport function Lightning({ isActive }: { isActive: boolean }) {\r\n  return (\r\n    <AnimatePresence>\r\n      {isActive && (\r\n        <motion.div\r\n          className=\"fixed inset-0 pointer-events-none z-50\"\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: [0, 1, 0] }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{ duration: 0.2 }}\r\n        >\r\n          <svg className=\"w-full h-full\">\r\n            <motion.path\r\n              d=\"M100,50 L200,150 L150,200 L300,400\"\r\n              stroke=\"#ffffff\"\r\n              strokeWidth=\"3\"\r\n              fill=\"none\"\r\n              initial={{ pathLength: 0 }}\r\n              animate={{ pathLength: 1 }}\r\n              transition={{ duration: 0.1 }}\r\n              filter=\"url(#glow)\"\r\n            />\r\n            <defs>\r\n              <filter id=\"glow\">\r\n                <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\"/>\r\n                <feMerge> \r\n                  <feMergeNode in=\"coloredBlur\"/>\r\n                  <feMergeNode in=\"SourceGraphic\"/>\r\n                </feMerge>\r\n              </filter>\r\n            </defs>\r\n          </svg>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\n// Hook for managing particle effects\r\nexport function useParticleEffect() {\r\n  const [particles, setParticles] = useState<Particle[]>([]);\r\n\r\n  const createParticles = (\r\n    x: number, \r\n    y: number, \r\n    count: number, \r\n    type: Particle['type'],\r\n    color?: string\r\n  ) => {\r\n    const newParticles: Particle[] = Array.from({ length: count }, (_, i) => ({\r\n      id: `particle-${Date.now()}-${i}`,\r\n      x,\r\n      y,\r\n      vx: (Math.random() - 0.5) * 100,\r\n      vy: (Math.random() - 0.5) * 100,\r\n      life: 0,\r\n      maxLife: Math.random() * 2000 + 1000,\r\n      size: Math.random() * 1.5 + 0.5,\r\n      color: color || (type === 'spark' ? '#fbbf24' : type === 'acid' ? '#10b981' : '#ef4444'),\r\n      type\r\n    }));\r\n\r\n    setParticles(prev => [...prev, ...newParticles]);\r\n\r\n    // Remove particles after their lifetime\r\n    newParticles.forEach(particle => {\r\n      setTimeout(() => {\r\n        setParticles(prev => prev.filter(p => p.id !== particle.id));\r\n      }, particle.maxLife);\r\n    });\r\n  };\r\n\r\n  return {\r\n    particles,\r\n    createParticles,\r\n    ParticleRenderer: () => <ParticleSystem particles={particles} />\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\CollapsiblePanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\ContextMenu.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\n\r\ninterface ContextMenuItem {\r\n  id: string;\r\n  label: string;\r\n  icon?: string;\r\n  action: () => void;\r\n  disabled?: boolean;\r\n  destructive?: boolean;\r\n}\r\n\r\ninterface ContextMenuProps {\r\n  isOpen: boolean;\r\n  position: { x: number; y: number };\r\n  items: ContextMenuItem[];\r\n  onClose: () => void;\r\n}\r\n\r\nexport function ContextMenu({ isOpen, position, items, onClose }: ContextMenuProps) {\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    const handleEscape = (event: KeyboardEvent) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n      document.addEventListener('keydown', handleEscape);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('keydown', handleEscape);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  // Adjust position to prevent menu from going off-screen\r\n  const adjustedPosition = () => {\r\n    if (!menuRef.current) return position;\r\n\r\n    const rect = menuRef.current.getBoundingClientRect();\r\n    const viewport = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    };\r\n\r\n    let { x, y } = position;\r\n\r\n    // Adjust horizontal position\r\n    if (x + rect.width > viewport.width) {\r\n      x = viewport.width - rect.width - 10;\r\n    }\r\n\r\n    // Adjust vertical position\r\n    if (y + rect.height > viewport.height) {\r\n      y = viewport.height - rect.height - 10;\r\n    }\r\n\r\n    return { x: Math.max(10, x), y: Math.max(10, y) };\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const finalPosition = adjustedPosition();\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div className=\"fixed inset-0 z-40\" />\r\n\r\n      {/* Menu */}\r\n      <div\r\n        ref={menuRef}\r\n        className=\"fixed z-50 bg-slate-800 border border-slate-600 rounded-lg shadow-xl py-2 min-w-48\"\r\n        style={{\r\n          left: finalPosition.x,\r\n          top: finalPosition.y,\r\n        }}\r\n      >\r\n        {items.map((item) => (\r\n          <button\r\n            key={item.id}\r\n            onClick={() => {\r\n              if (!item.disabled) {\r\n                item.action();\r\n                onClose();\r\n              }\r\n            }}\r\n            disabled={item.disabled}\r\n            className={`\r\n              w-full px-4 py-2 text-left text-sm transition-colors\r\n              flex items-center gap-3\r\n              ${item.disabled\r\n                ? 'text-slate-500 cursor-not-allowed'\r\n                : item.destructive\r\n                ? 'text-red-400 hover:bg-red-400/10'\r\n                : 'text-slate-200 hover:bg-slate-700'\r\n              }\r\n            `}\r\n          >\r\n            {item.icon && (\r\n              <span className=\"text-lg leading-none\">{item.icon}</span>\r\n            )}\r\n            <span>{item.label}</span>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\FloatingText.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":83,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":83,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\ninterface FloatingTextItem {\r\n  id: string;\r\n  text: string;\r\n  color: string;\r\n  position: { x: number; y: number };\r\n  duration: number;\r\n  size?: 'sm' | 'md' | 'lg';\r\n}\r\n\r\ninterface FloatingTextProps {\r\n  items: FloatingTextItem[];\r\n  onAnimationEnd: (id: string) => void;\r\n}\r\n\r\nexport function FloatingText({ items, onAnimationEnd }: FloatingTextProps) {\r\n  return (\r\n    <div className=\"fixed inset-0 pointer-events-none z-30\">\r\n      {items.map((item) => (\r\n        <FloatingTextItem\r\n          key={item.id}\r\n          item={item}\r\n          onAnimationEnd={onAnimationEnd}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FloatingTextItem({\r\n  item,\r\n  onAnimationEnd\r\n}: {\r\n  item: FloatingTextItem;\r\n  onAnimationEnd: (id: string) => void;\r\n}) {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsVisible(false);\r\n      setTimeout(() => onAnimationEnd(item.id), 200); // Allow fade out animation\r\n    }, item.duration);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [item.duration, item.id, onAnimationEnd]);\r\n\r\n  const getSizeClasses = () => {\r\n    switch (item.size) {\r\n      case 'sm':\r\n        return 'text-sm';\r\n      case 'lg':\r\n        return 'text-lg';\r\n      default:\r\n        return 'text-base';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`\r\n        absolute font-bold font-mono select-none\r\n        ${getSizeClasses()}\r\n        ${item.color}\r\n        ${isVisible\r\n          ? 'animate-[float_2s_ease-out_forwards]'\r\n          : 'animate-[fadeOut_0.2s_ease-out_forwards]'\r\n        }\r\n      `}\r\n      style={{\r\n        left: item.position.x,\r\n        top: item.position.y,\r\n        textShadow: '1px 1px 2px rgba(0,0,0,0.8)',\r\n      }}\r\n    >\r\n      {item.text}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Hook for managing floating text\r\nexport function useFloatingText() {\r\n  const [floatingTexts, setFloatingTexts] = useState<FloatingTextItem[]>([]);\r\n\r\n  const addFloatingText = (\r\n    text: string,\r\n    position: { x: number; y: number },\r\n    color: string = 'text-white',\r\n    duration: number = 2000,\r\n    size: 'sm' | 'md' | 'lg' = 'md'\r\n  ) => {\r\n    const id = `floating-${Date.now()}-${Math.random()}`;\r\n\r\n    setFloatingTexts(prev => [...prev, {\r\n      id,\r\n      text,\r\n      color,\r\n      position,\r\n      duration,\r\n      size,\r\n    }]);\r\n  };\r\n\r\n  const removeFloatingText = (id: string) => {\r\n    setFloatingTexts(prev => prev.filter(item => item.id !== id));\r\n  };\r\n\r\n  // Helper to add resource change feedback\r\n  const addResourceChange = (\r\n    resource: string,\r\n    amount: number,\r\n    element?: HTMLElement\r\n  ) => {\r\n    let color = 'text-white';\r\n    let prefix = '';\r\n\r\n    if (amount > 0) {\r\n      color = 'text-green-400';\r\n      prefix = '+';\r\n    } else if (amount < 0) {\r\n      color = 'text-red-400';\r\n    }\r\n\r\n    // Get position from element or use center of screen\r\n    let position = { x: window.innerWidth / 2, y: window.innerHeight / 2 };\r\n\r\n    if (element) {\r\n      const rect = element.getBoundingClientRect();\r\n      position = {\r\n        x: rect.left + rect.width / 2,\r\n        y: rect.top + rect.height / 2,\r\n      };\r\n    }\r\n\r\n    // Add some randomness to avoid overlap\r\n    position.x += (Math.random() - 0.5) * 100;\r\n    position.y += (Math.random() - 0.5) * 50;\r\n\r\n    const icon = getResourceIcon(resource);\r\n    const text = `${prefix}${Math.abs(amount)} ${icon}`;\r\n\r\n    addFloatingText(text, position, color, 2000, amount > 100 ? 'lg' : 'md');\r\n  };\r\n\r\n  const getResourceIcon = (resource: string) => {\r\n    const icons: Record<string, string> = {\r\n      credits: 'üí∞',\r\n      power: '‚ö°',\r\n      research: 'üî¨',\r\n      visitors: 'üë•',\r\n    };\r\n    return icons[resource.toLowerCase()] || '';\r\n  };\r\n\r\n  return {\r\n    floatingTexts,\r\n    addFloatingText,\r\n    removeFloatingText,\r\n    addResourceChange,\r\n    FloatingTextComponent: () => (\r\n      <FloatingText\r\n        items={floatingTexts}\r\n        onAnimationEnd={removeFloatingText}\r\n      />\r\n    ),\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\KeyboardShortcuts.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'paused' is assigned a value but never used.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'shortcuts' array makes the dependencies of useCallback Hook (at line 181) change on every render. To fix this, wrap the initialization of 'shortcuts' in its own useMemo() Hook.","line":32,"column":9,"nodeType":"VariableDeclarator","endLine":149,"endColumn":4},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'shortcuts' array makes the dependencies of useCallback Hook (at line 203) change on every render. To fix this, wrap the initialization of 'shortcuts' in its own useMemo() Hook.","line":32,"column":9,"nodeType":"VariableDeclarator","endLine":149,"endColumn":4},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":217,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":217,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useCallback } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\n\r\ninterface KeyboardShortcut {\r\n  key: string;\r\n  ctrlKey?: boolean;\r\n  shiftKey?: boolean;\r\n  altKey?: boolean;\r\n  action: () => void;\r\n  description: string;\r\n  category: 'game' | 'navigation' | 'building';\r\n}\r\n\r\nexport function KeyboardShortcuts() {\r\n  const {\r\n    paused,\r\n    togglePause,\r\n    reset,\r\n    quickSave,\r\n    quickLoad,\r\n    selectedFacility,\r\n    selectedSpecies,\r\n    selectFacility,\r\n    selectSpecies,\r\n    addStatusMessage,\r\n    undo,\r\n    redo,\r\n    canUndo,\r\n    canRedo\r\n  } = useGameStore();\r\n\r\n  const shortcuts: KeyboardShortcut[] = [\r\n    // Game Controls\r\n    {\r\n      key: ' ',\r\n      action: () => togglePause(),\r\n      description: 'Toggle Pause',\r\n      category: 'game'\r\n    },\r\n    {\r\n      key: 'r',\r\n      ctrlKey: true,\r\n      action: () => {\r\n        if (confirm('Reset game? All progress will be lost.')) {\r\n          reset();\r\n        }\r\n      },\r\n      description: 'Reset Game',\r\n      category: 'game'\r\n    },\r\n    \r\n    // Save/Load\r\n    {\r\n      key: 's',\r\n      ctrlKey: true,\r\n      action: () => quickSave(),\r\n      description: 'Quick Save',\r\n      category: 'game'\r\n    },\r\n    {\r\n      key: 'l',\r\n      ctrlKey: true,\r\n      action: () => quickLoad(),\r\n      description: 'Quick Load',\r\n      category: 'game'\r\n    },\r\n\r\n    // Undo/Redo\r\n    {\r\n      key: 'z',\r\n      ctrlKey: true,\r\n      action: () => {\r\n        if (canUndo()) {\r\n          undo();\r\n          addStatusMessage('Action undone', 'info');\r\n        }\r\n      },\r\n      description: 'Undo',\r\n      category: 'building'\r\n    },\r\n    {\r\n      key: 'y',\r\n      ctrlKey: true,\r\n      action: () => {\r\n        if (canRedo()) {\r\n          redo();\r\n          addStatusMessage('Action redone', 'info');\r\n        }\r\n      },\r\n      description: 'Redo',\r\n      category: 'building'\r\n    },\r\n\r\n    // Building Mode\r\n    {\r\n      key: 'Escape',\r\n      action: () => {\r\n        if (selectedFacility || selectedSpecies) {\r\n          selectFacility(null);\r\n          selectSpecies(null);\r\n          addStatusMessage('Selection cleared', 'info');\r\n        }\r\n      },\r\n      description: 'Clear Selection',\r\n      category: 'building'\r\n    },\r\n    \r\n    // Number keys for quick facility selection\r\n    {\r\n      key: '1',\r\n      action: () => {\r\n        // Will be implemented with facility quick select\r\n        addStatusMessage('Quick select: Research Lab (Not implemented)', 'info');\r\n      },\r\n      description: 'Quick Select Research Lab',\r\n      category: 'building'\r\n    },\r\n    {\r\n      key: '2',\r\n      action: () => {\r\n        addStatusMessage('Quick select: Hatchery (Not implemented)', 'info');\r\n      },\r\n      description: 'Quick Select Hatchery',\r\n      category: 'building'\r\n    },\r\n    {\r\n      key: '3',\r\n      action: () => {\r\n        addStatusMessage('Quick select: Containment Unit (Not implemented)', 'info');\r\n      },\r\n      description: 'Quick Select Containment Unit',\r\n      category: 'building'\r\n    },\r\n    \r\n    // Help\r\n    {\r\n      key: 'h',\r\n      action: () => showHelpDialog(),\r\n      description: 'Show Help',\r\n      category: 'navigation'\r\n    },\r\n    {\r\n      key: '?',\r\n      shiftKey: true,\r\n      action: () => showHelpDialog(),\r\n      description: 'Show Help',\r\n      category: 'navigation'\r\n    }\r\n  ];\r\n\r\n  const showHelpDialog = useCallback(() => {\r\n    const helpContent = shortcuts\r\n      .reduce((acc, shortcut) => {\r\n        if (!acc[shortcut.category]) {\r\n          acc[shortcut.category] = [];\r\n        }\r\n        acc[shortcut.category].push(shortcut);\r\n        return acc;\r\n      }, {} as Record<string, KeyboardShortcut[]>);\r\n\r\n    const formatKey = (shortcut: KeyboardShortcut) => {\r\n      const parts = [];\r\n      if (shortcut.ctrlKey) parts.push('Ctrl');\r\n      if (shortcut.shiftKey) parts.push('Shift');\r\n      if (shortcut.altKey) parts.push('Alt');\r\n      parts.push(shortcut.key === ' ' ? 'Space' : shortcut.key.toUpperCase());\r\n      return parts.join(' + ');\r\n    };\r\n\r\n    const helpText = Object.entries(helpContent)\r\n      .map(([category, shortcuts]) => {\r\n        const categoryName = category.charAt(0).toUpperCase() + category.slice(1);\r\n        const shortcutList = shortcuts\r\n          .map(s => `  ${formatKey(s)} - ${s.description}`)\r\n          .join('\\n');\r\n        return `${categoryName}:\\n${shortcutList}`;\r\n      })\r\n      .join('\\n\\n');\r\n\r\n    alert(`Keyboard Shortcuts:\\n\\n${helpText}`);\r\n  }, [shortcuts]);\r\n\r\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\r\n    // Don't trigger shortcuts when typing in inputs\r\n    if (event.target instanceof HTMLInputElement || \r\n        event.target instanceof HTMLTextAreaElement ||\r\n        event.target instanceof HTMLSelectElement) {\r\n      return;\r\n    }\r\n\r\n    const matchingShortcut = shortcuts.find(shortcut => {\r\n      return shortcut.key.toLowerCase() === event.key.toLowerCase() &&\r\n             !!shortcut.ctrlKey === event.ctrlKey &&\r\n             !!shortcut.shiftKey === event.shiftKey &&\r\n             !!shortcut.altKey === event.altKey;\r\n    });\r\n\r\n    if (matchingShortcut) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      matchingShortcut.action();\r\n    }\r\n  }, [shortcuts]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleKeyDown]);\r\n\r\n  // This component doesn't render anything visible\r\n  return null;\r\n}\r\n\r\n// Hook for components that want to register custom shortcuts\r\nexport function useKeyboardShortcut(\r\n  key: string,\r\n  action: () => void,\r\n  options: {\r\n    ctrlKey?: boolean;\r\n    shiftKey?: boolean;\r\n    altKey?: boolean;\r\n    enabled?: boolean;\r\n  } = {}\r\n) {\r\n  const { enabled = true, ctrlKey = false, shiftKey = false, altKey = false } = options;\r\n\r\n  useEffect(() => {\r\n    if (!enabled) return;\r\n\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      // Don't trigger when typing in inputs\r\n      if (event.target instanceof HTMLInputElement || \r\n          event.target instanceof HTMLTextAreaElement ||\r\n          event.target instanceof HTMLSelectElement) {\r\n        return;\r\n      }\r\n\r\n      if (event.key.toLowerCase() === key.toLowerCase() &&\r\n          event.ctrlKey === ctrlKey &&\r\n          event.shiftKey === shiftKey &&\r\n          event.altKey === altKey) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        action();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [key, action, enabled, ctrlKey, shiftKey, altKey]);\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\MobileOptimization.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[642,645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[642,645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3980,3983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3980,3983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":369,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":369,"endColumn":37},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":395,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":395,"endColumn":33},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":432,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":432,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion, PanInfo } from 'framer-motion';\r\n\r\n// Touch controls for mobile devices\r\ninterface TouchControlsProps {\r\n  onMove?: (direction: 'up' | 'down' | 'left' | 'right') => void;\r\n  onAction?: () => void;\r\n  onSecondaryAction?: () => void;\r\n  className?: string;\r\n}\r\n\r\nexport function TouchControls({ \r\n  onMove, \r\n  onAction, \r\n  onSecondaryAction, \r\n  className = '' \r\n}: TouchControlsProps) {\r\n  const [joystickPosition, setJoystickPosition] = useState({ x: 0, y: 0 });\r\n  const joystickRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleJoystickDrag = (event: any, info: PanInfo) => {\r\n    const maxDistance = 40;\r\n    const distance = Math.sqrt(info.offset.x ** 2 + info.offset.y ** 2);\r\n    \r\n    if (distance <= maxDistance) {\r\n      setJoystickPosition({ x: info.offset.x, y: info.offset.y });\r\n    } else {\r\n      const angle = Math.atan2(info.offset.y, info.offset.x);\r\n      setJoystickPosition({\r\n        x: Math.cos(angle) * maxDistance,\r\n        y: Math.sin(angle) * maxDistance\r\n      });\r\n    }\r\n\r\n    // Trigger movement based on joystick position\r\n    if (onMove && distance > 20) {\r\n      const angle = Math.atan2(info.offset.y, info.offset.x);\r\n      const degrees = (angle * 180) / Math.PI;\r\n      \r\n      if (degrees >= -45 && degrees <= 45) {\r\n        onMove('right');\r\n      } else if (degrees >= 45 && degrees <= 135) {\r\n        onMove('down');\r\n      } else if (degrees >= -135 && degrees <= -45) {\r\n        onMove('up');\r\n      } else {\r\n        onMove('left');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleJoystickEnd = () => {\r\n    setJoystickPosition({ x: 0, y: 0 });\r\n  };\r\n\r\n  return (\r\n    <div className={`fixed bottom-4 left-4 right-4 flex justify-between items-end pointer-events-none z-50 ${className}`}>\r\n      {/* Virtual Joystick */}\r\n      <div className=\"relative pointer-events-auto\">\r\n        <div className=\"w-20 h-20 bg-slate-800/80 rounded-full border-2 border-green-400/50 flex items-center justify-center backdrop-blur-sm\">\r\n          <motion.div\r\n            ref={joystickRef}\r\n            className=\"w-8 h-8 bg-green-400 rounded-full cursor-pointer touch-none\"\r\n            drag\r\n            dragConstraints={{\r\n              top: -40,\r\n              left: -40,\r\n              right: 40,\r\n              bottom: 40,\r\n            }}\r\n            dragElastic={0}\r\n            onDrag={handleJoystickDrag}\r\n            onDragEnd={handleJoystickEnd}\r\n            animate={{\r\n              x: joystickPosition.x,\r\n              y: joystickPosition.y,\r\n            }}\r\n            whileDrag={{ scale: 1.2 }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex gap-3 pointer-events-auto\">\r\n        {onSecondaryAction && (\r\n          <motion.button\r\n            className=\"w-16 h-16 bg-slate-800/80 rounded-full border-2 border-yellow-400/50 flex items-center justify-center text-yellow-400 text-xl font-bold backdrop-blur-sm\"\r\n            whileTap={{ scale: 0.9 }}\r\n            onTouchStart={onSecondaryAction}\r\n          >\r\n            R\r\n          </motion.button>\r\n        )}\r\n        \r\n        {onAction && (\r\n          <motion.button\r\n            className=\"w-16 h-16 bg-slate-800/80 rounded-full border-2 border-red-400/50 flex items-center justify-center text-red-400 text-xl font-bold backdrop-blur-sm\"\r\n            whileTap={{ scale: 0.9 }}\r\n            onTouchStart={onAction}\r\n          >\r\n            üî´\r\n          </motion.button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Swipe gesture handler\r\ninterface SwipeGestureProps {\r\n  onSwipeLeft?: () => void;\r\n  onSwipeRight?: () => void;\r\n  onSwipeUp?: () => void;\r\n  onSwipeDown?: () => void;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function SwipeGesture({ \r\n  onSwipeLeft, \r\n  onSwipeRight, \r\n  onSwipeUp, \r\n  onSwipeDown, \r\n  children, \r\n  className = '' \r\n}: SwipeGestureProps) {\r\n  const handleDragEnd = (event: any, info: PanInfo) => {\r\n    const { offset, velocity } = info;\r\n    const swipeThreshold = 50;\r\n    const velocityThreshold = 500;\r\n\r\n    if (Math.abs(offset.x) > swipeThreshold || Math.abs(velocity.x) > velocityThreshold) {\r\n      if (offset.x > 0 && onSwipeRight) {\r\n        onSwipeRight();\r\n      } else if (offset.x < 0 && onSwipeLeft) {\r\n        onSwipeLeft();\r\n      }\r\n    }\r\n\r\n    if (Math.abs(offset.y) > swipeThreshold || Math.abs(velocity.y) > velocityThreshold) {\r\n      if (offset.y > 0 && onSwipeDown) {\r\n        onSwipeDown();\r\n      } else if (offset.y < 0 && onSwipeUp) {\r\n        onSwipeUp();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      className={className}\r\n      drag\r\n      dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}\r\n      dragElastic={0.2}\r\n      onDragEnd={handleDragEnd}\r\n    >\r\n      {children}\r\n    </motion.div>\r\n  );\r\n}\r\n\r\n// Mobile-optimized modal\r\ninterface MobileModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport function MobileModal({ isOpen, onClose, title, children }: MobileModalProps) {\r\n  const [startY, setStartY] = useState(0);\r\n  const [currentY, setCurrentY] = useState(0);\r\n\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    setStartY(e.touches[0].clientY);\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    setCurrentY(e.touches[0].clientY);\r\n  };\r\n\r\n  const handleTouchEnd = () => {\r\n    if (currentY - startY > 100) {\r\n      onClose();\r\n    }\r\n    setStartY(0);\r\n    setCurrentY(0);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/80 z-50 flex items-end lg:items-center lg:justify-center\">\r\n      <motion.div\r\n        initial={{ y: '100%' }}\r\n        animate={{ y: 0 }}\r\n        exit={{ y: '100%' }}\r\n        transition={{ type: 'spring', damping: 25, stiffness: 500 }}\r\n        className=\"w-full max-h-[90vh] bg-slate-900 rounded-t-2xl lg:rounded-lg lg:max-w-2xl lg:max-h-[80vh] overflow-hidden\"\r\n        onTouchStart={handleTouchStart}\r\n        onTouchMove={handleTouchMove}\r\n        onTouchEnd={handleTouchEnd}\r\n      >\r\n        {/* Drag indicator */}\r\n        <div className=\"flex justify-center py-2 lg:hidden\">\r\n          <div className=\"w-12 h-1 bg-slate-600 rounded-full\" />\r\n        </div>\r\n\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-slate-700\">\r\n          <h2 className=\"text-lg font-bold text-green-400\">{title}</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-slate-400 hover:text-slate-300 text-xl p-2\"\r\n          >\r\n            √ó\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-4 overflow-y-auto max-h-[calc(90vh-80px)]\">\r\n          {children}\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Touch-optimized grid\r\ninterface TouchGridProps {\r\n  items: Array<{ id: string; content: React.ReactNode; onTap?: () => void }>;\r\n  columns?: number;\r\n  className?: string;\r\n}\r\n\r\nexport function TouchGrid({ items, columns = 2, className = '' }: TouchGridProps) {\r\n  return (\r\n    <div \r\n      className={`grid gap-4 ${className}`}\r\n      style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}\r\n    >\r\n      {items.map((item) => (\r\n        <motion.div\r\n          key={item.id}\r\n          className=\"bg-slate-800 rounded-lg p-4 border border-slate-600 min-h-[120px] flex items-center justify-center cursor-pointer\"\r\n          whileTap={{ scale: 0.95 }}\r\n          onTap={item.onTap}\r\n        >\r\n          {item.content}\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Pull-to-refresh component\r\ninterface PullToRefreshProps {\r\n  onRefresh: () => Promise<void>;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function PullToRefresh({ onRefresh, children, className = '' }: PullToRefreshProps) {\r\n  const [pullDistance, setPullDistance] = useState(0);\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n  const [startY, setStartY] = useState(0);\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    if (scrollRef.current?.scrollTop === 0) {\r\n      setStartY(e.touches[0].clientY);\r\n    }\r\n  };\r\n\r\n  const handleTouchMove = (e: React.TouchEvent) => {\r\n    if (startY > 0 && scrollRef.current?.scrollTop === 0) {\r\n      const currentY = e.touches[0].clientY;\r\n      const distance = Math.max(0, (currentY - startY) * 0.5);\r\n      setPullDistance(Math.min(distance, 100));\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = async () => {\r\n    if (pullDistance > 60 && !isRefreshing) {\r\n      setIsRefreshing(true);\r\n      try {\r\n        await onRefresh();\r\n      } finally {\r\n        setIsRefreshing(false);\r\n      }\r\n    }\r\n    setPullDistance(0);\r\n    setStartY(0);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={scrollRef}\r\n      className={`relative overflow-auto ${className}`}\r\n      onTouchStart={handleTouchStart}\r\n      onTouchMove={handleTouchMove}\r\n      onTouchEnd={handleTouchEnd}\r\n    >\r\n      {/* Pull indicator */}\r\n      <motion.div\r\n        className=\"flex items-center justify-center py-2 text-green-400\"\r\n        animate={{ \r\n          height: pullDistance,\r\n          opacity: pullDistance > 0 ? 1 : 0 \r\n        }}\r\n        transition={{ type: 'spring', damping: 25, stiffness: 500 }}\r\n      >\r\n        {isRefreshing ? (\r\n          <div className=\"animate-spin text-xl\">üîÑ</div>\r\n        ) : pullDistance > 60 ? (\r\n          <span className=\"text-sm\">Release to refresh</span>\r\n        ) : pullDistance > 0 ? (\r\n          <span className=\"text-sm\">Pull to refresh</span>\r\n        ) : null}\r\n      </motion.div>\r\n\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Mobile navigation tabs\r\ninterface MobileTabsProps {\r\n  tabs: Array<{ id: string; label: string; icon: string; badge?: number }>;\r\n  activeTab: string;\r\n  onTabChange: (tabId: string) => void;\r\n  className?: string;\r\n}\r\n\r\nexport function MobileTabs({ tabs, activeTab, onTabChange, className = '' }: MobileTabsProps) {\r\n  return (\r\n    <div className={`fixed bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 z-40 lg:hidden ${className}`}>\r\n      <div className=\"grid grid-cols-4 gap-1\">\r\n        {tabs.map((tab) => (\r\n          <motion.button\r\n            key={tab.id}\r\n            className={`\r\n              flex flex-col items-center justify-center py-3 px-2 text-xs font-medium transition-colors\r\n              ${activeTab === tab.id \r\n                ? 'text-green-400 bg-green-400/10' \r\n                : 'text-slate-400 hover:text-slate-300'\r\n              }\r\n            `}\r\n            whileTap={{ scale: 0.95 }}\r\n            onClick={() => onTabChange(tab.id)}\r\n          >\r\n            <div className=\"relative\">\r\n              <span className=\"text-lg\">{tab.icon}</span>\r\n              {tab.badge && tab.badge > 0 && (\r\n                <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n                  {tab.badge > 99 ? '99+' : tab.badge}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <span className=\"mt-1\">{tab.label}</span>\r\n          </motion.button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Device orientation handler\r\nexport function useDeviceOrientation() {\r\n  const [orientation, setOrientation] = useState<'portrait' | 'landscape'>('portrait');\r\n\r\n  useEffect(() => {\r\n    const handleOrientationChange = () => {\r\n      if (window.innerHeight > window.innerWidth) {\r\n        setOrientation('portrait');\r\n      } else {\r\n        setOrientation('landscape');\r\n      }\r\n    };\r\n\r\n    handleOrientationChange();\r\n    window.addEventListener('resize', handleOrientationChange);\r\n    window.addEventListener('orientationchange', handleOrientationChange);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleOrientationChange);\r\n      window.removeEventListener('orientationchange', handleOrientationChange);\r\n    };\r\n  }, []);\r\n\r\n  return orientation;\r\n}\r\n\r\n// Touch feedback hook\r\nexport function useTouchFeedback() {\r\n  const [touchStart, setTouchStart] = useState<{ x: number; y: number } | null>(null);\r\n\r\n  const handleTouchStart = useCallback((e: TouchEvent) => {\r\n    const touch = e.touches[0];\r\n    setTouchStart({ x: touch.clientX, y: touch.clientY });\r\n\r\n    // Add touch feedback\r\n    const ripple = document.createElement('div');\r\n    ripple.className = 'fixed w-4 h-4 bg-green-400/30 rounded-full pointer-events-none z-50 animate-ping';\r\n    ripple.style.left = `${touch.clientX - 8}px`;\r\n    ripple.style.top = `${touch.clientY - 8}px`;\r\n    document.body.appendChild(ripple);\r\n\r\n    setTimeout(() => {\r\n      document.body.removeChild(ripple);\r\n    }, 1000);\r\n  }, []);\r\n\r\n  const handleTouchEnd = useCallback(() => {\r\n    setTouchStart(null);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('touchstart', handleTouchStart);\r\n    document.addEventListener('touchend', handleTouchEnd);\r\n\r\n    return () => {\r\n      document.removeEventListener('touchstart', handleTouchStart);\r\n      document.removeEventListener('touchend', handleTouchEnd);\r\n    };\r\n  }, [handleTouchStart, handleTouchEnd]);\r\n\r\n  return { touchStart };\r\n}\r\n\r\n// Mobile-specific viewport management\r\nexport function useMobileViewport() {\r\n  useEffect(() => {\r\n    // Prevent zoom on double tap\r\n    let lastTouchEnd = 0;\r\n    \r\n    const preventZoom = (e: TouchEvent) => {\r\n      const now = Date.now();\r\n      if (now - lastTouchEnd <= 300) {\r\n        e.preventDefault();\r\n      }\r\n      lastTouchEnd = now;\r\n    };\r\n\r\n    // Set viewport meta tag for mobile\r\n    const viewport = document.querySelector('meta[name=\"viewport\"]');\r\n    if (viewport) {\r\n      viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');\r\n    }\r\n\r\n    // Prevent pull-to-refresh on body\r\n    const preventPullToRefresh = (e: TouchEvent) => {\r\n      if (e.touches.length === 1 && window.scrollY === 0) {\r\n        e.preventDefault();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('touchend', preventZoom, { passive: false });\r\n    document.body.addEventListener('touchstart', preventPullToRefresh, { passive: false });\r\n    document.body.addEventListener('touchmove', preventPullToRefresh, { passive: false });\r\n\r\n    return () => {\r\n      document.removeEventListener('touchend', preventZoom);\r\n      document.body.removeEventListener('touchstart', preventPullToRefresh);\r\n      document.body.removeEventListener('touchmove', preventPullToRefresh);\r\n    };\r\n  }, []);\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\NotificationSystem.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'removeNotification'. Either include it or remove the dependency array.","line":89,"column":6,"nodeType":"ArrayExpression","endLine":89,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [defaultDuration, maxNotifications, removeNotification]","fix":{"range":[2390,2425],"text":"[defaultDuration, maxNotifications, removeNotification]"}}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":105,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":105,"endColumn":55,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2864,2914],"text":"// @ts-expect-error - Adding to window for global access"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":109,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":109,"endColumn":20,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2995,3008],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":211,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":211,"endColumn":33},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":213,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":213,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6740,6753],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":215,"column":7,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":215,"endColumn":20,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6796,6809],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\nimport { StatusMessage } from '../../types';\r\n\r\ninterface NotificationSystemProps {\r\n  position?: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' | 'top-center';\r\n  maxNotifications?: number;\r\n  defaultDuration?: number;\r\n}\r\n\r\ninterface NotificationItem extends StatusMessage {\r\n  duration: number;\r\n  isVisible: boolean;\r\n  isExiting: boolean;\r\n}\r\n\r\nconst NOTIFICATION_ICONS = {\r\n  info: '‚ÑπÔ∏è',\r\n  success: '‚úÖ',\r\n  warning: '‚ö†Ô∏è',\r\n  error: '‚ùå'\r\n};\r\n\r\nconst NOTIFICATION_COLORS = {\r\n  info: {\r\n    bg: 'bg-blue-400/20',\r\n    border: 'border-blue-400/30',\r\n    text: 'text-blue-400'\r\n  },\r\n  success: {\r\n    bg: 'bg-green-400/20',\r\n    border: 'border-green-400/30',\r\n    text: 'text-green-400'\r\n  },\r\n  warning: {\r\n    bg: 'bg-yellow-400/20',\r\n    border: 'border-yellow-400/30',\r\n    text: 'text-yellow-400'\r\n  },\r\n  error: {\r\n    bg: 'bg-red-400/20',\r\n    border: 'border-red-400/30',\r\n    text: 'text-red-400'\r\n  }\r\n};\r\n\r\nexport function NotificationSystem({ \r\n  position = 'top-right', \r\n  maxNotifications = 5,\r\n  defaultDuration = 4000 \r\n}: NotificationSystemProps) {\r\n  const [notifications, setNotifications] = useState<NotificationItem[]>([]);\r\n\r\n  // Add notification function that can be called from outside\r\n  const addNotification = useCallback((message: string, type: StatusMessage['type'], duration?: number) => {\r\n    const notification: NotificationItem = {\r\n      id: `notification-${Date.now()}-${Math.random()}`,\r\n      message,\r\n      type,\r\n      timestamp: Date.now(),\r\n      duration: duration ?? defaultDuration,\r\n      isVisible: false,\r\n      isExiting: false\r\n    };\r\n\r\n    setNotifications(prev => {\r\n      const newNotifications = [notification, ...prev];\r\n      \r\n      // Limit number of notifications\r\n      if (newNotifications.length > maxNotifications) {\r\n        return newNotifications.slice(0, maxNotifications);\r\n      }\r\n      \r\n      return newNotifications;\r\n    });\r\n\r\n    // Make visible after a brief delay for animation\r\n    setTimeout(() => {\r\n      setNotifications(prev => \r\n        prev.map(n => n.id === notification.id ? { ...n, isVisible: true } : n)\r\n      );\r\n    }, 10);\r\n\r\n    // Auto remove after duration\r\n    if (notification.duration > 0) {\r\n      setTimeout(() => {\r\n        removeNotification(notification.id);\r\n      }, notification.duration);\r\n    }\r\n  }, [defaultDuration, maxNotifications]);\r\n\r\n  const removeNotification = useCallback((id: string) => {\r\n    // Start exit animation\r\n    setNotifications(prev => \r\n      prev.map(n => n.id === id ? { ...n, isExiting: true } : n)\r\n    );\r\n\r\n    // Remove after animation completes\r\n    setTimeout(() => {\r\n      setNotifications(prev => prev.filter(n => n.id !== id));\r\n    }, 300);\r\n  }, []);\r\n\r\n  // Expose addNotification globally for use in stores\r\n  useEffect(() => {\r\n    // @ts-ignore - Adding to window for global access\r\n    window.addNotification = addNotification;\r\n    \r\n    return () => {\r\n      // @ts-ignore\r\n      delete window.addNotification;\r\n    };\r\n  }, [addNotification]);\r\n\r\n  const getPositionClasses = () => {\r\n    const baseClasses = 'fixed z-50 pointer-events-none';\r\n    \r\n    switch (position) {\r\n      case 'top-right':\r\n        return `${baseClasses} top-4 right-4`;\r\n      case 'top-left':\r\n        return `${baseClasses} top-4 left-4`;\r\n      case 'bottom-right':\r\n        return `${baseClasses} bottom-4 right-4`;\r\n      case 'bottom-left':\r\n        return `${baseClasses} bottom-4 left-4`;\r\n      case 'top-center':\r\n        return `${baseClasses} top-4 left-1/2 transform -translate-x-1/2`;\r\n      default:\r\n        return `${baseClasses} top-4 right-4`;\r\n    }\r\n  };\r\n\r\n  if (notifications.length === 0) return null;\r\n\r\n  return (\r\n    <div className={getPositionClasses()}>\r\n      <div className=\"space-y-2 w-80\">\r\n        {notifications.map((notification) => {\r\n          const colors = NOTIFICATION_COLORS[notification.type];\r\n          const icon = NOTIFICATION_ICONS[notification.type];\r\n          \r\n          return (\r\n            <div\r\n              key={notification.id}\r\n              className={`\r\n                pointer-events-auto\r\n                ${colors.bg} ${colors.border} border rounded-lg p-3\r\n                backdrop-blur-sm shadow-lg\r\n                transition-all duration-300 ease-in-out\r\n                ${notification.isVisible && !notification.isExiting \r\n                  ? 'translate-x-0 opacity-100' \r\n                  : 'translate-x-full opacity-0'\r\n                }\r\n                ${notification.isExiting ? 'translate-x-full opacity-0' : ''}\r\n                hover:scale-105 cursor-pointer\r\n              `}\r\n              onClick={() => removeNotification(notification.id)}\r\n            >\r\n              <div className=\"flex items-start gap-3\">\r\n                <span className=\"text-lg flex-shrink-0 mt-0.5\">\r\n                  {icon}\r\n                </span>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className={`text-sm font-medium ${colors.text}`}>\r\n                    {notification.message}\r\n                  </p>\r\n                  <p className=\"text-xs text-slate-400 mt-1\">\r\n                    {new Date(notification.timestamp).toLocaleTimeString()}\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    removeNotification(notification.id);\r\n                  }}\r\n                  className=\"text-slate-400 hover:text-slate-300 transition-colors flex-shrink-0\"\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              </div>\r\n              \r\n              {/* Progress bar for timed notifications */}\r\n              {notification.duration > 0 && (\r\n                <div className=\"mt-2 h-1 bg-slate-700 rounded-full overflow-hidden\">\r\n                  <div \r\n                    className={`h-full ${colors.text.replace('text-', 'bg-')} transition-all ease-linear`}\r\n                    style={{\r\n                      animation: `shrink ${notification.duration}ms linear`,\r\n                      animationFillMode: 'forwards'\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n      {/* CSS for progress bar animation */}\r\n      <style jsx>{`\r\n        @keyframes shrink {\r\n          from { width: 100%; }\r\n          to { width: 0%; }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Hook for easy access to notifications\r\nexport function useNotifications() {\r\n  const addNotification = useCallback((message: string, type: StatusMessage['type'], duration?: number) => {\r\n    // @ts-ignore\r\n    if (window.addNotification) {\r\n      // @ts-ignore\r\n      window.addNotification(message, type, duration);\r\n    } else {\r\n      console.log(`${type.toUpperCase()}: ${message}`);\r\n    }\r\n  }, []);\r\n\r\n  return { addNotification };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\ParticleSystem.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'animate' and 'createParticles'. Either include them or remove the dependency array.","line":65,"column":6,"nodeType":"ArrayExpression","endLine":65,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [animate, createParticles, isActive]","fix":{"range":[1526,1536],"text":"[animate, createParticles, isActive]"}}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":150,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":150,"endColumn":30},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":201,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":201,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useRef } from 'react';\r\n\r\ninterface Particle {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n  life: number;\r\n  maxLife: number;\r\n  size: number;\r\n  color: string;\r\n  gravity?: number;\r\n  fade?: boolean;\r\n}\r\n\r\ninterface ParticleSystemProps {\r\n  isActive: boolean;\r\n  position: { x: number; y: number };\r\n  config: ParticleConfig;\r\n  duration?: number;\r\n  onComplete?: () => void;\r\n}\r\n\r\ninterface ParticleConfig {\r\n  particleCount: number;\r\n  particleLifespan: number;\r\n  particleSize: { min: number; max: number };\r\n  particleSpeed: { min: number; max: number };\r\n  particleColors: string[];\r\n  gravity?: number;\r\n  spread: number; // How wide the particle spread is (in degrees)\r\n  direction?: number; // Base direction in degrees (0 = right, 90 = up, etc.)\r\n  fade?: boolean;\r\n}\r\n\r\nexport function ParticleSystem({\r\n  isActive,\r\n  position,\r\n  config,\r\n  duration = 3000,\r\n  onComplete\r\n}: ParticleSystemProps) {\r\n  const [particles, setParticles] = useState<Particle[]>([]);\r\n  const animationRef = useRef<number>();\r\n  const startTimeRef = useRef<number>();\r\n\r\n  useEffect(() => {\r\n    if (isActive) {\r\n      startTimeRef.current = Date.now();\r\n      createParticles();\r\n      animate();\r\n    } else {\r\n      setParticles([]);\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (animationRef.current) {\r\n        cancelAnimationFrame(animationRef.current);\r\n      }\r\n    };\r\n  }, [isActive]);\r\n\r\n  const createParticles = () => {\r\n    const newParticles: Particle[] = [];\r\n\r\n    for (let i = 0; i < config.particleCount; i++) {\r\n      const angle = (config.direction || 0) + (Math.random() - 0.5) * config.spread;\r\n      const speed = config.particleSpeed.min + Math.random() * (config.particleSpeed.max - config.particleSpeed.min);\r\n      const size = config.particleSize.min + Math.random() * (config.particleSize.max - config.particleSize.min);\r\n      const color = config.particleColors[Math.floor(Math.random() * config.particleColors.length)];\r\n\r\n      newParticles.push({\r\n        id: `particle-${i}`,\r\n        x: position.x,\r\n        y: position.y,\r\n        vx: Math.cos(angle * Math.PI / 180) * speed,\r\n        vy: Math.sin(angle * Math.PI / 180) * speed,\r\n        life: config.particleLifespan,\r\n        maxLife: config.particleLifespan,\r\n        size,\r\n        color,\r\n        gravity: config.gravity || 0,\r\n        fade: config.fade || false,\r\n      });\r\n    }\r\n\r\n    setParticles(newParticles);\r\n  };\r\n\r\n  const animate = () => {\r\n    setParticles(prevParticles => {\r\n      const currentTime = Date.now();\r\n      const elapsed = currentTime - (startTimeRef.current || 0);\r\n\r\n      if (elapsed >= duration) {\r\n        onComplete?.();\r\n        return [];\r\n      }\r\n\r\n      return prevParticles\r\n        .map(particle => ({\r\n          ...particle,\r\n          x: particle.x + particle.vx,\r\n          y: particle.y + particle.vy,\r\n          vy: particle.vy + (particle.gravity || 0),\r\n          life: particle.life - 1,\r\n        }))\r\n        .filter(particle => particle.life > 0);\r\n    });\r\n\r\n    animationRef.current = requestAnimationFrame(animate);\r\n  };\r\n\r\n  if (!isActive || particles.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 pointer-events-none z-40\">\r\n      {particles.map(particle => {\r\n        const opacity = particle.fade\r\n          ? particle.life / particle.maxLife\r\n          : 1;\r\n\r\n        return (\r\n          <div\r\n            key={particle.id}\r\n            className=\"absolute rounded-full\"\r\n            style={{\r\n              left: particle.x - particle.size / 2,\r\n              top: particle.y - particle.size / 2,\r\n              width: particle.size,\r\n              height: particle.size,\r\n              backgroundColor: particle.color,\r\n              opacity,\r\n              boxShadow: `0 0 ${particle.size}px ${particle.color}`,\r\n            }}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Predefined particle configurations\r\nexport const PARTICLE_CONFIGS = {\r\n  containmentBreach: {\r\n    particleCount: 50,\r\n    particleLifespan: 120,\r\n    particleSize: { min: 2, max: 8 },\r\n    particleSpeed: { min: 2, max: 8 },\r\n    particleColors: ['#ff0040', '#ff4040', '#ff8080', '#ffaa00'],\r\n    gravity: 0.1,\r\n    spread: 360,\r\n    direction: 270, // Up\r\n    fade: true,\r\n  } as ParticleConfig,\r\n\r\n  explosion: {\r\n    particleCount: 75,\r\n    particleLifespan: 100,\r\n    particleSize: { min: 3, max: 12 },\r\n    particleSpeed: { min: 3, max: 12 },\r\n    particleColors: ['#ffaa00', '#ff4040', '#ff0040', '#ffffff'],\r\n    gravity: 0.2,\r\n    spread: 360,\r\n    direction: 0,\r\n    fade: true,\r\n  } as ParticleConfig,\r\n\r\n  sparks: {\r\n    particleCount: 30,\r\n    particleLifespan: 80,\r\n    particleSize: { min: 1, max: 4 },\r\n    particleSpeed: { min: 1, max: 6 },\r\n    particleColors: ['#00ff41', '#00cc33', '#ffffff'],\r\n    gravity: 0.05,\r\n    spread: 90,\r\n    direction: 270, // Up\r\n    fade: true,\r\n  } as ParticleConfig,\r\n\r\n  smoke: {\r\n    particleCount: 25,\r\n    particleLifespan: 200,\r\n    particleSize: { min: 8, max: 20 },\r\n    particleSpeed: { min: 0.5, max: 2 },\r\n    particleColors: ['rgba(100,100,100,0.7)', 'rgba(80,80,80,0.5)', 'rgba(60,60,60,0.3)'],\r\n    gravity: -0.02, // Negative gravity for upward movement\r\n    spread: 45,\r\n    direction: 270, // Up\r\n    fade: true,\r\n  } as ParticleConfig,\r\n};\r\n\r\n// Hook for managing particle effects\r\nexport function useParticles() {\r\n  const [activeEffects, setActiveEffects] = useState<Array<{\r\n    id: string;\r\n    position: { x: number; y: number };\r\n    config: ParticleConfig;\r\n    duration: number;\r\n  }>>([]);\r\n\r\n  const addParticleEffect = (\r\n    position: { x: number; y: number },\r\n    config: ParticleConfig,\r\n    duration: number = 3000\r\n  ) => {\r\n    const id = `effect-${Date.now()}-${Math.random()}`;\r\n    setActiveEffects(prev => [...prev, { id, position, config, duration }]);\r\n  };\r\n\r\n  const removeParticleEffect = (id: string) => {\r\n    setActiveEffects(prev => prev.filter(effect => effect.id !== id));\r\n  };\r\n\r\n  // Convenience methods for common effects\r\n  const triggerContainmentBreach = (position: { x: number; y: number }) => {\r\n    addParticleEffect(position, PARTICLE_CONFIGS.containmentBreach, 4000);\r\n  };\r\n\r\n  const triggerExplosion = (position: { x: number; y: number }) => {\r\n    addParticleEffect(position, PARTICLE_CONFIGS.explosion, 2500);\r\n  };\r\n\r\n  const triggerSparks = (position: { x: number; y: number }) => {\r\n    addParticleEffect(position, PARTICLE_CONFIGS.sparks, 2000);\r\n  };\r\n\r\n  const triggerSmoke = (position: { x: number; y: number }) => {\r\n    addParticleEffect(position, PARTICLE_CONFIGS.smoke, 5000);\r\n  };\r\n\r\n  return {\r\n    activeEffects,\r\n    addParticleEffect,\r\n    removeParticleEffect,\r\n    triggerContainmentBreach,\r\n    triggerExplosion,\r\n    triggerSparks,\r\n    triggerSmoke,\r\n    ParticleSystemComponent: () => (\r\n      <>\r\n        {activeEffects.map(effect => (\r\n          <ParticleSystem\r\n            key={effect.id}\r\n            isActive={true}\r\n            position={effect.position}\r\n            config={effect.config}\r\n            duration={effect.duration}\r\n            onComplete={() => removeParticleEffect(effect.id)}\r\n          />\r\n        ))}\r\n      </>\r\n    ),\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\SettingsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveGame' is assigned a value but never used.","line":37,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":97,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":97,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { Modal } from './Modal';\r\nimport { Button } from './Button';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { saveManager } from '../../utils/saveManager';\r\n\r\ninterface GameSettings {\r\n  autoSave: boolean;\r\n  autoSaveInterval: number;\r\n  gridSize: 'small' | 'medium' | 'large';\r\n  animations: boolean;\r\n  soundEffects: boolean;\r\n  notifications: boolean;\r\n  theme: 'dark' | 'light' | 'high-contrast';\r\n  language: 'en' | 'es' | 'fr' | 'de';\r\n}\r\n\r\ninterface SettingsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst DEFAULT_SETTINGS: GameSettings = {\r\n  autoSave: true,\r\n  autoSaveInterval: 30,\r\n  gridSize: 'medium',\r\n  animations: true,\r\n  soundEffects: true,\r\n  notifications: true,\r\n  theme: 'dark',\r\n  language: 'en'\r\n};\r\n\r\nexport function SettingsModal({ isOpen, onClose }: SettingsModalProps) {\r\n  const [settings, setSettings] = useState<GameSettings>(DEFAULT_SETTINGS);\r\n  const [activeTab, setActiveTab] = useState<'game' | 'display' | 'audio' | 'saves'>('game');\r\n  const { addStatusMessage, saveGame, loadGame } = useGameStore();\r\n\r\n  // Load settings from localStorage on mount\r\n  useEffect(() => {\r\n    const savedSettings = localStorage.getItem('xenomorph-park-settings');\r\n    if (savedSettings) {\r\n      try {\r\n        const parsed = JSON.parse(savedSettings);\r\n        setSettings({ ...DEFAULT_SETTINGS, ...parsed });\r\n      } catch (error) {\r\n        console.error('Failed to load settings:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save settings to localStorage\r\n  const saveSettings = (newSettings: GameSettings) => {\r\n    setSettings(newSettings);\r\n    localStorage.setItem('xenomorph-park-settings', JSON.stringify(newSettings));\r\n    addStatusMessage('Settings saved', 'success');\r\n  };\r\n\r\n  const handleSettingChange = <K extends keyof GameSettings>(\r\n    key: K,\r\n    value: GameSettings[K]\r\n  ) => {\r\n    const newSettings = { ...settings, [key]: value };\r\n    saveSettings(newSettings);\r\n  };\r\n\r\n  const resetSettings = () => {\r\n    if (confirm('Reset all settings to default values?')) {\r\n      saveSettings(DEFAULT_SETTINGS);\r\n    }\r\n  };\r\n\r\n  const exportSettings = () => {\r\n    const dataStr = JSON.stringify(settings, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = 'xenomorph-park-settings.json';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const importSettings = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const imported = JSON.parse(e.target?.result as string);\r\n        saveSettings({ ...DEFAULT_SETTINGS, ...imported });\r\n        addStatusMessage('Settings imported successfully', 'success');\r\n      } catch (error) {\r\n        addStatusMessage('Failed to import settings', 'error');\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const getAllSaves = () => saveManager.getAllSaves();\r\n  const storageInfo = saveManager.getStorageUsage();\r\n\r\n  const tabs = [\r\n    { id: 'game' as const, label: 'üéÆ Game', icon: 'üéÆ' },\r\n    { id: 'display' as const, label: 'üñ•Ô∏è Display', icon: 'üñ•Ô∏è' },\r\n    { id: 'audio' as const, label: 'üîä Audio', icon: 'üîä' },\r\n    { id: 'saves' as const, label: 'üíæ Saves', icon: 'üíæ' }\r\n  ];\r\n\r\n  return (\r\n    <Modal isOpen={isOpen} onClose={onClose} title=\"‚öôÔ∏è Game Settings\">\r\n      <div className=\"min-h-[500px]\">\r\n        {/* Tab Navigation */}\r\n        <div className=\"flex border-b border-slate-600 mb-6\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`px-4 py-2 text-sm font-medium transition-colors ${\r\n                activeTab === tab.id\r\n                  ? 'text-green-400 border-b-2 border-green-400'\r\n                  : 'text-slate-400 hover:text-slate-300'\r\n              }`}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Game Settings Tab */}\r\n        {activeTab === 'game' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-green-400\">Gameplay</h3>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Auto Save</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={settings.autoSave}\r\n                  onChange={(e) => handleSettingChange('autoSave', e.target.checked)}\r\n                  className=\"w-4 h-4 text-green-400 bg-slate-700 border-slate-600 rounded focus:ring-green-400\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Auto Save Interval (seconds)</label>\r\n                <select\r\n                  value={settings.autoSaveInterval}\r\n                  onChange={(e) => handleSettingChange('autoSaveInterval', parseInt(e.target.value))}\r\n                  className=\"bg-slate-700 border border-slate-600 text-slate-300 rounded px-2 py-1\"\r\n                  disabled={!settings.autoSave}\r\n                >\r\n                  <option value={15}>15 seconds</option>\r\n                  <option value={30}>30 seconds</option>\r\n                  <option value={60}>1 minute</option>\r\n                  <option value={300}>5 minutes</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Grid Size</label>\r\n                <select\r\n                  value={settings.gridSize}\r\n                  onChange={(e) => handleSettingChange('gridSize', e.target.value as GameSettings['gridSize'])}\r\n                  className=\"bg-slate-700 border border-slate-600 text-slate-300 rounded px-2 py-1\"\r\n                >\r\n                  <option value=\"small\">Small (6x6)</option>\r\n                  <option value=\"medium\">Medium (8x8)</option>\r\n                  <option value=\"large\">Large (10x10)</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Language</label>\r\n                <select\r\n                  value={settings.language}\r\n                  onChange={(e) => handleSettingChange('language', e.target.value as GameSettings['language'])}\r\n                  className=\"bg-slate-700 border border-slate-600 text-slate-300 rounded px-2 py-1\"\r\n                >\r\n                  <option value=\"en\">English</option>\r\n                  <option value=\"es\">Espa√±ol</option>\r\n                  <option value=\"fr\">Fran√ßais</option>\r\n                  <option value=\"de\">Deutsch</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Display Settings Tab */}\r\n        {activeTab === 'display' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-green-400\">Visual</h3>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Theme</label>\r\n                <select\r\n                  value={settings.theme}\r\n                  onChange={(e) => handleSettingChange('theme', e.target.value as GameSettings['theme'])}\r\n                  className=\"bg-slate-700 border border-slate-600 text-slate-300 rounded px-2 py-1\"\r\n                >\r\n                  <option value=\"dark\">Dark</option>\r\n                  <option value=\"light\">Light</option>\r\n                  <option value=\"high-contrast\">High Contrast</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Animations</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={settings.animations}\r\n                  onChange={(e) => handleSettingChange('animations', e.target.checked)}\r\n                  className=\"w-4 h-4 text-green-400 bg-slate-700 border-slate-600 rounded focus:ring-green-400\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Notifications</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={settings.notifications}\r\n                  onChange={(e) => handleSettingChange('notifications', e.target.checked)}\r\n                  className=\"w-4 h-4 text-green-400 bg-slate-700 border-slate-600 rounded focus:ring-green-400\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Audio Settings Tab */}\r\n        {activeTab === 'audio' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-green-400\">Sound</h3>\r\n              \r\n              <div className=\"flex items-center justify-between\">\r\n                <label className=\"text-slate-300\">Sound Effects</label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={settings.soundEffects}\r\n                  onChange={(e) => handleSettingChange('soundEffects', e.target.checked)}\r\n                  className=\"w-4 h-4 text-green-400 bg-slate-700 border-slate-600 rounded focus:ring-green-400\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"text-sm text-slate-400\">\r\n                <p>üîä Sound system integration coming soon</p>\r\n                <p>This will include ambient sounds, UI feedback, and alert sounds</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Save Management Tab */}\r\n        {activeTab === 'saves' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"text-lg font-semibold text-green-400\">Save Management</h3>\r\n              \r\n              <div className=\"bg-slate-800 rounded p-3\">\r\n                <p className=\"text-sm text-slate-300 mb-2\">Storage Usage</p>\r\n                <div className=\"w-full bg-slate-700 rounded-full h-2\">\r\n                  <div \r\n                    className=\"bg-green-400 h-2 rounded-full transition-all\"\r\n                    style={{ width: `${Math.min(storageInfo.percentage, 100)}%` }}\r\n                  />\r\n                </div>\r\n                <p className=\"text-xs text-slate-400 mt-1\">\r\n                  {(storageInfo.used / 1024).toFixed(1)}KB / {(storageInfo.available / 1024).toFixed(0)}KB\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"space-y-2\">\r\n                <p className=\"text-sm text-slate-300\">Available Save Slots ({getAllSaves().length})</p>\r\n                <div className=\"max-h-32 overflow-y-auto space-y-1\">\r\n                  {getAllSaves().map((save) => (\r\n                    <div key={save.id} className=\"flex items-center justify-between bg-slate-800 rounded p-2\">\r\n                      <div>\r\n                        <p className=\"text-sm text-slate-300\">{save.name}</p>\r\n                        <p className=\"text-xs text-slate-400\">\r\n                          {new Date(save.data.timestamp).toLocaleString()}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex gap-2\">\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => loadGame(save.id)}\r\n                        >\r\n                          Load\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"outline\"\r\n                          onClick={() => saveManager.exportSave(save.id)}\r\n                        >\r\n                          Export\r\n                        </Button>\r\n                        <Button\r\n                          size=\"sm\"\r\n                          variant=\"danger\"\r\n                          onClick={() => {\r\n                            if (confirm(`Delete save \"${save.name}\"?`)) {\r\n                              saveManager.deleteSave(save.id);\r\n                            }\r\n                          }}\r\n                        >\r\n                          ‚ùå\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => saveManager.cleanupOldSaves()}\r\n                >\r\n                  üßπ Cleanup Old Saves\r\n                </Button>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={exportSettings}\r\n                >\r\n                  üì§ Export Settings\r\n                </Button>\r\n                <label className=\"cursor-pointer\">\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\".json\"\r\n                    onChange={importSettings}\r\n                    className=\"hidden\"\r\n                  />\r\n                  <Button variant=\"outline\" as=\"span\">\r\n                    üì• Import Settings\r\n                  </Button>\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Footer Buttons */}\r\n        <div className=\"flex justify-between pt-6 border-t border-slate-600\">\r\n          <Button variant=\"outline\" onClick={resetSettings}>\r\n            üîÑ Reset to Defaults\r\n          </Button>\r\n          <div className=\"flex gap-2\">\r\n            <Button variant=\"outline\" onClick={onClose}>\r\n              Cancel\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={onClose}>\r\n              Done\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\SmartResourceDisplay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TooltipContent' is defined but never used.","line":4,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'netIncome' is assigned a value but never used.","line":19,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'powerUtilization' is assigned a value but never used.","line":20,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'visitorCapacity' is assigned a value but never used.","line":21,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2508,2511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2508,2511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatNumber' is defined but never used.","line":112,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":112,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4318,4321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4318,4321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6864,6867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6864,6867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { SECURITY_COLORS } from '../../constants/gameConstants';\r\nimport { Tooltip, TooltipContent } from './Tooltip';\r\nimport { Button } from './Button';\r\n\r\ntype ViewMode = 'compact' | 'detailed' | 'trends';\r\n\r\nexport function SmartResourceDisplay() {\r\n  const { resources } = useGameStore();\r\n  const [viewMode, setViewMode] = useState<ViewMode>('compact');\r\n\r\n  const formatNumber = (num: number) => {\r\n    if (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\r\n    if (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\r\n    return num.toString();\r\n  };\r\n\r\n  const netIncome = resources.dailyRevenue - resources.dailyExpenses;\r\n  const powerUtilization = Math.round((resources.power / resources.maxPower) * 100);\r\n  const visitorCapacity = Math.round((resources.visitors / resources.maxVisitors) * 100);\r\n\r\n  return (\r\n    <div className=\"bg-slate-900/95 border border-green-400/30 rounded-lg\">\r\n      {/* Header with view mode selector */}\r\n      <div className=\"flex items-center justify-between p-3 border-b border-green-400/20\">\r\n        <h3 className=\"text-green-400 font-bold glow\">Resources</h3>\r\n        <div className=\"flex gap-1\">\r\n          <Button\r\n            variant={viewMode === 'compact' ? 'primary' : 'outline'}\r\n            size=\"sm\"\r\n            onClick={() => setViewMode('compact')}\r\n            className=\"text-xs\"\r\n          >\r\n            üìä Compact\r\n          </Button>\r\n          <Button\r\n            variant={viewMode === 'detailed' ? 'primary' : 'outline'}\r\n            size=\"sm\"\r\n            onClick={() => setViewMode('detailed')}\r\n            className=\"text-xs\"\r\n          >\r\n            üìã Detailed\r\n          </Button>\r\n          <Button\r\n            variant={viewMode === 'trends' ? 'primary' : 'outline'}\r\n            size=\"sm\"\r\n            onClick={() => setViewMode('trends')}\r\n            className=\"text-xs\"\r\n          >\r\n            üìà Trends\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content based on view mode */}\r\n      <div className=\"p-3\">\r\n        {viewMode === 'compact' && <CompactView resources={resources} formatNumber={formatNumber} />}\r\n        {viewMode === 'detailed' && <DetailedView resources={resources} formatNumber={formatNumber} />}\r\n        {viewMode === 'trends' && <TrendsView resources={resources} formatNumber={formatNumber} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CompactView({ resources, formatNumber }: any) {\r\n  const netIncome = resources.dailyRevenue - resources.dailyExpenses;\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-3 gap-3\">\r\n      {/* Credits - Most important */}\r\n      <Tooltip\r\n        content=\"Primary currency for building and upgrades\"\r\n        position=\"auto\"\r\n      >\r\n        <div className=\"text-center p-2 bg-slate-800/50 rounded cursor-help\">\r\n          <div className=\"text-green-400 text-2xl\">üí∞</div>\r\n          <div className=\"text-white font-bold\">{formatNumber(resources.credits)}</div>\r\n          <div className=\"text-xs text-slate-400\">Credits</div>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      {/* Power - Critical resource */}\r\n      <Tooltip\r\n        content={`Power usage: ${resources.power}/${resources.maxPower}`}\r\n        position=\"auto\"\r\n      >\r\n        <div className=\"text-center p-2 bg-slate-800/50 rounded cursor-help\">\r\n          <div className=\"text-yellow-400 text-2xl\">‚ö°</div>\r\n          <div className=\"text-white font-bold\">{resources.power}/{resources.maxPower}</div>\r\n          <div className=\"text-xs text-slate-400\">Power</div>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      {/* Daily P&L - Performance indicator */}\r\n      <Tooltip\r\n        content={`Revenue: +${formatNumber(resources.dailyRevenue)} | Expenses: -${formatNumber(resources.dailyExpenses)}`}\r\n        position=\"auto\"\r\n      >\r\n        <div className=\"text-center p-2 bg-slate-800/50 rounded cursor-help\">\r\n          <div className=\"text-cyan-400 text-2xl\">üìä</div>\r\n          <div className={`font-bold ${netIncome >= 0 ? 'text-green-400' : 'text-red-400'}`}>\r\n            {formatNumber(netIncome)}\r\n          </div>\r\n          <div className=\"text-xs text-slate-400\">Daily P&L</div>\r\n        </div>\r\n      </Tooltip>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DetailedView({ resources, formatNumber }: any) {\r\n  const netIncome = resources.dailyRevenue - resources.dailyExpenses;\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Financial Overview */}\r\n      <div className=\"bg-slate-800/30 rounded p-3\">\r\n        <h4 className=\"text-green-400 font-semibold mb-2 flex items-center gap-2\">\r\n          üí∞ Financial Status\r\n        </h4>\r\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n          <div>\r\n            <span className=\"text-slate-400\">Credits:</span>\r\n            <span className=\"ml-2 text-white font-mono\">{resources.credits.toLocaleString()}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Daily Net:</span>\r\n            <span className={`ml-2 font-mono ${netIncome >= 0 ? 'text-green-400' : 'text-red-400'}`}>\r\n              {netIncome >= 0 ? '+' : ''}{netIncome.toLocaleString()}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Revenue:</span>\r\n            <span className=\"ml-2 text-green-400 font-mono\">+{resources.dailyRevenue.toLocaleString()}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Expenses:</span>\r\n            <span className=\"ml-2 text-red-400 font-mono\">-{resources.dailyExpenses.toLocaleString()}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Operational Status */}\r\n      <div className=\"bg-slate-800/30 rounded p-3\">\r\n        <h4 className=\"text-green-400 font-semibold mb-2 flex items-center gap-2\">\r\n          ‚öôÔ∏è Operations\r\n        </h4>\r\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n          <div>\r\n            <span className=\"text-slate-400\">Power:</span>\r\n            <span className=\"ml-2 text-white font-mono\">{resources.power}/{resources.maxPower}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Security:</span>\r\n            <span className={`ml-2 font-mono ${SECURITY_COLORS[resources.security]}`}>\r\n              {resources.security}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Visitors:</span>\r\n            <span className=\"ml-2 text-white font-mono\">{resources.visitors}/{resources.maxVisitors}</span>\r\n          </div>\r\n          <div>\r\n            <span className=\"text-slate-400\">Research:</span>\r\n            <span className=\"ml-2 text-blue-400 font-mono\">{resources.research}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TrendsView({ resources, formatNumber }: any) {\r\n  const netIncome = resources.dailyRevenue - resources.dailyExpenses;\r\n  const powerUtilization = Math.round((resources.power / resources.maxPower) * 100);\r\n  const visitorCapacity = Math.round((resources.visitors / resources.maxVisitors) * 100);\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Progress Bars */}\r\n      <div className=\"space-y-2\">\r\n        <div>\r\n          <div className=\"flex justify-between text-xs mb-1\">\r\n            <span className=\"text-slate-400\">Power Utilization</span>\r\n            <span className=\"text-white\">{powerUtilization}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\r\n            <div\r\n              className={`h-2 rounded-full transition-all duration-300 ${\r\n                powerUtilization >= 90 ? 'bg-red-400' :\r\n                powerUtilization >= 70 ? 'bg-yellow-400' : 'bg-green-400'\r\n              }`}\r\n              style={{ width: `${Math.min(powerUtilization, 100)}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <div className=\"flex justify-between text-xs mb-1\">\r\n            <span className=\"text-slate-400\">Visitor Capacity</span>\r\n            <span className=\"text-white\">{visitorCapacity}%</span>\r\n          </div>\r\n          <div className=\"w-full bg-slate-700 rounded-full h-2\">\r\n            <div\r\n              className=\"h-2 bg-purple-400 rounded-full transition-all duration-300\"\r\n              style={{ width: `${Math.min(visitorCapacity, 100)}%` }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Key Metrics */}\r\n      <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n        <div className=\"bg-slate-800/30 rounded p-2 text-center\">\r\n          <div className=\"text-cyan-400 font-bold\">{formatNumber(netIncome)}</div>\r\n          <div className=\"text-xs text-slate-400\">Daily Net</div>\r\n        </div>\r\n        <div className=\"bg-slate-800/30 rounded p-2 text-center\">\r\n          <div className=\"text-blue-400 font-bold\">{resources.research}</div>\r\n          <div className=\"text-xs text-slate-400\">Research Pts</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\SmartToolbar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ReactNode' is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useGameStore' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toggleExpanded' is assigned a value but never used.","line":39,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":23},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":113,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":113,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, ReactNode } from 'react';\r\nimport { useGameStore } from '../../stores/gameStore';\r\nimport { Button } from './Button';\r\n\r\ninterface ToolbarGroup {\r\n  id: string;\r\n  label: string;\r\n  icon: string;\r\n  items: ToolbarItem[];\r\n  badge?: number;\r\n}\r\n\r\ninterface ToolbarItem {\r\n  id: string;\r\n  label: string;\r\n  icon: string;\r\n  onClick: () => void;\r\n  disabled?: boolean;\r\n  badge?: number | string;\r\n}\r\n\r\ninterface SmartToolbarProps {\r\n  groups: ToolbarGroup[];\r\n  className?: string;\r\n}\r\n\r\nexport function SmartToolbar({ groups, className = '' }: SmartToolbarProps) {\r\n  const [activeGroup, setActiveGroup] = useState<string | null>(null);\r\n  const [expandedGroups, setExpandedGroups] = useState<Set<string>>(new Set());\r\n\r\n  const toggleGroup = (groupId: string) => {\r\n    if (activeGroup === groupId) {\r\n      setActiveGroup(null);\r\n    } else {\r\n      setActiveGroup(groupId);\r\n    }\r\n  };\r\n\r\n  const toggleExpanded = (groupId: string) => {\r\n    const newExpanded = new Set(expandedGroups);\r\n    if (newExpanded.has(groupId)) {\r\n      newExpanded.delete(groupId);\r\n    } else {\r\n      newExpanded.add(groupId);\r\n    }\r\n    setExpandedGroups(newExpanded);\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-slate-900/95 border border-green-400/30 rounded-lg ${className}`}>\r\n      {/* Main Toolbar */}\r\n      <div className=\"flex items-center gap-1 p-2\">\r\n        {groups.map((group) => (\r\n          <div key={group.id} className=\"relative\">\r\n            <Button\r\n              variant={activeGroup === group.id ? 'primary' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => toggleGroup(group.id)}\r\n              className=\"relative flex items-center gap-2 min-w-[80px]\"\r\n            >\r\n              <span className=\"text-lg\">{group.icon}</span>\r\n              <span className=\"hidden sm:inline text-xs\">{group.label}</span>\r\n              {group.badge && (\r\n                <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n                  {group.badge}\r\n                </span>\r\n              )}\r\n            </Button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Dropdown Panel */}\r\n      {activeGroup && (\r\n        <div className=\"border-t border-green-400/30 p-3 bg-slate-800/50\">\r\n          {(() => {\r\n            const group = groups.find(g => g.id === activeGroup);\r\n            if (!group) return null;\r\n\r\n            return (\r\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2\">\r\n                {group.items.map((item) => (\r\n                  <Button\r\n                    key={item.id}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={() => {\r\n                      item.onClick();\r\n                      setActiveGroup(null); // Close after selection\r\n                    }}\r\n                    disabled={item.disabled}\r\n                    className=\"flex items-center justify-start gap-2 text-left\"\r\n                  >\r\n                    <span>{item.icon}</span>\r\n                    <span className=\"text-xs truncate\">{item.label}</span>\r\n                    {item.badge && (\r\n                      <span className=\"ml-auto bg-green-400/20 text-green-400 text-xs px-1 rounded\">\r\n                        {item.badge}\r\n                      </span>\r\n                    )}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            );\r\n          })()}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Predefined toolbar configurations\r\nexport function useMainToolbar(startTutorial?: () => void) {\r\n  const [showCampaign, setShowCampaign] = useState(false);\r\n  const [showCampaignStats, setShowCampaignStats] = useState(false);\r\n  const [showHistorical, setShowHistorical] = useState(false);\r\n  const [showAchievements, setShowAchievements] = useState(false);\r\n  const [showResearchTree, setShowResearchTree] = useState(false);\r\n  const [showGeneticLab, setShowGeneticLab] = useState(false);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n\r\n  const groups: ToolbarGroup[] = [\r\n    {\r\n      id: 'help',\r\n      label: 'Help',\r\n      icon: '‚ùì',\r\n      items: [\r\n        {\r\n          id: 'tutorial',\r\n          label: 'Tutorial',\r\n          icon: 'üìö',\r\n          onClick: () => startTutorial?.()\r\n        },\r\n        {\r\n          id: 'settings',\r\n          label: 'Settings',\r\n          icon: '‚öôÔ∏è',\r\n          onClick: () => setShowSettings(true)\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  return {\r\n    groups,\r\n    modals: {\r\n      showCampaign, setShowCampaign,\r\n      showCampaignStats, setShowCampaignStats,\r\n      showHistorical, setShowHistorical,\r\n      showAchievements, setShowAchievements,\r\n      showResearchTree, setShowResearchTree,\r\n      showGeneticLab, setShowGeneticLab,\r\n      showSettings, setShowSettings\r\n    }\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\Tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\components\\ui\\VisualFeedback.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":244,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":244,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5581,5584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5581,5584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":303,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":303,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback } from 'react';\r\n\r\ninterface FloatingNumberProps {\r\n  value: number;\r\n  x: number;\r\n  y: number;\r\n  type: 'credits' | 'power' | 'research' | 'damage';\r\n  onComplete: () => void;\r\n}\r\n\r\ninterface PulseEffectProps {\r\n  children: React.ReactNode;\r\n  pulse: boolean;\r\n  color?: 'green' | 'red' | 'blue' | 'yellow';\r\n}\r\n\r\ninterface ShakeEffectProps {\r\n  children: React.ReactNode;\r\n  shake: boolean;\r\n}\r\n\r\n// Floating number animation for resource changes\r\nexport function FloatingNumber({ value, x, y, type, onComplete }: FloatingNumberProps) {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsVisible(false);\r\n      setTimeout(onComplete, 300);\r\n    }, 1500);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [onComplete]);\r\n\r\n  const getTypeStyles = () => {\r\n    switch (type) {\r\n      case 'credits':\r\n        return 'text-yellow-400';\r\n      case 'power':\r\n        return 'text-blue-400';\r\n      case 'research':\r\n        return 'text-purple-400';\r\n      case 'damage':\r\n        return 'text-red-400';\r\n      default:\r\n        return 'text-green-400';\r\n    }\r\n  };\r\n\r\n  const formatValue = () => {\r\n    const prefix = value > 0 ? '+' : '';\r\n    return `${prefix}${value}`;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`\r\n        fixed pointer-events-none z-50 font-bold text-lg\r\n        transition-all duration-1500 ease-out\r\n        ${getTypeStyles()}\r\n        ${isVisible \r\n          ? 'opacity-100 transform translate-y-0' \r\n          : 'opacity-0 transform -translate-y-8'\r\n        }\r\n      `}\r\n      style={{ \r\n        left: x, \r\n        top: y,\r\n        textShadow: '0 0 10px currentColor'\r\n      }}\r\n    >\r\n      {formatValue()}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Pulse effect for highlighting elements\r\nexport function PulseEffect({ children, pulse, color = 'green' }: PulseEffectProps) {\r\n  const getColorClass = () => {\r\n    switch (color) {\r\n      case 'red':\r\n        return 'shadow-red-400/50';\r\n      case 'blue':\r\n        return 'shadow-blue-400/50';\r\n      case 'yellow':\r\n        return 'shadow-yellow-400/50';\r\n      default:\r\n        return 'shadow-green-400/50';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`\r\n        transition-all duration-500\r\n        ${pulse \r\n          ? `animate-pulse shadow-lg ${getColorClass()}` \r\n          : ''\r\n        }\r\n      `}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Shake effect for errors or warnings\r\nexport function ShakeEffect({ children, shake }: ShakeEffectProps) {\r\n  return (\r\n    <div\r\n      className={`\r\n        transition-transform duration-200\r\n        ${shake ? 'animate-shake' : ''}\r\n      `}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Loading spinner component\r\nexport function LoadingSpinner({ size = 'md', color = 'green' }: { \r\n  size?: 'sm' | 'md' | 'lg';\r\n  color?: 'green' | 'blue' | 'red' | 'yellow';\r\n}) {\r\n  const getSizeClass = () => {\r\n    switch (size) {\r\n      case 'sm':\r\n        return 'w-4 h-4';\r\n      case 'lg':\r\n        return 'w-8 h-8';\r\n      default:\r\n        return 'w-6 h-6';\r\n    }\r\n  };\r\n\r\n  const getColorClass = () => {\r\n    switch (color) {\r\n      case 'blue':\r\n        return 'border-blue-400';\r\n      case 'red':\r\n        return 'border-red-400';\r\n      case 'yellow':\r\n        return 'border-yellow-400';\r\n      default:\r\n        return 'border-green-400';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`\r\n        ${getSizeClass()} \r\n        ${getColorClass()}\r\n        border-2 border-t-transparent rounded-full animate-spin\r\n      `}\r\n    />\r\n  );\r\n}\r\n\r\n// Progress bar with animation\r\nexport function AnimatedProgressBar({ \r\n  value, \r\n  max, \r\n  color = 'green',\r\n  label,\r\n  showPercentage = true \r\n}: {\r\n  value: number;\r\n  max: number;\r\n  color?: 'green' | 'blue' | 'red' | 'yellow';\r\n  label?: string;\r\n  showPercentage?: boolean;\r\n}) {\r\n  const percentage = Math.min((value / max) * 100, 100);\r\n\r\n  const getColorClasses = () => {\r\n    switch (color) {\r\n      case 'blue':\r\n        return {\r\n          bg: 'bg-blue-400',\r\n          glow: 'shadow-blue-400/30'\r\n        };\r\n      case 'red':\r\n        return {\r\n          bg: 'bg-red-400',\r\n          glow: 'shadow-red-400/30'\r\n        };\r\n      case 'yellow':\r\n        return {\r\n          bg: 'bg-yellow-400',\r\n          glow: 'shadow-yellow-400/30'\r\n        };\r\n      default:\r\n        return {\r\n          bg: 'bg-green-400',\r\n          glow: 'shadow-green-400/30'\r\n        };\r\n    }\r\n  };\r\n\r\n  const colors = getColorClasses();\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {label && (\r\n        <div className=\"flex justify-between text-sm text-slate-300 mb-1\">\r\n          <span>{label}</span>\r\n          {showPercentage && <span>{percentage.toFixed(0)}%</span>}\r\n        </div>\r\n      )}\r\n      <div className=\"w-full bg-slate-700 rounded-full h-2 overflow-hidden\">\r\n        <div\r\n          className={`\r\n            h-full ${colors.bg} ${colors.glow}\r\n            transition-all duration-500 ease-out\r\n            shadow-sm\r\n          `}\r\n          style={{ width: `${percentage}%` }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Button with enhanced feedback\r\nexport function FeedbackButton({ \r\n  children, \r\n  onClick, \r\n  variant = 'primary',\r\n  loading = false,\r\n  success = false,\r\n  error = false,\r\n  disabled = false,\r\n  ...props \r\n}: {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  loading?: boolean;\r\n  success?: boolean;\r\n  error?: boolean;\r\n  disabled?: boolean;\r\n  [key: string]: any;\r\n}) {\r\n  const [isClicked, setIsClicked] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (disabled || loading) return;\r\n    \r\n    setIsClicked(true);\r\n    setTimeout(() => setIsClicked(false), 200);\r\n    \r\n    onClick?.();\r\n  };\r\n\r\n  const getVariantClasses = () => {\r\n    if (success) {\r\n      return 'bg-green-500 hover:bg-green-600 text-white border-green-400';\r\n    }\r\n    if (error) {\r\n      return 'bg-red-500 hover:bg-red-600 text-white border-red-400';\r\n    }\r\n    if (disabled || loading) {\r\n      return 'bg-slate-600 text-slate-400 border-slate-500 cursor-not-allowed';\r\n    }\r\n\r\n    switch (variant) {\r\n      case 'secondary':\r\n        return 'bg-slate-700 hover:bg-slate-600 text-slate-300 border-slate-600';\r\n      case 'danger':\r\n        return 'bg-red-600 hover:bg-red-700 text-white border-red-500';\r\n      default:\r\n        return 'bg-green-600 hover:bg-green-700 text-white border-green-500';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      {...props}\r\n      onClick={handleClick}\r\n      disabled={disabled || loading}\r\n      className={`\r\n        px-4 py-2 rounded border transition-all duration-200\r\n        ${getVariantClasses()}\r\n        ${isClicked ? 'transform scale-95' : 'transform scale-100'}\r\n        ${loading ? 'animate-pulse' : ''}\r\n        hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-opacity-50\r\n        ${variant === 'primary' ? 'focus:ring-green-400' : 'focus:ring-slate-400'}\r\n      `}\r\n    >\r\n      <div className=\"flex items-center gap-2\">\r\n        {loading && <LoadingSpinner size=\"sm\" />}\r\n        {success && !loading && <span>‚úì</span>}\r\n        {error && !loading && <span>‚úó</span>}\r\n        {children}\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n\r\n// Hook for managing floating numbers\r\nexport function useFloatingNumbers() {\r\n  const [floatingNumbers, setFloatingNumbers] = useState<Array<{\r\n    id: string;\r\n    value: number;\r\n    x: number;\r\n    y: number;\r\n    type: 'credits' | 'power' | 'research' | 'damage';\r\n  }>>([]);\r\n\r\n  const addFloatingNumber = useCallback((\r\n    value: number, \r\n    x: number, \r\n    y: number, \r\n    type: 'credits' | 'power' | 'research' | 'damage'\r\n  ) => {\r\n    const id = `floating-${Date.now()}-${Math.random()}`;\r\n    setFloatingNumbers(prev => [...prev, { id, value, x, y, type }]);\r\n  }, []);\r\n\r\n  const removeFloatingNumber = useCallback((id: string) => {\r\n    setFloatingNumbers(prev => prev.filter(num => num.id !== id));\r\n  }, []);\r\n\r\n  const FloatingNumbersRenderer = () => (\r\n    <>\r\n      {floatingNumbers.map(num => (\r\n        <FloatingNumber\r\n          key={num.id}\r\n          value={num.value}\r\n          x={num.x}\r\n          y={num.y}\r\n          type={num.type}\r\n          onComplete={() => removeFloatingNumber(num.id)}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n\r\n  return {\r\n    addFloatingNumber,\r\n    FloatingNumbersRenderer\r\n  };\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\constants\\gameConstants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\contexts\\FloatingTextContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":20,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":20,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, ReactNode } from 'react';\r\n\r\ninterface FloatingTextContextType {\r\n  addResourceChange: (\r\n    resource: string,\r\n    amount: number,\r\n    element?: HTMLElement\r\n  ) => void;\r\n  addFloatingText: (\r\n    text: string,\r\n    position: { x: number; y: number },\r\n    color?: string,\r\n    duration?: number,\r\n    size?: 'sm' | 'md' | 'lg'\r\n  ) => void;\r\n}\r\n\r\nconst FloatingTextContext = createContext<FloatingTextContextType | null>(null);\r\n\r\nexport function useFloatingTextContext() {\r\n  const context = useContext(FloatingTextContext);\r\n  if (!context) {\r\n    // Return no-op functions if context is not available\r\n    return {\r\n      addResourceChange: () => {},\r\n      addFloatingText: () => {},\r\n    };\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function FloatingTextProvider({\r\n  children,\r\n  value,\r\n}: {\r\n  children: ReactNode;\r\n  value: FloatingTextContextType;\r\n}) {\r\n  return (\r\n    <FloatingTextContext.Provider value={value}>\r\n      {children}\r\n    </FloatingTextContext.Provider>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\contexts\\ParticleContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":12,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":12,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, ReactNode } from 'react';\r\n\r\ninterface ParticleContextType {\r\n  triggerContainmentBreach: (position: { x: number; y: number }) => void;\r\n  triggerExplosion: (position: { x: number; y: number }) => void;\r\n  triggerSparks: (position: { x: number; y: number }) => void;\r\n  triggerSmoke: (position: { x: number; y: number }) => void;\r\n}\r\n\r\nconst ParticleContext = createContext<ParticleContextType | null>(null);\r\n\r\nexport function useParticleContext() {\r\n  const context = useContext(ParticleContext);\r\n  if (!context) {\r\n    // Return no-op functions if context is not available\r\n    return {\r\n      triggerContainmentBreach: () => {},\r\n      triggerExplosion: () => {},\r\n      triggerSparks: () => {},\r\n      triggerSmoke: () => {},\r\n    };\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function ParticleProvider({\r\n  children,\r\n  value,\r\n}: {\r\n  children: ReactNode;\r\n  value: ParticleContextType;\r\n}) {\r\n  return (\r\n    <ParticleContext.Provider value={value}>\r\n      {children}\r\n    </ParticleContext.Provider>\r\n  );\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\data\\gameData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\data\\researchTree.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\hooks\\useGameLoop.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\stores\\gameStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DEFAULT_OBJECTIVES' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":28},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":270,"column":11,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":270,"endColumn":24,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[8754,8767],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":272,"column":13,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":272,"endColumn":26,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[8822,8835],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-require-imports","severity":1,"message":"A `require()` style import is forbidden.","line":424,"column":33,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":424,"endColumn":64},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":425,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":425,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15071,15074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15071,15074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":496,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":496,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17665,17668],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17665,17668],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":1,"message":"'newState' is never reassigned. Use 'const' instead.","line":597,"column":15,"nodeType":"Identifier","messageId":"useConst","endLine":597,"endColumn":23,"fix":{"range":[21091,21119],"text":"const newState = { ...state };"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":640,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":640,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22793,22796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22793,22796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'version' is defined but never used.","line":640,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":640,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { create } from 'zustand';\r\nimport { devtools, persist } from 'zustand/middleware';\r\nimport { GameStore, GameState, PlacedFacility, PlacedXenomorph } from '../types';\r\nimport { GAME_CONSTANTS } from '../constants/gameConstants';\r\nimport { DEFAULT_OBJECTIVES } from '../data/gameData';\r\nimport { RESEARCH_TREE } from '../data/researchTree';\r\nimport { saveManager } from '../utils/saveManager';\r\n\r\nconst initialState: GameState = {\r\n  paused: false,\r\n  day: 1,\r\n  hour: 9,\r\n  tick: 0,\r\n  resources: {\r\n    credits: GAME_CONSTANTS.STARTING_CREDITS,\r\n    power: GAME_CONSTANTS.STARTING_POWER,\r\n    maxPower: GAME_CONSTANTS.STARTING_MAX_POWER,\r\n    research: GAME_CONSTANTS.STARTING_RESEARCH,\r\n    security: GAME_CONSTANTS.STARTING_SECURITY,\r\n    visitors: GAME_CONSTANTS.STARTING_VISITORS,\r\n    maxVisitors: 50,\r\n    dailyRevenue: 0,\r\n    dailyExpenses: 0,\r\n  },\r\n  facilities: [],\r\n  xenomorphs: [],\r\n  selectedFacility: null,\r\n  selectedSpecies: null,\r\n  research: {\r\n    completed: [], // No research completed at start\r\n    inProgress: null,\r\n    points: 0,\r\n    available: ['Drone'], // Drone is available from start but not \"researched\"\r\n    researchTree: {}, // Research tree progress tracking\r\n  },\r\n  economics: {\r\n    totalRevenue: 0,\r\n    totalExpenses: 0,\r\n    profitMargin: 0,\r\n    visitorSatisfaction: 0.5,\r\n    attractionValue: 0,\r\n    lastDayProfit: 0,\r\n  },\r\n  undoRedo: {\r\n    history: [],\r\n    currentIndex: -1,\r\n    maxHistorySize: 50,\r\n  },\r\n};\r\n\r\nexport const useGameStore = create<GameStore>()(\r\n  devtools(\r\n    persist(\r\n      (set, get) => ({\r\n        ...initialState,\r\n\r\n        // Game management\r\n        togglePause: () => set((state) => ({ paused: !state.paused })),\r\n\r\n        // Resource management\r\n        updateResources: (resources) =>\r\n          set((state) => ({\r\n            resources: { ...state.resources, ...resources },\r\n          })),\r\n\r\n        // Facility management\r\n        placeFacility: (facility, position) => {\r\n          const state = get();\r\n          \r\n          // Check if we have enough credits\r\n          if (state.resources.credits < facility.cost) {\r\n            // You might want to add a status message system here\r\n            return;\r\n          }\r\n\r\n          // Check if position is available\r\n          const isOccupied = state.facilities.some(\r\n            (f) => f.position.row === position.row && f.position.col === position.col\r\n          ) || state.xenomorphs.some(\r\n            (x) => x.position.row === position.row && x.position.col === position.col\r\n          );\r\n\r\n          if (isOccupied) {\r\n            return;\r\n          }\r\n\r\n          const newFacility: PlacedFacility = {\r\n            id: `facility-${Date.now()}-${Math.random()}`,\r\n            name: facility.name,\r\n            position,\r\n            cost: facility.cost,\r\n            powerRequirement: facility.powerRequirement,\r\n            description: facility.description,\r\n          };\r\n\r\n          // Calculate new max power if it's a power generator\r\n          const powerIncrease = facility.name === 'Power Generator' ? 10 : 0;\r\n\r\n          // Store previous state for undo\r\n          const previousState = {\r\n            facilities: state.facilities,\r\n            resources: state.resources,\r\n          };\r\n\r\n          const resourceChanges = {\r\n            credits: state.resources.credits - facility.cost,\r\n            power: state.resources.power - facility.powerRequirement,\r\n            maxPower: state.resources.maxPower + powerIncrease,\r\n          };\r\n\r\n          // Add to history\r\n          get().addToHistory({\r\n            type: 'PLACE_FACILITY',\r\n            timestamp: Date.now(),\r\n            data: { facility: newFacility, resourceChanges },\r\n            previousState,\r\n          });\r\n\r\n          set((state) => ({\r\n            facilities: [...state.facilities, newFacility],\r\n            resources: {\r\n              ...state.resources,\r\n              ...resourceChanges,\r\n            },\r\n            selectedFacility: null,\r\n          }));\r\n        },\r\n\r\n        // Xenomorph management\r\n        placeXenomorph: (species, position) => {\r\n          const state = get();\r\n\r\n          // Check if species is researched or available (handle undefined available array)\r\n          const available = state.research.available || [];\r\n          if (!state.research.completed.includes(species.name) && !available.includes(species.name)) {\r\n            return;\r\n          }\r\n\r\n          // Check if position is available\r\n          const isOccupied = state.facilities.some(\r\n            (f) => f.position.row === position.row && f.position.col === position.col\r\n          ) || state.xenomorphs.some(\r\n            (x) => x.position.row === position.row && x.position.col === position.col\r\n          );\r\n\r\n          if (isOccupied) {\r\n            return;\r\n          }\r\n\r\n          const newXenomorph: PlacedXenomorph = {\r\n            id: `xenomorph-${Date.now()}-${Math.random()}`,\r\n            species,\r\n            position,\r\n            containmentLevel: species.containmentDifficulty,\r\n          };\r\n\r\n          // Store previous state for undo\r\n          const previousState = {\r\n            xenomorphs: state.xenomorphs,\r\n          };\r\n\r\n          // Add to history\r\n          get().addToHistory({\r\n            type: 'PLACE_XENOMORPH',\r\n            timestamp: Date.now(),\r\n            data: { xenomorph: newXenomorph },\r\n            previousState,\r\n          });\r\n\r\n          set((state) => ({\r\n            xenomorphs: [...state.xenomorphs, newXenomorph],\r\n            selectedSpecies: null,\r\n          }));\r\n        },\r\n\r\n        // Remove facilities and xenomorphs\r\n        removeFacility: (facilityId) => {\r\n          const state = get();\r\n          const facility = state.facilities.find(f => f.id === facilityId);\r\n          if (!facility) return;\r\n\r\n          // Store previous state for undo\r\n          const previousState = {\r\n            facilities: state.facilities,\r\n            resources: state.resources,\r\n          };\r\n\r\n          // Calculate resource refund (partial)\r\n          const refundAmount = Math.floor(facility.cost * 0.5); // 50% refund\r\n          const powerReturn = facility.powerRequirement;\r\n          const maxPowerDecrease = facility.name === 'Power Generator' ? 10 : 0;\r\n\r\n          // Add to history\r\n          get().addToHistory({\r\n            type: 'REMOVE_FACILITY',\r\n            timestamp: Date.now(),\r\n            data: { facility, refund: refundAmount, powerReturn, maxPowerDecrease },\r\n            previousState,\r\n          });\r\n\r\n          set((state) => ({\r\n            facilities: state.facilities.filter(f => f.id !== facilityId),\r\n            resources: {\r\n              ...state.resources,\r\n              credits: state.resources.credits + refundAmount,\r\n              power: state.resources.power + powerReturn,\r\n              maxPower: state.resources.maxPower - maxPowerDecrease,\r\n            },\r\n          }));\r\n        },\r\n\r\n        removeXenomorph: (xenomorphId) => {\r\n          const state = get();\r\n          const xenomorph = state.xenomorphs.find(x => x.id === xenomorphId);\r\n          if (!xenomorph) return;\r\n\r\n          // Store previous state for undo\r\n          const previousState = {\r\n            xenomorphs: state.xenomorphs,\r\n          };\r\n\r\n          // Add to history\r\n          get().addToHistory({\r\n            type: 'REMOVE_XENOMORPH',\r\n            timestamp: Date.now(),\r\n            data: { xenomorph },\r\n            previousState,\r\n          });\r\n\r\n          set((state) => ({\r\n            xenomorphs: state.xenomorphs.filter(x => x.id !== xenomorphId),\r\n          }));\r\n        },\r\n\r\n        // Selection management\r\n        selectFacility: (facility) =>\r\n          set({ selectedFacility: facility, selectedSpecies: null }),\r\n        selectSpecies: (species) =>\r\n          set({ selectedSpecies: species, selectedFacility: null }),\r\n\r\n        // Research management\r\n        startResearch: (species) => {\r\n          const state = get();\r\n          if (state.research.inProgress || state.research.completed.includes(species)) {\r\n            return;\r\n          }\r\n\r\n          set((state) => ({\r\n            research: {\r\n              ...state.research,\r\n              inProgress: species,\r\n            },\r\n          }));\r\n        },\r\n\r\n        completeResearch: (species) =>\r\n          set((state) => ({\r\n            research: {\r\n              ...state.research,\r\n              completed: [...state.research.completed, species],\r\n              inProgress: null,\r\n              available: state.research.available.filter(s => s !== species),\r\n            },\r\n          })),\r\n\r\n\r\n        // Status messages\r\n        addStatusMessage: (message, type) => {\r\n          // Use global notification system if available\r\n          // @ts-ignore\r\n          if (window.addNotification) {\r\n            // @ts-ignore\r\n            window.addNotification(message, type);\r\n          } else {\r\n            console.log(`${type.toUpperCase()}: ${message}`);\r\n          }\r\n        },\r\n\r\n        // Save management\r\n        saveGame: (slotId: string, name?: string) => {\r\n          const state = get();\r\n          const success = saveManager.saveGame(state, slotId, name);\r\n          if (success) {\r\n            state.addStatusMessage(`Game saved successfully${name ? ` as \"${name}\"` : ''}`, 'success');\r\n          } else {\r\n            state.addStatusMessage('Failed to save game', 'error');\r\n          }\r\n          return success;\r\n        },\r\n\r\n        loadGame: (slotId: string) => {\r\n          const saveData = saveManager.loadGame(slotId);\r\n          if (saveData) {\r\n            set({ ...initialState, ...saveData.gameState });\r\n            get().addStatusMessage('Game loaded successfully', 'success');\r\n            return true;\r\n          } else {\r\n            get().addStatusMessage('Failed to load game', 'error');\r\n            return false;\r\n          }\r\n        },\r\n\r\n        quickSave: () => {\r\n          const state = get();\r\n          const success = saveManager.quickSave(state);\r\n          if (success) {\r\n            state.addStatusMessage('Quick save completed', 'success');\r\n          } else {\r\n            state.addStatusMessage('Quick save failed', 'error');\r\n          }\r\n          return success;\r\n        },\r\n\r\n        quickLoad: () => {\r\n          const saveData = saveManager.quickLoad();\r\n          if (saveData) {\r\n            set({ ...initialState, ...saveData.gameState });\r\n            get().addStatusMessage('Quick load completed', 'success');\r\n            return true;\r\n          } else {\r\n            get().addStatusMessage('No quick save found', 'warning');\r\n            return false;\r\n          }\r\n        },\r\n\r\n        // Game mechanics\r\n        updateTime: () => set((state) => {\r\n          let newTick = state.tick + 1;\r\n          let newHour = state.hour;\r\n          let newDay = state.day;\r\n\r\n          if (newTick >= GAME_CONSTANTS.TICKS_PER_HOUR) {\r\n            newTick = 0;\r\n            newHour++;\r\n\r\n            if (newHour >= GAME_CONSTANTS.HOURS_PER_DAY) {\r\n              newHour = 0;\r\n              newDay++;\r\n\r\n              // Reset daily counters\r\n              return {\r\n                ...state,\r\n                tick: newTick,\r\n                hour: newHour,\r\n                day: newDay,\r\n                resources: {\r\n                  ...state.resources,\r\n                  dailyRevenue: 0,\r\n                  dailyExpenses: 0,\r\n                },\r\n                economics: {\r\n                  ...state.economics,\r\n                  lastDayProfit: state.resources.dailyRevenue - state.resources.dailyExpenses,\r\n                },\r\n              };\r\n            }\r\n          }\r\n\r\n          return { ...state, tick: newTick, hour: newHour, day: newDay };\r\n        }),\r\n\r\n        processEconomics: () => set((state) => {\r\n          const visitorCenters = state.facilities.filter(f => f.name === 'Visitor Center').length;\r\n          const totalAttractionValue = state.xenomorphs.reduce((sum, x) => sum + x.species.dangerLevel, 0);\r\n\r\n          // Calculate visitor flow based on time of day\r\n          let flowMultiplier = GAME_CONSTANTS.VISITOR_FLOW_NIGHT;\r\n          if (state.hour >= 6 && state.hour < 12) flowMultiplier = GAME_CONSTANTS.VISITOR_FLOW_MORNING;\r\n          else if (state.hour >= 12 && state.hour < 18) flowMultiplier = GAME_CONSTANTS.VISITOR_FLOW_AFTERNOON;\r\n          else if (state.hour >= 18 && state.hour < 22) flowMultiplier = GAME_CONSTANTS.VISITOR_FLOW_EVENING;\r\n\r\n          // Calculate new visitors\r\n          const maxNewVisitors = Math.floor(GAME_CONSTANTS.MAX_VISITORS_PER_TICK * flowMultiplier);\r\n          const baseVisitorCapacity = visitorCenters * GAME_CONSTANTS.VISITORS_PER_FACILITY + 10;\r\n          const attractionBonus = Math.floor(totalAttractionValue * 0.5);\r\n          const newVisitorCount = Math.min(\r\n            state.resources.visitors + Math.random() * maxNewVisitors,\r\n            baseVisitorCapacity + attractionBonus\r\n          );\r\n\r\n          // Calculate revenue\r\n          const admissionRevenue = (newVisitorCount - state.resources.visitors) * GAME_CONSTANTS.BASE_ADMISSION_PRICE;\r\n          const attractionRevenue = state.resources.visitors * totalAttractionValue * 0.1;\r\n          const totalRevenue = admissionRevenue + attractionRevenue;\r\n\r\n          // Calculate expenses\r\n          const facilityMaintenance = state.facilities.length * GAME_CONSTANTS.FACILITY_MAINTENANCE_COST;\r\n          const xenomorphFeeding = state.xenomorphs.length * GAME_CONSTANTS.XENOMORPH_FOOD_COST;\r\n          const totalExpenses = facilityMaintenance + xenomorphFeeding;\r\n\r\n          return {\r\n            ...state,\r\n            resources: {\r\n              ...state.resources,\r\n              visitors: Math.floor(newVisitorCount),\r\n              maxVisitors: baseVisitorCapacity + attractionBonus,\r\n              credits: state.resources.credits + totalRevenue - totalExpenses,\r\n              dailyRevenue: state.resources.dailyRevenue + totalRevenue,\r\n              dailyExpenses: state.resources.dailyExpenses + totalExpenses,\r\n            },\r\n            economics: {\r\n              ...state.economics,\r\n              totalRevenue: state.economics.totalRevenue + totalRevenue,\r\n              totalExpenses: state.economics.totalExpenses + totalExpenses,\r\n              attractionValue: totalAttractionValue,\r\n              profitMargin: state.economics.totalRevenue > 0 ?\r\n                ((state.economics.totalRevenue - state.economics.totalExpenses) / state.economics.totalRevenue) * 100 : 0,\r\n            },\r\n          };\r\n        }),\r\n\r\n        gameTick: () => {\r\n          const state = get();\r\n          if (!state.paused) {\r\n            state.updateTime();\r\n            state.processEconomics();\r\n            state.updateResearchProgress();\r\n          }\r\n        },\r\n\r\n        // Research tree management\r\n        startResearchNode: (nodeId) => set((state) => {\r\n          // Import the research tree data to get costs\r\n          const RESEARCH_TREE = require('../data/researchTree').RESEARCH_TREE;\r\n          const nodeData = RESEARCH_TREE.find((n: any) => n.id === nodeId);\r\n\r\n          if (!nodeData) return state;\r\n\r\n          const currentNodeState = state.research.researchTree[nodeId] || {\r\n            completed: false,\r\n            inProgress: false,\r\n            progress: 0\r\n          };\r\n\r\n          // Check if we can afford it and it's available\r\n          const canAfford = state.resources.credits >= nodeData.cost.credits &&\r\n                           state.resources.research >= nodeData.cost.research;\r\n\r\n          if (!currentNodeState.completed && !currentNodeState.inProgress && canAfford) {\r\n            return {\r\n              ...state,\r\n              resources: {\r\n                ...state.resources,\r\n                credits: state.resources.credits - nodeData.cost.credits,\r\n                research: state.resources.research - nodeData.cost.research,\r\n              },\r\n              research: {\r\n                ...state.research,\r\n                researchTree: {\r\n                  ...state.research.researchTree,\r\n                  [nodeId]: {\r\n                    ...currentNodeState,\r\n                    inProgress: true,\r\n                    startedAt: Date.now(),\r\n                  },\r\n                },\r\n              },\r\n            };\r\n          }\r\n          return state;\r\n        }),\r\n\r\n        completeResearchNode: (nodeId) => set((state) => {\r\n          const node = state.research.researchTree[nodeId];\r\n          if (node && node.inProgress) {\r\n            return {\r\n              ...state,\r\n              research: {\r\n                ...state.research,\r\n                researchTree: {\r\n                  ...state.research.researchTree,\r\n                  [nodeId]: {\r\n                    ...node,\r\n                    completed: true,\r\n                    inProgress: false,\r\n                    progress: 100,\r\n                  },\r\n                },\r\n              },\r\n            };\r\n          }\r\n          return state;\r\n        }),\r\n\r\n        updateResearchProgress: () => set((state) => {\r\n          const updatedTree = { ...state.research.researchTree };\r\n          let hasChanges = false;\r\n          let newResearchPoints = state.research.points;\r\n\r\n          // Generate research points from research labs\r\n          const researchLabs = state.facilities.filter(f => f.name === 'Research Lab').length;\r\n          newResearchPoints += researchLabs * GAME_CONSTANTS.RESEARCH_POINTS_PER_TICK;\r\n\r\n          Object.entries(updatedTree).forEach(([nodeId, nodeData]) => {\r\n            if (nodeData.inProgress && nodeData.startedAt) {\r\n              const nodeConfig = RESEARCH_TREE.find((n: any) => n.id === nodeId);\r\n              if (!nodeConfig) return;\r\n\r\n              // Calculate progress based on time\r\n              const timeElapsed = Date.now() - nodeData.startedAt;\r\n              const hoursElapsed = timeElapsed / (1000 * 60 * 60); // Convert to hours\r\n              const expectedProgress = (hoursElapsed / nodeConfig.cost.time) * 100;\r\n              const newProgress = Math.min(100, expectedProgress);\r\n\r\n              if (newProgress !== nodeData.progress) {\r\n                updatedTree[nodeId] = { ...nodeData, progress: newProgress };\r\n                hasChanges = true;\r\n\r\n                // Auto-complete when reaching 100%\r\n                if (newProgress >= 100) {\r\n                  updatedTree[nodeId] = {\r\n                    ...updatedTree[nodeId],\r\n                    completed: true,\r\n                    inProgress: false,\r\n                  };\r\n\r\n                  // Apply unlocks\r\n                  if (nodeConfig.unlocks.species) {\r\n                    nodeConfig.unlocks.species.forEach((species: string) => {\r\n                      if (!state.research.completed.includes(species)) {\r\n                        state.research.completed.push(species);\r\n                      }\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n          if (hasChanges || newResearchPoints !== state.research.points) {\r\n            return {\r\n              ...state,\r\n              research: {\r\n                ...state.research,\r\n                points: newResearchPoints,\r\n                researchTree: updatedTree,\r\n              },\r\n            };\r\n          }\r\n\r\n          return state;\r\n        }),\r\n\r\n        // Undo/Redo functionality\r\n        addToHistory: (action) => set((state) => {\r\n          const newHistory = [...state.undoRedo.history];\r\n\r\n          // Remove any actions after current index (when user made new action after undo)\r\n          if (state.undoRedo.currentIndex < newHistory.length - 1) {\r\n            newHistory.splice(state.undoRedo.currentIndex + 1);\r\n          }\r\n\r\n          // Add new action\r\n          newHistory.push(action);\r\n\r\n          // Limit history size\r\n          if (newHistory.length > state.undoRedo.maxHistorySize) {\r\n            newHistory.shift();\r\n          }\r\n\r\n          return {\r\n            ...state,\r\n            undoRedo: {\r\n              ...state.undoRedo,\r\n              history: newHistory,\r\n              currentIndex: newHistory.length - 1,\r\n            },\r\n          };\r\n        }),\r\n\r\n        undo: () => set((state) => {\r\n          if (state.undoRedo.currentIndex < 0) return state;\r\n\r\n          const currentAction = state.undoRedo.history[state.undoRedo.currentIndex];\r\n          if (!currentAction.previousState) return state;\r\n\r\n          // Apply previous state\r\n          const newState = {\r\n            ...state,\r\n            ...currentAction.previousState,\r\n            undoRedo: {\r\n              ...state.undoRedo,\r\n              currentIndex: state.undoRedo.currentIndex - 1,\r\n            },\r\n          };\r\n\r\n          return newState;\r\n        }),\r\n\r\n        redo: () => set((state) => {\r\n          if (state.undoRedo.currentIndex >= state.undoRedo.history.length - 1) return state;\r\n\r\n          const nextIndex = state.undoRedo.currentIndex + 1;\r\n          const nextAction = state.undoRedo.history[nextIndex];\r\n\r\n          // Reapply the action\r\n          let newState = { ...state };\r\n\r\n          if (nextAction.type === 'PLACE_FACILITY') {\r\n            newState.facilities = [...state.facilities, nextAction.data.facility];\r\n            newState.resources = { ...state.resources, ...nextAction.data.resourceChanges };\r\n          } else if (nextAction.type === 'PLACE_XENOMORPH') {\r\n            newState.xenomorphs = [...state.xenomorphs, nextAction.data.xenomorph];\r\n          } else if (nextAction.type === 'REMOVE_FACILITY') {\r\n            newState.facilities = state.facilities.filter(f => f.id !== nextAction.data.facility.id);\r\n            newState.resources = {\r\n              ...state.resources,\r\n              credits: state.resources.credits + nextAction.data.refund,\r\n              power: state.resources.power + nextAction.data.powerReturn,\r\n              maxPower: state.resources.maxPower - nextAction.data.maxPowerDecrease,\r\n            };\r\n          } else if (nextAction.type === 'REMOVE_XENOMORPH') {\r\n            newState.xenomorphs = state.xenomorphs.filter(x => x.id !== nextAction.data.xenomorph.id);\r\n          }\r\n\r\n          newState.undoRedo = {\r\n            ...state.undoRedo,\r\n            currentIndex: nextIndex,\r\n          };\r\n\r\n          return newState;\r\n        }),\r\n\r\n        canUndo: () => {\r\n          const state = get();\r\n          return state.undoRedo.currentIndex >= 0;\r\n        },\r\n\r\n        canRedo: () => {\r\n          const state = get();\r\n          return state.undoRedo.currentIndex < state.undoRedo.history.length - 1;\r\n        },\r\n\r\n        // Reset game\r\n        reset: () => set(initialState),\r\n      }),\r\n      {\r\n        name: 'xenomorph-park-game',\r\n        version: 1,\r\n        migrate: (persistedState: any, version) => {\r\n          // Handle migration for research.available field\r\n          if (persistedState && persistedState.research) {\r\n            if (!persistedState.research.available) {\r\n              persistedState.research.available = ['Drone'];\r\n            }\r\n            if (!persistedState.research.researchTree) {\r\n              persistedState.research.researchTree = {};\r\n            }\r\n          }\r\n          return persistedState;\r\n        },\r\n        partialize: (state) => ({\r\n          // Only persist certain parts of the state\r\n          day: state.day,\r\n          hour: state.hour,\r\n          tick: state.tick,\r\n          resources: state.resources,\r\n          facilities: state.facilities,\r\n          xenomorphs: state.xenomorphs,\r\n          research: {\r\n            completed: state.research.completed,\r\n            inProgress: state.research.inProgress,\r\n            points: state.research.points,\r\n            available: state.research.available,\r\n            researchTree: state.research.researchTree,\r\n          },\r\n          economics: state.economics,\r\n        }),\r\n      }\r\n    ),\r\n    { name: 'xenomorph-park-store' }\r\n  )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\types\\index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[228,231],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[228,231],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ReactNode } from 'react';\r\n\r\n// Undo/Redo types\r\nexport interface GameAction {\r\n  type: 'PLACE_FACILITY' | 'PLACE_XENOMORPH' | 'REMOVE_FACILITY' | 'REMOVE_XENOMORPH' | 'MODIFY_RESOURCES';\r\n  timestamp: number;\r\n  data: any;\r\n  previousState?: Partial<GameState>;\r\n}\r\n\r\nexport interface UndoRedoState {\r\n  history: GameAction[];\r\n  currentIndex: number;\r\n  maxHistorySize: number;\r\n}\r\n\r\n// Core game types\r\nexport interface GameState {\r\n  paused: boolean;\r\n  day: number;\r\n  hour: number;\r\n  tick: number;\r\n  resources: Resources;\r\n  facilities: PlacedFacility[];\r\n  xenomorphs: PlacedXenomorph[];\r\n  selectedFacility: FacilityDefinition | null;\r\n  selectedSpecies: XenomorphSpecies | null;\r\n  research: ResearchState;\r\n  economics: EconomicsState;\r\n  undoRedo: UndoRedoState;\r\n}\r\n\r\nexport interface Resources {\r\n  credits: number;\r\n  power: number;\r\n  maxPower: number;\r\n  research: number;\r\n  security: SecurityLevel;\r\n  visitors: number;\r\n  maxVisitors: number;\r\n  dailyRevenue: number;\r\n  dailyExpenses: number;\r\n}\r\n\r\nexport type SecurityLevel = 'Low' | 'Medium' | 'High' | 'Maximum';\r\n\r\nexport interface PlacedFacility {\r\n  id: string;\r\n  name: string;\r\n  position: GridPosition;\r\n  cost: number;\r\n  powerRequirement: number;\r\n  description: string;\r\n}\r\n\r\nexport interface PlacedXenomorph {\r\n  id: string;\r\n  species: XenomorphSpecies;\r\n  position: GridPosition;\r\n  containmentLevel: number;\r\n}\r\n\r\nexport interface GridPosition {\r\n  row: number;\r\n  col: number;\r\n}\r\n\r\nexport interface ResearchState {\r\n  completed: string[];\r\n  inProgress: string | null;\r\n  points: number;\r\n  available: string[];\r\n  researchTree: {\r\n    [nodeId: string]: {\r\n      completed: boolean;\r\n      inProgress: boolean;\r\n      progress: number;\r\n      startedAt?: number;\r\n    };\r\n  };\r\n}\r\n\r\n\r\nexport interface EconomicsState {\r\n  totalRevenue: number;\r\n  totalExpenses: number;\r\n  profitMargin: number;\r\n  visitorSatisfaction: number;\r\n  attractionValue: number;\r\n  lastDayProfit: number;\r\n}\r\n\r\n// Game definition types\r\nexport interface XenomorphSpecies {\r\n  name: string;\r\n  description: string;\r\n  dangerLevel: number;\r\n  containmentDifficulty: number;\r\n  researchCost: number;\r\n  foodRequirement: FoodRequirement;\r\n  specialAbilities: string[];\r\n}\r\n\r\nexport type FoodRequirement = 'Low' | 'Medium' | 'High' | 'Very High';\r\n\r\nexport interface FacilityDefinition {\r\n  name: string;\r\n  cost: number;\r\n  powerRequirement: number;\r\n  description: string;\r\n}\r\n\r\nexport interface Weapon {\r\n  name: string;\r\n  damage: number;\r\n  ammoCapacity: number;\r\n  rateOfFire: RateOfFire;\r\n  special: string;\r\n}\r\n\r\nexport type RateOfFire = 'Low' | 'Medium' | 'High' | 'Very High';\r\n\r\nexport interface CrisisEvent {\r\n  name: string;\r\n  probability: number;\r\n  severity: Severity;\r\n  description: string;\r\n  responseOptions: string[];\r\n}\r\n\r\nexport type Severity = 'Low' | 'Medium' | 'High' | 'Critical';\r\n\r\nexport interface GridConfig {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport interface GridCell {\r\n  position: GridPosition;\r\n  occupied: boolean;\r\n  content: PlacedFacility | PlacedXenomorph | null;\r\n  type: 'empty' | 'facility' | 'xenomorph';\r\n}\r\n\r\n// UI types\r\nexport interface ButtonVariant {\r\n  variant?: 'primary' | 'secondary' | 'danger' | 'warning' | 'outline';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  disabled?: boolean;\r\n  loading?: boolean;\r\n}\r\n\r\nexport interface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: ReactNode;\r\n}\r\n\r\nexport interface StatusMessage {\r\n  id: string;\r\n  message: string;\r\n  type: 'info' | 'success' | 'warning' | 'error';\r\n  timestamp: number;\r\n}\r\n\r\n// Store types\r\nexport interface GameStore extends GameState {\r\n  // Actions\r\n  togglePause: () => void;\r\n  updateResources: (resources: Partial<Resources>) => void;\r\n  placeFacility: (facility: FacilityDefinition, position: GridPosition) => void;\r\n  placeXenomorph: (species: XenomorphSpecies, position: GridPosition) => void;\r\n  removeFacility: (facilityId: string) => void;\r\n  removeXenomorph: (xenomorphId: string) => void;\r\n  selectFacility: (facility: FacilityDefinition | null) => void;\r\n  selectSpecies: (species: XenomorphSpecies | null) => void;\r\n  startResearch: (species: string) => void;\r\n  completeResearch: (species: string) => void;\r\n  addStatusMessage: (message: string, type: StatusMessage['type']) => void;\r\n\r\n  // Game mechanics actions\r\n  gameTick: () => void;\r\n  processEconomics: () => void;\r\n  updateTime: () => void;\r\n\r\n  // Research tree actions\r\n  startResearchNode: (nodeId: string) => void;\r\n  completeResearchNode: (nodeId: string) => void;\r\n  updateResearchProgress: () => void;\r\n\r\n  // Undo/Redo actions\r\n  addToHistory: (action: GameAction) => void;\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: () => boolean;\r\n  canRedo: () => boolean;\r\n\r\n  // Save/Load actions\r\n  saveGame: (slotId: string, name?: string) => boolean;\r\n  loadGame: (slotId: string) => boolean;\r\n  quickSave: () => boolean;\r\n  quickLoad: () => boolean;\r\n\r\n  reset: () => void;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\utils\\campaignEvents.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CampaignScenario' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[527,530],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[527,530],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[882,885],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[882,885],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1026,1029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1026,1029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":391,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":391,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14141,14144],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14141,14144],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":439,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":439,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15689,15692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15689,15692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":454,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":454,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16245,16248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16245,16248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":460,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":460,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16466,16469],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16466,16469],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":469,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":469,"endColumn":78,"suggestions":[{"messageId":"addBrackets","fix":{"range":[16718,16961],"text":"{ const progress = localStorage.getItem('campaign-objective-progress');\r\n        if (!progress) return false;\r\n        const completedObjectives = JSON.parse(progress);\r\n        return completedObjectives.includes(trigger.condition.objectiveId); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":471,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":471,"endColumn":58,"suggestions":[{"messageId":"addBrackets","fix":{"range":[16718,16961],"text":"{ const progress = localStorage.getItem('campaign-objective-progress');\r\n        if (!progress) return false;\r\n        const completedObjectives = JSON.parse(progress);\r\n        return completedObjectives.includes(trigger.condition.objectiveId); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":494,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":494,"endColumn":43,"suggestions":[{"messageId":"addBrackets","fix":{"range":[17554,17898],"text":"{ const resourceUpdates: any = {};\r\n          Object.entries(consequence.effect).forEach(([resource, value]) => {\r\n            const currentValue = gameStore.resources[resource] || 0;\r\n            resourceUpdates[resource] = currentValue + (value as number);\r\n          });\r\n          gameStore.updateResources(resourceUpdates);\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":494,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":494,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17577,17580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17577,17580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":513,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":513,"endColumn":95,"suggestions":[{"messageId":"addBrackets","fix":{"range":[18298,18599],"text":"{ const storyFlags = JSON.parse(localStorage.getItem('campaign-story-flags') || '{}');\r\n          if (consequence.effect.flag) {\r\n            storyFlags[consequence.effect.flag] = true;\r\n            localStorage.setItem('campaign-story-flags', JSON.stringify(storyFlags));\r\n          }\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":540,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":540,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19126,19129],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19126,19129],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":552,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":552,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19560,19563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19560,19563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":566,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":566,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20042,20045],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20042,20045],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":577,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":577,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20277,20280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20277,20280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useGameStore } from '../stores/gameStore';\r\nimport { CampaignScenario } from '../components/game/CampaignMode';\r\n\r\nexport interface CampaignEvent {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  storyText: string;\r\n  triggerCondition: EventTrigger;\r\n  choices: EventChoice[];\r\n  oneTime: boolean;\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n  scenarioId?: string;\r\n}\r\n\r\nexport interface EventTrigger {\r\n  type: 'time' | 'resource' | 'facility' | 'species' | 'random' | 'objective';\r\n  condition: any;\r\n  probability?: number;\r\n}\r\n\r\nexport interface EventChoice {\r\n  id: string;\r\n  text: string;\r\n  description: string;\r\n  consequences: EventConsequence[];\r\n  requirements?: EventRequirement[];\r\n  disabled?: boolean;\r\n}\r\n\r\nexport interface EventConsequence {\r\n  type: 'resource' | 'facility' | 'species' | 'story' | 'objective' | 'crisis';\r\n  effect: any;\r\n  description: string;\r\n}\r\n\r\nexport interface EventRequirement {\r\n  type: 'resource' | 'facility' | 'research' | 'species';\r\n  condition: any;\r\n}\r\n\r\nclass CampaignEventManager {\r\n  private static instance: CampaignEventManager;\r\n  private activeEvents: string[] = [];\r\n  private triggeredEvents: string[] = [];\r\n  private eventQueue: CampaignEvent[] = [];\r\n  private lastEventCheck: number = 0;\r\n  private readonly EVENT_CHECK_INTERVAL = 30000; // 30 seconds\r\n\r\n  public static getInstance(): CampaignEventManager {\r\n    if (!CampaignEventManager.instance) {\r\n      CampaignEventManager.instance = new CampaignEventManager();\r\n    }\r\n    return CampaignEventManager.instance;\r\n  }\r\n\r\n  private getCampaignEvents(): CampaignEvent[] {\r\n    return [\r\n      // Universal Events\r\n      {\r\n        id: 'power_shortage',\r\n        name: 'Power Grid Malfunction',\r\n        description: 'A critical power shortage threatens park operations',\r\n        storyText: 'Sparks fly from the main power grid as warning lights flash across the control room. The automated systems are struggling to maintain containment fields. Emergency power will only last so long.',\r\n        triggerCondition: {\r\n          type: 'facility',\r\n          condition: { minFacilities: 5, powerConsumption: 80 },\r\n          probability: 0.15\r\n        },\r\n        choices: [\r\n          {\r\n            id: 'emergency_power',\r\n            text: 'Activate Emergency Generators',\r\n            description: 'Use backup power to maintain systems (-2000 credits)',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { credits: -2000 },\r\n                description: 'Emergency power systems engaged'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'resource', condition: { credits: 2000 } }]\r\n          },\r\n          {\r\n            id: 'shutdown_systems',\r\n            text: 'Shutdown Non-Essential Systems',\r\n            description: 'Reduce power consumption but risk containment issues',\r\n            consequences: [\r\n              {\r\n                type: 'crisis',\r\n                effect: { type: 'containment_risk', severity: 0.3 },\r\n                description: 'Increased containment instability'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'reroute_power',\r\n            text: 'Reroute Power Systems',\r\n            description: 'Technical solution requiring research expertise',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { research: 500 },\r\n                description: 'Gained insights from power management'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'research', condition: { completed: ['Advanced Power Systems'] } }]\r\n          }\r\n        ],\r\n        oneTime: false,\r\n        priority: 'high'\r\n      },\r\n\r\n      {\r\n        id: 'visitor_incident',\r\n        name: 'Visitor Safety Concern',\r\n        description: 'A group of visitors reports concerning behavior from specimens',\r\n        storyText: 'A family on the observation deck points excitedly at the containment area, but their guide looks concerned. One of the xenomorphs is displaying unusual aggressive posturing toward the viewing window.',\r\n        triggerCondition: {\r\n          type: 'resource',\r\n          condition: { visitors: 100 },\r\n          probability: 0.1\r\n        },\r\n        choices: [\r\n          {\r\n            id: 'increase_security',\r\n            text: 'Deploy Additional Security',\r\n            description: 'Station more guards at viewing areas (-500 credits/day)',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { dailyExpenses: 500, safety: 20 },\r\n                description: 'Enhanced security protocols active'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'transparency_tour',\r\n            text: 'Offer Educational Tour',\r\n            description: 'Explain xenomorph behavior to reassure visitors',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { reputation: 10, visitors: 20 },\r\n                description: 'Visitors appreciate transparency'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'implement_barriers',\r\n            text: 'Install Reinforced Barriers',\r\n            description: 'Upgrade viewing areas for better safety (-3000 credits)',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { credits: -3000, safety: 50 },\r\n                description: 'Permanent safety improvements installed'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'resource', condition: { credits: 3000 } }]\r\n          }\r\n        ],\r\n        oneTime: false,\r\n        priority: 'medium'\r\n      },\r\n\r\n      {\r\n        id: 'corporate_inspection',\r\n        name: 'Corporate Inspection',\r\n        description: 'Weyland-Yutani executives arrive for an unannounced inspection',\r\n        storyText: 'A sleek corporate shuttle lands at the facility. Executives in pristine suits emerge, their faces unreadable as they approach with clipboards and scanning devices. This inspection could determine the future of your operation.',\r\n        triggerCondition: {\r\n          type: 'time',\r\n          condition: { day: 15 },\r\n          probability: 0.8\r\n        },\r\n        choices: [\r\n          {\r\n            id: 'showcase_specimens',\r\n            text: 'Highlight Prize Specimens',\r\n            description: 'Show off your most impressive xenomorphs',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { reputation: 30, funding: 5000 },\r\n                description: 'Executives impressed with specimens'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'species', condition: { minSpecies: 3 } }]\r\n          },\r\n          {\r\n            id: 'demonstrate_safety',\r\n            text: 'Emphasize Safety Protocols',\r\n            description: 'Focus on your containment and safety measures',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { safety: 40, funding: 2000 },\r\n                description: 'Safety protocols meet corporate standards'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'facility', condition: { hasType: 'Security Station' } }]\r\n          },\r\n          {\r\n            id: 'financial_presentation',\r\n            text: 'Present Financial Success',\r\n            description: 'Show profit margins and visitor satisfaction',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { funding: 10000 },\r\n                description: 'Corporate pleased with profitability'\r\n              }\r\n            ],\r\n            requirements: [{ type: 'resource', condition: { credits: 20000, visitors: 500 } }]\r\n          }\r\n        ],\r\n        oneTime: true,\r\n        priority: 'high'\r\n      },\r\n\r\n      // Scenario-Specific Events\r\n      {\r\n        id: 'hadleys_hope_storm',\r\n        name: 'Atmospheric Storm Warning',\r\n        description: 'Severe weather approaching Hadley\\'s Hope',\r\n        storyText: 'The weather monitoring station crackles with urgent warnings. A massive atmospheric storm is bearing down on the colony. The winds could reach 200 mph, and the electrical activity might interfere with containment systems.',\r\n        triggerCondition: {\r\n          type: 'time',\r\n          condition: { day: 8 },\r\n          probability: 1.0\r\n        },\r\n        scenarioId: 'hadleys_hope',\r\n        choices: [\r\n          {\r\n            id: 'storm_shelter',\r\n            text: 'Prepare Storm Shelters',\r\n            description: 'Secure all personnel and equipment',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { credits: -1000, safety: 30 },\r\n                description: 'Colony secured against storm'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'maintain_operations',\r\n            text: 'Maintain Critical Operations',\r\n            description: 'Keep essential systems running during storm',\r\n            consequences: [\r\n              {\r\n                type: 'crisis',\r\n                effect: { type: 'equipment_damage', severity: 0.4 },\r\n                description: 'Storm damages some equipment'\r\n              },\r\n              {\r\n                type: 'resource',\r\n                effect: { research: 300 },\r\n                description: 'Gathered valuable storm data'\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        oneTime: true,\r\n        priority: 'critical'\r\n      },\r\n\r\n      {\r\n        id: 'alien_homeworld_migration',\r\n        name: 'Native Xenomorph Migration',\r\n        description: 'Wild xenomorphs are migrating through the area',\r\n        storyText: 'Seismic sensors detect movement in the deep caves. A massive migration of native xenomorphs is passing through the area. They seem curious about your facility but maintain their distance... for now.',\r\n        triggerCondition: {\r\n          type: 'time',\r\n          condition: { day: 12 },\r\n          probability: 1.0\r\n        },\r\n        scenarioId: 'alien_homeworld',\r\n        choices: [\r\n          {\r\n            id: 'peaceful_contact',\r\n            text: 'Attempt Peaceful Contact',\r\n            description: 'Try to communicate with the native species',\r\n            consequences: [\r\n              {\r\n                type: 'species',\r\n                effect: { unlock: 'Native Xenomorph Variant' },\r\n                description: 'Peaceful contact successful'\r\n              },\r\n              {\r\n                type: 'resource',\r\n                effect: { research: 1000 },\r\n                description: 'Learned about native behavior'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'defensive_position',\r\n            text: 'Take Defensive Position',\r\n            description: 'Secure the facility and wait for them to pass',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { safety: 20 },\r\n                description: 'No incidents during migration'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'capture_attempt',\r\n            text: 'Attempt to Capture Specimens',\r\n            description: 'Try to capture some natives for study',\r\n            consequences: [\r\n              {\r\n                type: 'crisis',\r\n                effect: { type: 'aggressive_response', severity: 0.6 },\r\n                description: 'Native xenomorphs become hostile'\r\n              },\r\n              {\r\n                type: 'species',\r\n                effect: { capture: 'Hostile Native Xenomorph' },\r\n                description: 'Captured a specimen but angered the hive'\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        oneTime: true,\r\n        priority: 'critical'\r\n      },\r\n\r\n      {\r\n        id: 'research_breakthrough',\r\n        name: 'Scientific Breakthrough',\r\n        description: 'Your research team makes an unexpected discovery',\r\n        storyText: 'Dr. Chen bursts into the control room, her eyes bright with excitement. \"You need to see this,\" she says, pulling up holographic displays. \"We\\'ve discovered something in the xenomorph genetic structure that could change everything.\"',\r\n        triggerCondition: {\r\n          type: 'resource',\r\n          condition: { research: 2000 },\r\n          probability: 0.2\r\n        },\r\n        choices: [\r\n          {\r\n            id: 'publish_findings',\r\n            text: 'Publish Research Findings',\r\n            description: 'Share discovery with scientific community (+reputation)',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { reputation: 50, funding: 3000 },\r\n                description: 'Scientific community recognizes your work'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'classified_research',\r\n            text: 'Keep Research Classified',\r\n            description: 'Maintain secrecy for competitive advantage',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { research: 1000 },\r\n                description: 'Continued private research yields more insights'\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            id: 'corporate_partnership',\r\n            text: 'Partner with Corporation',\r\n            description: 'Share findings with Weyland-Yutani for funding',\r\n            consequences: [\r\n              {\r\n                type: 'resource',\r\n                effect: { funding: 10000 },\r\n                description: 'Major corporate funding secured'\r\n              },\r\n              {\r\n                type: 'story',\r\n                effect: { flag: 'corporate_partnership' },\r\n                description: 'Corporate oversight increases'\r\n              }\r\n            ]\r\n          }\r\n        ],\r\n        oneTime: false,\r\n        priority: 'medium'\r\n      }\r\n    ];\r\n  }\r\n\r\n  public checkForEvents(gameState: any): CampaignEvent | null {\r\n    const now = Date.now();\r\n    if (now - this.lastEventCheck < this.EVENT_CHECK_INTERVAL) {\r\n      return null;\r\n    }\r\n\r\n    this.lastEventCheck = now;\r\n    const events = this.getCampaignEvents();\r\n    const currentScenario = this.getCurrentScenario();\r\n\r\n    // Filter events based on scenario and conditions\r\n    const availableEvents = events.filter(event => {\r\n      // Check if event is one-time and already triggered\r\n      if (event.oneTime && this.triggeredEvents.includes(event.id)) {\r\n        return false;\r\n      }\r\n\r\n      // Check scenario specificity\r\n      if (event.scenarioId && (!currentScenario || currentScenario.id !== event.scenarioId)) {\r\n        return false;\r\n      }\r\n\r\n      // Check trigger conditions\r\n      return this.checkTriggerCondition(event.triggerCondition, gameState);\r\n    });\r\n\r\n    if (availableEvents.length === 0) return null;\r\n\r\n    // Sort by priority and select one\r\n    availableEvents.sort((a, b) => {\r\n      const priorityOrder = { 'critical': 4, 'high': 3, 'medium': 2, 'low': 1 };\r\n      return priorityOrder[b.priority] - priorityOrder[a.priority];\r\n    });\r\n\r\n    // For events with probability, check random chance\r\n    for (const event of availableEvents) {\r\n      if (event.triggerCondition.probability) {\r\n        if (Math.random() < event.triggerCondition.probability) {\r\n          return event;\r\n        }\r\n      } else {\r\n        return event;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private checkTriggerCondition(trigger: EventTrigger, gameState: any): boolean {\r\n    switch (trigger.type) {\r\n      case 'time':\r\n        return gameState.day >= trigger.condition.day;\r\n\r\n      case 'resource':\r\n        return Object.entries(trigger.condition).every(([resource, value]) => {\r\n          return gameState.resources[resource] >= value;\r\n        });\r\n\r\n      case 'facility':\r\n        if (trigger.condition.minFacilities) {\r\n          return gameState.facilities.length >= trigger.condition.minFacilities;\r\n        }\r\n        if (trigger.condition.hasType) {\r\n          return gameState.facilities.some((f: any) => f.name === trigger.condition.hasType);\r\n        }\r\n        return false;\r\n\r\n      case 'species':\r\n        if (trigger.condition.minSpecies) {\r\n          const uniqueSpecies = new Set(gameState.xenomorphs.map((x: any) => x.species.name));\r\n          return uniqueSpecies.size >= trigger.condition.minSpecies;\r\n        }\r\n        return false;\r\n\r\n      case 'random':\r\n        return Math.random() < (trigger.probability || 0.1);\r\n\r\n      case 'objective':\r\n        const progress = localStorage.getItem('campaign-objective-progress');\r\n        if (!progress) return false;\r\n        const completedObjectives = JSON.parse(progress);\r\n        return completedObjectives.includes(trigger.condition.objectiveId);\r\n\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  public triggerEvent(eventId: string): void {\r\n    if (!this.triggeredEvents.includes(eventId)) {\r\n      this.triggeredEvents.push(eventId);\r\n\r\n      // Save triggered events\r\n      localStorage.setItem('campaign-triggered-events', JSON.stringify(this.triggeredEvents));\r\n    }\r\n  }\r\n\r\n  public applyEventChoice(event: CampaignEvent, choice: EventChoice): void {\r\n    const gameStore = useGameStore.getState();\r\n\r\n    choice.consequences.forEach(consequence => {\r\n      switch (consequence.type) {\r\n        case 'resource':\r\n          const resourceUpdates: any = {};\r\n          Object.entries(consequence.effect).forEach(([resource, value]) => {\r\n            const currentValue = gameStore.resources[resource] || 0;\r\n            resourceUpdates[resource] = currentValue + (value as number);\r\n          });\r\n          gameStore.updateResources(resourceUpdates);\r\n          break;\r\n\r\n        case 'species':\r\n          if (consequence.effect.unlock) {\r\n            const research = gameStore.research;\r\n            if (!research.completed.includes(consequence.effect.unlock)) {\r\n              research.completed.push(consequence.effect.unlock);\r\n            }\r\n          }\r\n          break;\r\n\r\n        case 'story':\r\n          // Store story flags for future reference\r\n          const storyFlags = JSON.parse(localStorage.getItem('campaign-story-flags') || '{}');\r\n          if (consequence.effect.flag) {\r\n            storyFlags[consequence.effect.flag] = true;\r\n            localStorage.setItem('campaign-story-flags', JSON.stringify(storyFlags));\r\n          }\r\n          break;\r\n\r\n        case 'crisis':\r\n          // Trigger a crisis event\r\n          gameStore.addStatusMessage(\r\n            `‚ö†Ô∏è Crisis Event: ${consequence.description}`,\r\n            'error'\r\n          );\r\n          break;\r\n      }\r\n    });\r\n\r\n    // Mark event as triggered\r\n    this.triggerEvent(event.id);\r\n\r\n    // Add status message about the event outcome\r\n    gameStore.addStatusMessage(\r\n      `üìñ ${event.name}: ${choice.description}`,\r\n      'info'\r\n    );\r\n  }\r\n\r\n  public isChoiceAvailable(choice: EventChoice, gameState: any): boolean {\r\n    if (!choice.requirements) return true;\r\n\r\n    return choice.requirements.every(req => {\r\n      switch (req.type) {\r\n        case 'resource':\r\n          return Object.entries(req.condition).every(([resource, value]) => {\r\n            return gameState.resources[resource] >= value;\r\n          });\r\n\r\n        case 'facility':\r\n          if (req.condition.hasType) {\r\n            return gameState.facilities.some((f: any) => f.name === req.condition.hasType);\r\n          }\r\n          return false;\r\n\r\n        case 'research':\r\n          if (req.condition.completed) {\r\n            return req.condition.completed.every((research: string) =>\r\n              gameState.research.completed.includes(research)\r\n            );\r\n          }\r\n          return false;\r\n\r\n        case 'species':\r\n          if (req.condition.minSpecies) {\r\n            const uniqueSpecies = new Set(gameState.xenomorphs.map((x: any) => x.species.name));\r\n            return uniqueSpecies.size >= req.condition.minSpecies;\r\n          }\r\n          return false;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    });\r\n  }\r\n\r\n  private getCurrentScenario(): any {\r\n    try {\r\n      const scenarioData = localStorage.getItem('current-campaign-scenario');\r\n      return scenarioData ? JSON.parse(scenarioData) : null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public getTriggeredEvents(): string[] {\r\n    try {\r\n      const events = localStorage.getItem('campaign-triggered-events');\r\n      return events ? JSON.parse(events) : [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  public clearEventHistory(): void {\r\n    this.triggeredEvents = [];\r\n    this.activeEvents = [];\r\n    localStorage.removeItem('campaign-triggered-events');\r\n    localStorage.removeItem('campaign-story-flags');\r\n  }\r\n\r\n  public getStoryFlags(): Record<string, boolean> {\r\n    try {\r\n      return JSON.parse(localStorage.getItem('campaign-story-flags') || '{}');\r\n    } catch {\r\n      return {};\r\n    }\r\n  }\r\n}\r\n\r\nexport const campaignEventManager = CampaignEventManager.getInstance();","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\utils\\campaignRewards.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'scenarioId' is defined but never used.","line":310,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":310,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useGameStore } from '../stores/gameStore';\r\nimport { CampaignScenario } from '../components/game/CampaignMode';\r\n\r\nexport interface CampaignUnlock {\r\n  id: string;\r\n  type: 'species' | 'facility' | 'achievement' | 'technology';\r\n  name: string;\r\n  description: string;\r\n  unlockedBy: string; // scenario ID\r\n  dateUnlocked: number;\r\n}\r\n\r\nexport interface CampaignProgress {\r\n  completedScenarios: string[];\r\n  totalPlayTime: number;\r\n  bestCompletionTimes: Record<string, number>;\r\n  totalRewardsEarned: {\r\n    credits: number;\r\n    research: number;\r\n  };\r\n  unlocks: CampaignUnlock[];\r\n  statistics: CampaignStatistics;\r\n}\r\n\r\nexport interface CampaignStatistics {\r\n  scenariosCompleted: number;\r\n  scenariosAttempted: number;\r\n  totalObjectivesCompleted: number;\r\n  perfectRuns: number; // scenarios completed with all optional objectives\r\n  fastestCompletion: number; // shortest scenario completion time\r\n  longestRun: number; // longest survival time\r\n  facilitiesBuilt: number;\r\n  speciesContained: number;\r\n  crisisesHandled: number;\r\n}\r\n\r\nclass CampaignRewardManager {\r\n  private static instance: CampaignRewardManager;\r\n\r\n  public static getInstance(): CampaignRewardManager {\r\n    if (!CampaignRewardManager.instance) {\r\n      CampaignRewardManager.instance = new CampaignRewardManager();\r\n    }\r\n    return CampaignRewardManager.instance;\r\n  }\r\n\r\n  private getProgress(): CampaignProgress {\r\n    const saved = localStorage.getItem('xenomorph-park-campaign-full-progress');\r\n    if (saved) {\r\n      return JSON.parse(saved);\r\n    }\r\n\r\n    return {\r\n      completedScenarios: [],\r\n      totalPlayTime: 0,\r\n      bestCompletionTimes: {},\r\n      totalRewardsEarned: { credits: 0, research: 0 },\r\n      unlocks: [],\r\n      statistics: {\r\n        scenariosCompleted: 0,\r\n        scenariosAttempted: 0,\r\n        totalObjectivesCompleted: 0,\r\n        perfectRuns: 0,\r\n        fastestCompletion: Infinity,\r\n        longestRun: 0,\r\n        facilitiesBuilt: 0,\r\n        speciesContained: 0,\r\n        crisisesHandled: 0\r\n      }\r\n    };\r\n  }\r\n\r\n  private saveProgress(progress: CampaignProgress): void {\r\n    localStorage.setItem('xenomorph-park-campaign-full-progress', JSON.stringify(progress));\r\n  }\r\n\r\n  public completeScenario(\r\n    scenario: CampaignScenario,\r\n    completionTime: number,\r\n    objectivesCompleted: number,\r\n    totalObjectives: number,\r\n    isPerfectRun: boolean\r\n  ): void {\r\n    const progress = this.getProgress();\r\n    const gameStore = useGameStore.getState();\r\n\r\n    // Add to completed scenarios if not already there\r\n    if (!progress.completedScenarios.includes(scenario.id)) {\r\n      progress.completedScenarios.push(scenario.id);\r\n      progress.statistics.scenariosCompleted++;\r\n    }\r\n\r\n    // Track best completion time\r\n    if (!progress.bestCompletionTimes[scenario.id] ||\r\n        completionTime < progress.bestCompletionTimes[scenario.id]) {\r\n      progress.bestCompletionTimes[scenario.id] = completionTime;\r\n    }\r\n\r\n    // Update statistics\r\n    progress.statistics.totalObjectivesCompleted += objectivesCompleted;\r\n\r\n    if (isPerfectRun) {\r\n      progress.statistics.perfectRuns++;\r\n    }\r\n\r\n    if (completionTime < progress.statistics.fastestCompletion) {\r\n      progress.statistics.fastestCompletion = completionTime;\r\n    }\r\n\r\n    // Apply rewards\r\n    if (scenario.rewards.credits) {\r\n      progress.totalRewardsEarned.credits += scenario.rewards.credits;\r\n      gameStore.updateResources({\r\n        credits: gameStore.resources.credits + scenario.rewards.credits\r\n      });\r\n    }\r\n\r\n    if (scenario.rewards.research) {\r\n      progress.totalRewardsEarned.research += scenario.rewards.research;\r\n      gameStore.updateResources({\r\n        research: gameStore.resources.research + scenario.rewards.research\r\n      });\r\n    }\r\n\r\n    // Process unlocks\r\n    this.processUnlocks(scenario, progress);\r\n\r\n    // Save progress\r\n    this.saveProgress(progress);\r\n\r\n    // Trigger unlock notifications\r\n    this.notifyUnlocks(scenario);\r\n  }\r\n\r\n  private processUnlocks(scenario: CampaignScenario, progress: CampaignProgress): void {\r\n    const gameStore = useGameStore.getState();\r\n\r\n    // Unlock species\r\n    if (scenario.rewards.unlockedSpecies) {\r\n      scenario.rewards.unlockedSpecies.forEach(speciesName => {\r\n        // Add to research completed if not already there\r\n        if (!gameStore.research.completed.includes(speciesName)) {\r\n          gameStore.research.completed.push(speciesName);\r\n        }\r\n\r\n        // Create unlock record\r\n        const unlock: CampaignUnlock = {\r\n          id: `species_${speciesName.toLowerCase().replace(/\\s+/g, '_')}`,\r\n          type: 'species',\r\n          name: speciesName,\r\n          description: `Unlocked ${speciesName} xenomorph species`,\r\n          unlockedBy: scenario.id,\r\n          dateUnlocked: Date.now()\r\n        };\r\n\r\n        // Add if not already unlocked\r\n        if (!progress.unlocks.some(u => u.id === unlock.id)) {\r\n          progress.unlocks.push(unlock);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Unlock facilities\r\n    if (scenario.rewards.unlockedFacilities) {\r\n      scenario.rewards.unlockedFacilities.forEach(facilityName => {\r\n        const unlock: CampaignUnlock = {\r\n          id: `facility_${facilityName.toLowerCase().replace(/\\s+/g, '_')}`,\r\n          type: 'facility',\r\n          name: facilityName,\r\n          description: `Unlocked ${facilityName} facility`,\r\n          unlockedBy: scenario.id,\r\n          dateUnlocked: Date.now()\r\n        };\r\n\r\n        if (!progress.unlocks.some(u => u.id === unlock.id)) {\r\n          progress.unlocks.push(unlock);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Create achievement unlocks\r\n    this.createAchievementUnlocks(scenario, progress);\r\n  }\r\n\r\n  private createAchievementUnlocks(scenario: CampaignScenario, progress: CampaignProgress): void {\r\n    const achievements: CampaignUnlock[] = [];\r\n\r\n    // Scenario-specific achievements\r\n    switch (scenario.id) {\r\n      case 'tutorial_first_park':\r\n        achievements.push({\r\n          id: 'achievement_first_park_manager',\r\n          type: 'achievement',\r\n          name: 'Park Manager',\r\n          description: 'Successfully completed your first xenomorph park',\r\n          unlockedBy: scenario.id,\r\n          dateUnlocked: Date.now()\r\n        });\r\n        break;\r\n\r\n      case 'hadleys_hope':\r\n        achievements.push({\r\n          id: 'achievement_terraformer',\r\n          type: 'achievement',\r\n          name: 'Terraformer',\r\n          description: 'Successfully managed Hadley\\'s Hope colony operations',\r\n          unlockedBy: scenario.id,\r\n          dateUnlocked: Date.now()\r\n        });\r\n        break;\r\n\r\n      case 'alien_homeworld':\r\n        achievements.push({\r\n          id: 'achievement_xenomorph_expert',\r\n          type: 'achievement',\r\n          name: 'Xenomorph Expert',\r\n          description: 'Survived on the alien homeworld',\r\n          unlockedBy: scenario.id,\r\n          dateUnlocked: Date.now()\r\n        });\r\n        break;\r\n    }\r\n\r\n    // Milestone achievements\r\n    if (progress.completedScenarios.length === 3) {\r\n      achievements.push({\r\n        id: 'achievement_experienced_manager',\r\n        type: 'achievement',\r\n        name: 'Experienced Manager',\r\n        description: 'Completed 3 campaign scenarios',\r\n        unlockedBy: scenario.id,\r\n        dateUnlocked: Date.now()\r\n      });\r\n    }\r\n\r\n    if (progress.completedScenarios.length === 6) {\r\n      achievements.push({\r\n        id: 'achievement_campaign_master',\r\n        type: 'achievement',\r\n        name: 'Campaign Master',\r\n        description: 'Completed all campaign scenarios',\r\n        unlockedBy: scenario.id,\r\n        dateUnlocked: Date.now()\r\n      });\r\n    }\r\n\r\n    // Add new achievements\r\n    achievements.forEach(achievement => {\r\n      if (!progress.unlocks.some(u => u.id === achievement.id)) {\r\n        progress.unlocks.push(achievement);\r\n      }\r\n    });\r\n  }\r\n\r\n  private notifyUnlocks(scenario: CampaignScenario): void {\r\n    const gameStore = useGameStore.getState();\r\n\r\n    // Notify species unlocks\r\n    if (scenario.rewards.unlockedSpecies) {\r\n      scenario.rewards.unlockedSpecies.forEach(species => {\r\n        gameStore.addStatusMessage(`üß¨ Species Unlocked: ${species}`, 'success');\r\n      });\r\n    }\r\n\r\n    // Notify facility unlocks\r\n    if (scenario.rewards.unlockedFacilities) {\r\n      scenario.rewards.unlockedFacilities.forEach(facility => {\r\n        gameStore.addStatusMessage(`üèóÔ∏è Facility Unlocked: ${facility}`, 'success');\r\n      });\r\n    }\r\n  }\r\n\r\n  public getUnlockedSpecies(): string[] {\r\n    const progress = this.getProgress();\r\n    return progress.unlocks\r\n      .filter(unlock => unlock.type === 'species')\r\n      .map(unlock => unlock.name);\r\n  }\r\n\r\n  public getUnlockedFacilities(): string[] {\r\n    const progress = this.getProgress();\r\n    return progress.unlocks\r\n      .filter(unlock => unlock.type === 'facility')\r\n      .map(unlock => unlock.name);\r\n  }\r\n\r\n  public isSpeciesUnlocked(speciesName: string): boolean {\r\n    return this.getUnlockedSpecies().includes(speciesName);\r\n  }\r\n\r\n  public isFacilityUnlocked(facilityName: string): boolean {\r\n    return this.getUnlockedFacilities().includes(facilityName);\r\n  }\r\n\r\n  public getAchievements(): CampaignUnlock[] {\r\n    const progress = this.getProgress();\r\n    return progress.unlocks.filter(unlock => unlock.type === 'achievement');\r\n  }\r\n\r\n  public getStatistics(): CampaignStatistics {\r\n    return this.getProgress().statistics;\r\n  }\r\n\r\n  public getCompletionRate(): number {\r\n    const progress = this.getProgress();\r\n    const totalScenarios = 6; // Update this if more scenarios are added\r\n    return (progress.completedScenarios.length / totalScenarios) * 100;\r\n  }\r\n\r\n  public startScenario(scenarioId: string): void {\r\n    const progress = this.getProgress();\r\n    progress.statistics.scenariosAttempted++;\r\n    this.saveProgress(progress);\r\n\r\n    // Store start time for this session\r\n    localStorage.setItem('campaign-session-start', Date.now().toString());\r\n  }\r\n\r\n  public updateSessionStats(facilitiesBuilt: number, speciesContained: number): void {\r\n    const progress = this.getProgress();\r\n    progress.statistics.facilitiesBuilt += facilitiesBuilt;\r\n    progress.statistics.speciesContained += speciesContained;\r\n    this.saveProgress(progress);\r\n  }\r\n\r\n  public resetProgress(): void {\r\n    localStorage.removeItem('xenomorph-park-campaign-full-progress');\r\n    localStorage.removeItem('xenomorph-park-campaign-progress');\r\n  }\r\n}\r\n\r\nexport const campaignRewardManager = CampaignRewardManager.getInstance();","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\utils\\campaignSaveManager.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3633,3636],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3633,3636],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":321,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":321,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9798,9801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9798,9801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":325,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":325,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":330,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":330,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10055,10058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10055,10058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":334,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":334,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":339,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":339,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10304,10307],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10304,10307],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":355,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":355,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GameState } from '../types';\r\nimport { CampaignScenario } from '../components/game/CampaignMode';\r\n\r\nexport interface CampaignSaveData {\r\n  id: string;\r\n  scenarioId: string;\r\n  scenarioName: string;\r\n  saveDate: number;\r\n  gameState: GameState;\r\n  objectives: {\r\n    [objectiveId: string]: {\r\n      completed: boolean;\r\n      progress: number;\r\n      completedAt?: number;\r\n    };\r\n  };\r\n  sessionData: {\r\n    startTime: number;\r\n    elapsedTime: number;\r\n    facilitiesBuilt: number;\r\n    speciesContained: number;\r\n    crisisesHandled: number;\r\n    checkpoints: CampaignCheckpoint[];\r\n  };\r\n  metadata: {\r\n    difficulty: string;\r\n    biome: string;\r\n    playerNotes?: string;\r\n  };\r\n}\r\n\r\nexport interface CampaignCheckpoint {\r\n  id: string;\r\n  timestamp: number;\r\n  gameState: Partial<GameState>;\r\n  objectiveProgress: { [objectiveId: string]: number };\r\n  description: string;\r\n  automatic: boolean; // true for auto-saves, false for manual\r\n}\r\n\r\nclass CampaignSaveManager {\r\n  private static instance: CampaignSaveManager;\r\n  private readonly MAX_SAVES_PER_SCENARIO = 5;\r\n  private readonly AUTO_SAVE_INTERVAL = 5 * 60 * 1000; // 5 minutes\r\n  private autoSaveTimer: NodeJS.Timeout | null = null;\r\n\r\n  public static getInstance(): CampaignSaveManager {\r\n    if (!CampaignSaveManager.instance) {\r\n      CampaignSaveManager.instance = new CampaignSaveManager();\r\n    }\r\n    return CampaignSaveManager.instance;\r\n  }\r\n\r\n  private getStorageKey(scenarioId: string): string {\r\n    return `xenomorph-park-campaign-saves-${scenarioId}`;\r\n  }\r\n\r\n  private getQuickSaveKey(scenarioId: string): string {\r\n    return `xenomorph-park-campaign-quicksave-${scenarioId}`;\r\n  }\r\n\r\n  public startCampaignSession(scenario: CampaignScenario, gameState: GameState): void {\r\n    // Initialize session tracking\r\n    const sessionData = {\r\n      startTime: Date.now(),\r\n      elapsedTime: 0,\r\n      facilitiesBuilt: 0,\r\n      speciesContained: 0,\r\n      crisisesHandled: 0,\r\n      checkpoints: []\r\n    };\r\n\r\n    // Store current session info\r\n    localStorage.setItem('current-campaign-session', JSON.stringify({\r\n      scenarioId: scenario.id,\r\n      sessionData\r\n    }));\r\n\r\n    // Start auto-save timer\r\n    this.startAutoSave(scenario.id);\r\n\r\n    // Create initial checkpoint\r\n    this.createCheckpoint(scenario.id, gameState, 'Campaign started', true);\r\n  }\r\n\r\n  public endCampaignSession(): void {\r\n    // Stop auto-save timer\r\n    if (this.autoSaveTimer) {\r\n      clearInterval(this.autoSaveTimer);\r\n      this.autoSaveTimer = null;\r\n    }\r\n\r\n    // Clear session data\r\n    localStorage.removeItem('current-campaign-session');\r\n  }\r\n\r\n  private startAutoSave(scenarioId: string): void {\r\n    if (this.autoSaveTimer) {\r\n      clearInterval(this.autoSaveTimer);\r\n    }\r\n\r\n    this.autoSaveTimer = setInterval(() => {\r\n      this.autoSave(scenarioId);\r\n    }, this.AUTO_SAVE_INTERVAL);\r\n  }\r\n\r\n  private autoSave(scenarioId: string): void {\r\n    try {\r\n      // Get current game state (this would need to be passed from the game)\r\n      const currentState = this.getCurrentGameState();\r\n      if (currentState) {\r\n        this.quickSave(scenarioId, currentState, 'Auto-save');\r\n      }\r\n    } catch (error) {\r\n      console.warn('Auto-save failed:', error);\r\n    }\r\n  }\r\n\r\n  private getCurrentGameState(): GameState | null {\r\n    // This would integrate with the game store to get current state\r\n    // For now, we'll return null as a placeholder\r\n    // In a real implementation, this would use useGameStore.getState()\r\n    return null;\r\n  }\r\n\r\n  public saveCampaign(\r\n    scenarioId: string,\r\n    gameState: GameState,\r\n    objectives: any,\r\n    playerNotes?: string\r\n  ): boolean {\r\n    try {\r\n      const scenario = this.getCurrentScenario();\r\n      if (!scenario) return false;\r\n\r\n      const sessionData = this.getCurrentSessionData();\r\n\r\n      const saveData: CampaignSaveData = {\r\n        id: `save_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        scenarioId,\r\n        scenarioName: scenario.name,\r\n        saveDate: Date.now(),\r\n        gameState: { ...gameState },\r\n        objectives: { ...objectives },\r\n        sessionData: { ...sessionData },\r\n        metadata: {\r\n          difficulty: scenario.difficulty,\r\n          biome: scenario.biome,\r\n          playerNotes\r\n        }\r\n      };\r\n\r\n      // Get existing saves\r\n      const existingSaves = this.getCampaignSaves(scenarioId);\r\n\r\n      // Add new save\r\n      existingSaves.push(saveData);\r\n\r\n      // Keep only the most recent saves\r\n      const trimmedSaves = existingSaves\r\n        .sort((a, b) => b.saveDate - a.saveDate)\r\n        .slice(0, this.MAX_SAVES_PER_SCENARIO);\r\n\r\n      // Save to localStorage\r\n      localStorage.setItem(this.getStorageKey(scenarioId), JSON.stringify(trimmedSaves));\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to save campaign:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public loadCampaign(saveId: string, scenarioId: string): CampaignSaveData | null {\r\n    try {\r\n      const saves = this.getCampaignSaves(scenarioId);\r\n      return saves.find(save => save.id === saveId) || null;\r\n    } catch (error) {\r\n      console.error('Failed to load campaign:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public quickSave(scenarioId: string, gameState: GameState, description?: string): boolean {\r\n    try {\r\n      const scenario = this.getCurrentScenario();\r\n      if (!scenario) return false;\r\n\r\n      const objectives = this.getCurrentObjectiveProgress();\r\n      const sessionData = this.getCurrentSessionData();\r\n\r\n      const saveData: CampaignSaveData = {\r\n        id: `quicksave_${Date.now()}`,\r\n        scenarioId,\r\n        scenarioName: scenario.name,\r\n        saveDate: Date.now(),\r\n        gameState: { ...gameState },\r\n        objectives: { ...objectives },\r\n        sessionData: { ...sessionData },\r\n        metadata: {\r\n          difficulty: scenario.difficulty,\r\n          biome: scenario.biome,\r\n          playerNotes: description || 'Quick save'\r\n        }\r\n      };\r\n\r\n      localStorage.setItem(this.getQuickSaveKey(scenarioId), JSON.stringify(saveData));\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to quick save:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public quickLoad(scenarioId: string): CampaignSaveData | null {\r\n    try {\r\n      const saveData = localStorage.getItem(this.getQuickSaveKey(scenarioId));\r\n      return saveData ? JSON.parse(saveData) : null;\r\n    } catch (error) {\r\n      console.error('Failed to quick load:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public getCampaignSaves(scenarioId: string): CampaignSaveData[] {\r\n    try {\r\n      const savesData = localStorage.getItem(this.getStorageKey(scenarioId));\r\n      return savesData ? JSON.parse(savesData) : [];\r\n    } catch (error) {\r\n      console.error('Failed to get campaign saves:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  public deleteCampaignSave(saveId: string, scenarioId: string): boolean {\r\n    try {\r\n      const saves = this.getCampaignSaves(scenarioId);\r\n      const filteredSaves = saves.filter(save => save.id !== saveId);\r\n\r\n      localStorage.setItem(this.getStorageKey(scenarioId), JSON.stringify(filteredSaves));\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to delete campaign save:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public createCheckpoint(\r\n    scenarioId: string,\r\n    gameState: GameState,\r\n    description: string,\r\n    automatic: boolean = false\r\n  ): void {\r\n    try {\r\n      const sessionString = localStorage.getItem('current-campaign-session');\r\n      if (!sessionString) return;\r\n\r\n      const sessionInfo = JSON.parse(sessionString);\r\n      const objectives = this.getCurrentObjectiveProgress();\r\n\r\n      const checkpoint: CampaignCheckpoint = {\r\n        id: `checkpoint_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,\r\n        timestamp: Date.now(),\r\n        gameState: {\r\n          day: gameState.day,\r\n          hour: gameState.hour,\r\n          resources: { ...gameState.resources },\r\n          facilities: [...gameState.facilities],\r\n          xenomorphs: [...gameState.xenomorphs]\r\n        },\r\n        objectiveProgress: { ...objectives },\r\n        description,\r\n        automatic\r\n      };\r\n\r\n      sessionInfo.sessionData.checkpoints.push(checkpoint);\r\n\r\n      // Keep only the last 10 checkpoints\r\n      if (sessionInfo.sessionData.checkpoints.length > 10) {\r\n        sessionInfo.sessionData.checkpoints = sessionInfo.sessionData.checkpoints.slice(-10);\r\n      }\r\n\r\n      localStorage.setItem('current-campaign-session', JSON.stringify(sessionInfo));\r\n    } catch (error) {\r\n      console.error('Failed to create checkpoint:', error);\r\n    }\r\n  }\r\n\r\n  public getCheckpoints(scenarioId: string): CampaignCheckpoint[] {\r\n    try {\r\n      const sessionString = localStorage.getItem('current-campaign-session');\r\n      if (!sessionString) return [];\r\n\r\n      const sessionInfo = JSON.parse(sessionString);\r\n      if (sessionInfo.scenarioId !== scenarioId) return [];\r\n\r\n      return sessionInfo.sessionData.checkpoints || [];\r\n    } catch (error) {\r\n      console.error('Failed to get checkpoints:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  public restoreCheckpoint(checkpointId: string): CampaignCheckpoint | null {\r\n    try {\r\n      const sessionString = localStorage.getItem('current-campaign-session');\r\n      if (!sessionString) return null;\r\n\r\n      const sessionInfo = JSON.parse(sessionString);\r\n      const checkpoint = sessionInfo.sessionData.checkpoints.find(\r\n        (cp: CampaignCheckpoint) => cp.id === checkpointId\r\n      );\r\n\r\n      return checkpoint || null;\r\n    } catch (error) {\r\n      console.error('Failed to restore checkpoint:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private getCurrentScenario(): any {\r\n    try {\r\n      const scenarioData = localStorage.getItem('current-campaign-scenario');\r\n      return scenarioData ? JSON.parse(scenarioData) : null;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private getCurrentObjectiveProgress(): any {\r\n    try {\r\n      const progressData = localStorage.getItem('campaign-objective-progress');\r\n      return progressData ? JSON.parse(progressData) : {};\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  private getCurrentSessionData(): any {\r\n    try {\r\n      const sessionString = localStorage.getItem('current-campaign-session');\r\n      if (!sessionString) {\r\n        return {\r\n          startTime: Date.now(),\r\n          elapsedTime: 0,\r\n          facilitiesBuilt: 0,\r\n          speciesContained: 0,\r\n          crisisesHandled: 0,\r\n          checkpoints: []\r\n        };\r\n      }\r\n\r\n      const sessionInfo = JSON.parse(sessionString);\r\n      return sessionInfo.sessionData;\r\n    } catch (error) {\r\n      return {\r\n        startTime: Date.now(),\r\n        elapsedTime: 0,\r\n        facilitiesBuilt: 0,\r\n        speciesContained: 0,\r\n        crisisesHandled: 0,\r\n        checkpoints: []\r\n      };\r\n    }\r\n  }\r\n\r\n  public updateSessionStats(stats: {\r\n    facilitiesBuilt?: number;\r\n    speciesContained?: number;\r\n    crisisesHandled?: number;\r\n  }): void {\r\n    try {\r\n      const sessionString = localStorage.getItem('current-campaign-session');\r\n      if (!sessionString) return;\r\n\r\n      const sessionInfo = JSON.parse(sessionString);\r\n\r\n      if (stats.facilitiesBuilt !== undefined) {\r\n        sessionInfo.sessionData.facilitiesBuilt += stats.facilitiesBuilt;\r\n      }\r\n\r\n      if (stats.speciesContained !== undefined) {\r\n        sessionInfo.sessionData.speciesContained += stats.speciesContained;\r\n      }\r\n\r\n      if (stats.crisisesHandled !== undefined) {\r\n        sessionInfo.sessionData.crisisesHandled += stats.crisisesHandled;\r\n      }\r\n\r\n      // Update elapsed time\r\n      sessionInfo.sessionData.elapsedTime = Date.now() - sessionInfo.sessionData.startTime;\r\n\r\n      localStorage.setItem('current-campaign-session', JSON.stringify(sessionInfo));\r\n    } catch (error) {\r\n      console.error('Failed to update session stats:', error);\r\n    }\r\n  }\r\n\r\n  public exportCampaignProgress(): string {\r\n    try {\r\n      const allData = {\r\n        campaignProgress: localStorage.getItem('xenomorph-park-campaign-full-progress'),\r\n        scenarios: Object.keys(localStorage)\r\n          .filter(key => key.startsWith('xenomorph-park-campaign-saves-'))\r\n          .reduce((acc, key) => {\r\n            acc[key] = localStorage.getItem(key);\r\n            return acc;\r\n          }, {} as Record<string, string | null>)\r\n      };\r\n\r\n      return JSON.stringify(allData, null, 2);\r\n    } catch (error) {\r\n      console.error('Failed to export campaign progress:', error);\r\n      return '';\r\n    }\r\n  }\r\n\r\n  public importCampaignProgress(data: string): boolean {\r\n    try {\r\n      const importData = JSON.parse(data);\r\n\r\n      if (importData.campaignProgress) {\r\n        localStorage.setItem('xenomorph-park-campaign-full-progress', importData.campaignProgress);\r\n      }\r\n\r\n      if (importData.scenarios) {\r\n        Object.entries(importData.scenarios).forEach(([key, value]) => {\r\n          if (value && typeof value === 'string') {\r\n            localStorage.setItem(key, value);\r\n          }\r\n        });\r\n      }\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to import campaign progress:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public clearAllCampaignData(): void {\r\n    // Clear all campaign-related localStorage\r\n    Object.keys(localStorage)\r\n      .filter(key => key.startsWith('xenomorph-park-campaign-'))\r\n      .forEach(key => localStorage.removeItem(key));\r\n\r\n    // Stop auto-save timer\r\n    if (this.autoSaveTimer) {\r\n      clearInterval(this.autoSaveTimer);\r\n      this.autoSaveTimer = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport const campaignSaveManager = CampaignSaveManager.getInstance();","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\src\\utils\\saveManager.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SETTINGS_KEY' is assigned a value but never used.","line":18,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":202,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":202,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GameState } from '../types';\r\n\r\nexport interface SaveData {\r\n  gameState: Partial<GameState>;\r\n  timestamp: number;\r\n  version: string;\r\n  playTime: number;\r\n}\r\n\r\nexport interface SaveSlot {\r\n  id: string;\r\n  name: string;\r\n  data: SaveData;\r\n  isAutoSave: boolean;\r\n}\r\n\r\nconst SAVE_KEY_PREFIX = 'xenomorph-park-save';\r\nconst SETTINGS_KEY = 'xenomorph-park-settings';\r\nconst CURRENT_VERSION = '1.0.0';\r\nconst MAX_SAVE_SLOTS = 5;\r\nconst AUTO_SAVE_INTERVAL = 30000; // 30 seconds\r\n\r\nexport class SaveManager {\r\n  private autoSaveTimer: NodeJS.Timeout | null = null;\r\n  private playStartTime: number = Date.now();\r\n\r\n  // Save game to specific slot\r\n  saveGame(state: Partial<GameState>, slotId: string, name?: string): boolean {\r\n    try {\r\n      const playTime = this.getPlayTime();\r\n      const saveData: SaveData = {\r\n        gameState: state,\r\n        timestamp: Date.now(),\r\n        version: CURRENT_VERSION,\r\n        playTime\r\n      };\r\n\r\n      const saveSlot: SaveSlot = {\r\n        id: slotId,\r\n        name: name || `Save ${new Date().toLocaleString()}`,\r\n        data: saveData,\r\n        isAutoSave: slotId === 'autosave'\r\n      };\r\n\r\n      localStorage.setItem(`${SAVE_KEY_PREFIX}-${slotId}`, JSON.stringify(saveSlot));\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to save game:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Load game from specific slot\r\n  loadGame(slotId: string): SaveData | null {\r\n    try {\r\n      const saveDataString = localStorage.getItem(`${SAVE_KEY_PREFIX}-${slotId}`);\r\n      if (!saveDataString) return null;\r\n\r\n      const saveSlot: SaveSlot = JSON.parse(saveDataString);\r\n      \r\n      // Version compatibility check\r\n      if (saveSlot.data.version !== CURRENT_VERSION) {\r\n        console.warn(`Save version mismatch: ${saveSlot.data.version} vs ${CURRENT_VERSION}`);\r\n        // Could implement migration logic here\r\n      }\r\n\r\n      this.playStartTime = Date.now() - saveSlot.data.playTime;\r\n      return saveSlot.data;\r\n    } catch (error) {\r\n      console.error('Failed to load game:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get all save slots\r\n  getAllSaves(): SaveSlot[] {\r\n    const saves: SaveSlot[] = [];\r\n    \r\n    for (let i = 0; i < localStorage.length; i++) {\r\n      const key = localStorage.key(i);\r\n      if (key?.startsWith(SAVE_KEY_PREFIX)) {\r\n        try {\r\n          const saveDataString = localStorage.getItem(key);\r\n          if (saveDataString) {\r\n            const saveSlot: SaveSlot = JSON.parse(saveDataString);\r\n            saves.push(saveSlot);\r\n          }\r\n        } catch (error) {\r\n          console.error(`Failed to parse save slot ${key}:`, error);\r\n        }\r\n      }\r\n    }\r\n\r\n    return saves.sort((a, b) => b.data.timestamp - a.data.timestamp);\r\n  }\r\n\r\n  // Delete save slot\r\n  deleteSave(slotId: string): boolean {\r\n    try {\r\n      localStorage.removeItem(`${SAVE_KEY_PREFIX}-${slotId}`);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Failed to delete save:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Auto-save functionality\r\n  startAutoSave(getGameState: () => Partial<GameState>): void {\r\n    this.stopAutoSave();\r\n    this.autoSaveTimer = setInterval(() => {\r\n      this.saveGame(getGameState(), 'autosave', 'Auto Save');\r\n    }, AUTO_SAVE_INTERVAL);\r\n  }\r\n\r\n  stopAutoSave(): void {\r\n    if (this.autoSaveTimer) {\r\n      clearInterval(this.autoSaveTimer);\r\n      this.autoSaveTimer = null;\r\n    }\r\n  }\r\n\r\n  // Quick save/load\r\n  quickSave(state: Partial<GameState>): boolean {\r\n    return this.saveGame(state, 'quicksave', 'Quick Save');\r\n  }\r\n\r\n  quickLoad(): SaveData | null {\r\n    return this.loadGame('quicksave');\r\n  }\r\n\r\n  // Export save data as JSON file\r\n  exportSave(slotId: string): void {\r\n    const saveSlot = this.getAllSaves().find(save => save.id === slotId);\r\n    if (!saveSlot) return;\r\n\r\n    const dataStr = JSON.stringify(saveSlot, null, 2);\r\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\r\n    const url = URL.createObjectURL(dataBlob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `xenomorph-park-${saveSlot.name.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  }\r\n\r\n  // Import save data from JSON file\r\n  importSave(file: File): Promise<boolean> {\r\n    return new Promise((resolve) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        try {\r\n          const saveSlot: SaveSlot = JSON.parse(e.target?.result as string);\r\n          \r\n          // Generate new ID to avoid conflicts\r\n          const newId = `imported-${Date.now()}`;\r\n          saveSlot.id = newId;\r\n          saveSlot.name = `Imported - ${saveSlot.name}`;\r\n          \r\n          localStorage.setItem(`${SAVE_KEY_PREFIX}-${newId}`, JSON.stringify(saveSlot));\r\n          resolve(true);\r\n        } catch (error) {\r\n          console.error('Failed to import save:', error);\r\n          resolve(false);\r\n        }\r\n      };\r\n      reader.readAsText(file);\r\n    });\r\n  }\r\n\r\n  // Get current play time\r\n  getPlayTime(): number {\r\n    return Date.now() - this.playStartTime;\r\n  }\r\n\r\n  // Format play time for display\r\n  formatPlayTime(playTime: number): string {\r\n    const hours = Math.floor(playTime / 3600000);\r\n    const minutes = Math.floor((playTime % 3600000) / 60000);\r\n    return `${hours}h ${minutes}m`;\r\n  }\r\n\r\n  // Storage management\r\n  getStorageUsage(): { used: number; available: number; percentage: number } {\r\n    try {\r\n      let used = 0;\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key?.startsWith(SAVE_KEY_PREFIX)) {\r\n          used += localStorage.getItem(key)?.length || 0;\r\n        }\r\n      }\r\n\r\n      // Estimate available space (most browsers allow ~5-10MB)\r\n      const available = 5 * 1024 * 1024; // 5MB estimate\r\n      const percentage = (used / available) * 100;\r\n\r\n      return { used, available, percentage };\r\n    } catch (error) {\r\n      return { used: 0, available: 0, percentage: 0 };\r\n    }\r\n  }\r\n\r\n  // Clean up old saves if storage is getting full\r\n  cleanupOldSaves(): void {\r\n    const saves = this.getAllSaves().filter(save => !save.isAutoSave);\r\n    if (saves.length > MAX_SAVE_SLOTS) {\r\n      const toDelete = saves.slice(MAX_SAVE_SLOTS);\r\n      toDelete.forEach(save => this.deleteSave(save.id));\r\n    }\r\n  }\r\n}\r\n\r\nexport const saveManager = new SaveManager();","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\test\\smoke.test.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\test\\smoke.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\xenomorph_park\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]